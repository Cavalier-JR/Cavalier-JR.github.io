<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>从零编写一个MCP Server</title>
      <link href="/2025/07/03/post14/"/>
      <url>/2025/07/03/post14/</url>
      
        <content type="html"><![CDATA[<h1>1. Mcp python-sdk</h1><p>从<a href="https://github.com/modelcontextprotocol/python-sdk">链接</a>了解MCP的python-sdk</p><h2 id="1-安装uv">（1） 安装uv</h2><blockquote><p>uv是高效的python环境管理工具</p></blockquote><p>以<strong>Windows</strong>系统为例，在<strong>PowerShell</strong>中执行 <code>powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"</code> 安装uv<br>安装完成后，注意在继续运行 <code>$env:Path = "C:\Users\你的用户名\.local\bin;$env:Path"</code> ，将uv添加到环境变量</p><h2 id="2-创建一个uv管理的项目">（2） 创建一个uv管理的项目</h2><h3 id="①-通过uv查看python版本">① 通过uv查看python版本</h3><p>通过运行 <code>uv python list</code> 可以查看当前已经安装的python版本，以及uv提供的可通过uv命令直接下载的python版本：</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">&gt; uv python listcpython-3<span class="token punctuation">.</span>14<span class="token punctuation">.</span>0b3-windows-x86_64-none                 &lt;download available&gt;cpython-3<span class="token punctuation">.</span>14<span class="token punctuation">.</span>0b3+freethreaded-windows-x86_64-none    &lt;download available&gt;cpython-3<span class="token punctuation">.</span>13<span class="token punctuation">.</span>5-windows-x86_64-none                   &lt;download available&gt;cpython-3<span class="token punctuation">.</span>13<span class="token punctuation">.</span>5+freethreaded-windows-x86_64-none      &lt;download available&gt;cpython-3<span class="token punctuation">.</span>12<span class="token punctuation">.</span>11-windows-x86_64-none                  &lt;download available&gt;cpython-3<span class="token punctuation">.</span>12<span class="token punctuation">.</span>1-windows-x86_64-none                   AppData\Local\Programs\Python\Python312\python<span class="token punctuation">.</span>execpython-3<span class="token punctuation">.</span>11<span class="token punctuation">.</span>13-windows-x86_64-none                  &lt;download available&gt;cpython-3<span class="token punctuation">.</span>11<span class="token punctuation">.</span>7-windows-x86_64-none                   D:\anaconda\python<span class="token punctuation">.</span>execpython-3<span class="token punctuation">.</span>11<span class="token punctuation">.</span>4-windows-x86_64-none                   AppData\Local\Programs\Python\Python311\python<span class="token punctuation">.</span>execpython-3<span class="token punctuation">.</span>10<span class="token punctuation">.</span>18-windows-x86_64-none                  &lt;download available&gt;cpython-3<span class="token punctuation">.</span>10<span class="token punctuation">.</span>0-windows-x86_64-none                   AppData\Local\Programs\Python\Python310\python<span class="token punctuation">.</span>execpython-3<span class="token punctuation">.</span>9<span class="token punctuation">.</span>23-windows-x86_64-none                   &lt;download available&gt;cpython-3<span class="token punctuation">.</span>8<span class="token punctuation">.</span>20-windows-x86_64-none                   &lt;download available&gt;pypy-3<span class="token punctuation">.</span>11<span class="token punctuation">.</span>11-windows-x86_64-none                     &lt;download available&gt;pypy-3<span class="token punctuation">.</span>10<span class="token punctuation">.</span>16-windows-x86_64-none                     &lt;download available&gt;pypy-3<span class="token punctuation">.</span>9<span class="token punctuation">.</span>19-windows-x86_64-none                      &lt;download available&gt;pypy-3<span class="token punctuation">.</span>8<span class="token punctuation">.</span>16-windows-x86_64-none                      &lt;download available&gt;graalpy-3<span class="token punctuation">.</span>11<span class="token punctuation">.</span>0-windows-x86_64-none                   &lt;download available&gt;graalpy-3<span class="token punctuation">.</span>10<span class="token punctuation">.</span>0-windows-x86_64-none                   &lt;download available&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如需下载python-3.13.5，运行 <code>uv python install 3.13.5</code>  即可：</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">&gt; uv python install 3<span class="token punctuation">.</span>13<span class="token punctuation">.</span>5Installed Python 3<span class="token punctuation">.</span>13<span class="token punctuation">.</span>5 in 5<span class="token punctuation">.</span>55s <span class="token operator">+</span> cpython-3<span class="token punctuation">.</span>13<span class="token punctuation">.</span>5-windows-x86_64-none<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="②-创建项目">② 创建项目</h3><p>新建一个文件夹命名为“MCP_Server”并在PowerShell中切换到该路径，然后依次执行：</p><ul><li><code>uv init . -p 3.13.5</code></li><li><code>uv add "mcp[cli]"</code></li></ul><p>分别用于初始化一个uv管理的python项目，以及添加 MCP 到项目依赖</p><h1>2. 编写MCP Server</h1><p>以官方提供的一个简单的MCP_Server加法运算示例<br>在编程IDE中打开MCP_Server文件夹并切换到 <code>main.py</code> ，将其中的内容清除并替换为以下内容：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># server.py</span><span class="token keyword">from</span> mcp<span class="token punctuation">.</span>server<span class="token punctuation">.</span>fastmcp <span class="token keyword">import</span> FastMCP<span class="token comment"># Create an MCP server</span>mcp <span class="token operator">=</span> FastMCP<span class="token punctuation">(</span><span class="token string">"Demo"</span><span class="token punctuation">)</span><span class="token comment"># Add an addition tool</span><span class="token decorator annotation punctuation">@mcp<span class="token punctuation">.</span>tool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""Add two numbers"""</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token comment"># Add a dynamic greeting resource</span><span class="token decorator annotation punctuation">@mcp<span class="token punctuation">.</span>resource</span><span class="token punctuation">(</span><span class="token string">"greeting://{name}"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">get_greeting</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""Get a personalized greeting"""</span>    <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"Hello, </span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">!"</span></span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    mcp<span class="token punctuation">.</span>run<span class="token punctuation">(</span>transport<span class="token operator">=</span><span class="token string">'stdio'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1>3. 在Cherry Studio中测试</h1><p>首先下载<a href="https://www.cherry-ai.com/download">Cherry Studio</a></p><h2 id="1-cherry-studio配置">（1）Cherry Studio配置</h2><blockquote><p>点击左下角的设置按钮，进入配置界面</p></blockquote><h3 id="①-模型服务配置">① 模型服务配置</h3><p>左下角设置⚙图标 → 模型服务，配置好API</p><h3 id="②-mcp服务器配置">② MCP服务器配置</h3><p>左下角设置⚙图标 → MCP服务器 → 右上角⚠ → 安装uv和bun</p><ul><li>可点击“安装”自动安装</li><li>手动安装地址：<ul><li>Bun: <a href="https://github.com/oven-sh/bun/releases">https://github.com/oven-sh/bun/releases</a></li><li>UV: <a href="https://github.com/astral-sh/uv/releases">https://github.com/astral-sh/uv/releases</a></li></ul></li></ul><h2 id="2-使用开源的mcp-server">（2）<a href="https://github.com/punkpeye/awesome-mcp-servers/blob/main/README-zh.md">使用开源的MCP Server</a></h2><h3 id="①-搜索：fetch">① 搜索：<a href="https://github.com/modelcontextprotocol/servers/tree/main/src/fetch">Fetch</a></h3><blockquote><p>使大模型从网页中获取并处理内容</p></blockquote><p>复制：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"fetch"</span><span class="token operator">:</span> <span class="token punctuation">{</span>     <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"uvx"</span><span class="token punctuation">,</span>     <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"mcp-server-fetch"</span><span class="token punctuation">]</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在Cherry Studio → 左下角设置⚙图标 → MCP服务器 → 铅笔icon，点击后进入编辑Json页面，插入上面的内容。<br><img src="/../images/34.png" alt="导入开源MCP"><br>确定后，fetch被添加到列表中，点击“启用”按钮，配置成功。</p><h3 id="②-地图：baidu">② 地图：Baidu</h3><p>必须认证才能拿到API，但是有点慢。高德好像也有类似的可以试试</p><h3 id="③-浏览器自动化：mcp-playwright">③ 浏览器自动化：<a href="https://github.com/executeautomation/mcp-playwright">mcp-playwright</a></h3><p>先在命令行执行下面的命令，下载包：</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">npm install <span class="token operator">-</span>g @executeautomation/playwright-mcp-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>复制：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"playwright"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"npx"</span><span class="token punctuation">,</span>      <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"-y"</span><span class="token punctuation">,</span> <span class="token string">"@executeautomation/playwright-mcp-server"</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在Cherry Studio → 左下角设置⚙图标 → MCP服务器 → 铅笔icon，点击后进入编辑Json页面，插入上面的内容。<br>注意：在原先的mcp server后加一个英文逗号，再在后面粘贴新的</p><h3 id="④-搜索：duckduckgo">④ 搜索：<a href="https://github.com/zhsama/duckduckgo-mcp-server">duckduckgo</a></h3><blockquote><p>注意：我自己用的时候没搜索成功过</p></blockquote><p>复制：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"duckduckgo-search"</span><span class="token operator">:</span> <span class="token punctuation">{</span>       <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"npx"</span><span class="token punctuation">,</span>       <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span>         <span class="token string">"-y"</span><span class="token punctuation">,</span>         <span class="token string">"duckduckgo-mcp-server"</span>       <span class="token punctuation">]</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其他操作同上。</p><h3 id="⑤">⑤…</h3><p>原理got了后面就可以随便找然后加了</p><h2 id="3-测试刚才编写的简易mcp-server">（3）测试刚才编写的简易MCP Server</h2><p>先切换至Cherry Studio → 左下角设置⚙图标 → MCP服务器 → 添加服务器<br><img src="/../images/35.png" alt="服务器配置"><br>然后直接调用即可。</p><h2 id="4-把编写的mcp-server改为sse协议">（4）把编写的MCP Server改为SSE协议</h2><p>在Server的 <code>main.py</code> 中，更改最后的transport为sse<br>在Cherry Studio中，更改MCP服务器的类型为sse<br>运行 <code>main.py</code> 后，直接在Cherry Studio中与模型对话，调用即可</p><h2 id="5-把mcp-server发布到公网">（5）把MCP Server发布到公网</h2><p>以打包成python包上传到Pypi为例：</p><ul><li>新建一个文件夹并在命令行cd到该文件夹</li><li>执行 <code>uv init . --package -p 3.13.5</code> 和 <code>uv add "mcp[cli]"</code></li><li>用编程IDE打开文件夹中的 <code>__init__.py</code> 文件<ul><li><strong>保留其内容</strong>，把之前编写好的MCP Server的 <code>main.py</code> 的内容粘贴在原内容上</li><li>剪切刚才粘贴进来的 <code>main.py</code> 中最后一行的 <code>mcp.run()</code> 函数，粘贴至 <code>__init__.py</code> 原来的main函数中。</li><li>删除 <code>__init__.py</code> 原来的main函数的内容，删除 <code>"if __name__ == "__main__":</code></li><li>注意在 <code>mcp.run()</code> 中，transport一定是stdio</li></ul></li><li>执行 <code>uv build</code> 打包</li><li>在<a href="https://pypi.org/">Pypi</a>注册并验证邮箱，然后在"Account Settings"里点击生成恢复码"generate recovery codes"，保存第一行恢复码并输入。完成后点击"Add with authentication application"</li><li>在手机下载"Microsoft Authenticator"，登录后，点击上方+ → 个人账户 → 扫描QR Code，扫描屏幕二维码，把手机上生成的验证码填写到网站</li><li>在"Account Settings"里下滑找到 “Add API token”，添加名字和范围，然后生成了API（只出现一次，保存好）</li><li>执行 <code>uv publish --token &lt;your api token&gt;</code> ，其中<code>&lt;your api token&gt;</code>为刚才的token</li><li>在Pypi的"your projects"中可以找到刚才上传的MCP Server</li></ul><h2 id="6-使用上传到公网的mcp-server">（6）使用上传到公网的MCP Server</h2><p>以刚才的Pypi为例：<br>在Cherry Studio → 左下角设置⚙图标 → MCP服务器 → 添加服务器<br>命令：uvx<br>参数：包名【为了避免包名冲突，建议在最开始设置包名时以自己的用户名开头】</p><h1>开源MCP Server聚合网站</h1><p><a href="https://smithery.ai/">Smithery</a><br><a href="https://github.com/punkpeye/awesome-mcp-servers/blob/main/README-zh.md">Awesome-MCP-Servers</a></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> Agent </tag>
            
            <tag> LLM </tag>
            
            <tag> 大模型 </tag>
            
            <tag> MCP </tag>
            
            <tag> MCP Server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机视觉知识点总结（结合cs131）</title>
      <link href="/2025/04/25/post13/"/>
      <url>/2025/04/25/post13/</url>
      
        <content type="html"><![CDATA[<h1>〇、考点</h1><blockquote><p><strong>题目主要集中在分割之前</strong></p></blockquote><h2 id="1-绪论">1. 绪论</h2><ul><li>知道几个计算机视觉的应用场景（选择题）</li></ul><h2 id="2-图像的形成">2. 图像的形成</h2><ul><li>颜色直方图的优缺点</li></ul><h2 id="3-图像处理基础">3. 图像处理基础</h2><ul><li>卷积时对边缘填坑问题的四种处理方式，对应matlab函数的意义</li><li>高斯核方差/窗宽的变化与平滑程度的关系（可能简答可能选择）</li><li>常见卷积核（原图、左移一个单位、模糊…）</li><li>高斯核的自卷积性质</li><li>卷积时间复杂度分析（强调了一定会考）</li></ul><h2 id="4-边缘检测">4. 边缘检测</h2><ul><li>解释为什么图像对x（y）求导提取了y（x）方向的特征</li><li>可分离性的证明，可能是高斯核，也可能是高斯一阶偏导核（一定会考）</li><li>3.10没声，不知道Canny边缘检测器的考点情况</li><li>霍夫变换和RANSAC的异同点？（简答）</li><li>霍夫变换的流程的大致描述</li><li>霍夫变换的优缺点（可能选择也可能问答）</li></ul><h2 id="5-拟合">5. 拟合</h2><ul><li>K-Means 算法的流程</li><li>K-Means 算法的优缺点</li><li>Mean Shift 算法的流程</li><li>Mean Shift 算法的优缺点</li></ul><h2 id="6-局部特征">6. 局部特征</h2><h3 id="1-角点检测">（1）角点检测</h3><ul><li>Harris角点检测的流程</li><li>M矩阵和阈值R如何计算</li><li>Harris角点检测的不变性</li></ul><h3 id="2-斑点检测">（2）斑点检测</h3><ul><li>高斯差分如何提升了计算效率</li><li>高斯核的性质（高斯核的自卷积性质）</li></ul><h3 id="3-纹理特征">（3）纹理特征</h3><ul><li>优点、属性（可能以选择题的形式）</li><li>SIFT特征的维度（128）</li><li>需要好好复习SIFT特征</li></ul><h2 id="7-分割">7. 分割</h2><p>不知道</p><h2 id="8-识别">8. 识别</h2><p>不知道</p><h2 id="9-检测">9. 检测</h2><ul><li>Boosting算法的思想</li><li>统计模板方法的优缺点（选择题）</li></ul><h1>一、绪论</h1><h2 id="1-计算机视觉的目标">1. 计算机视觉的目标</h2><p>跨越“语义鸿沟”建立像素到语义的映射</p><h2 id="2-人类视觉系统">2. 人类视觉系统</h2><h3 id="1-视觉流程">（1）视觉流程</h3><p>图像/视频 → 眼睛【感知设备】 → 大脑【解释器】 → 花草树木 春夏秋冬 山河湖海…【解释】</p><h3 id="2-能力">（2）能力</h3><ul><li>运动视盲</li><li>分割</li><li>感知</li><li>…</li></ul><h3 id="3-计算机视觉的应用场景">（3）计算机视觉的应用场景</h3><ul><li>三维重建</li><li>人脸检测、笑容检测</li><li>虹膜识别、指纹识别</li><li>手写字体识别、车牌识别</li><li>无人超市</li><li>火星探测</li><li>医学图像辅助诊断</li><li>增强现实</li><li>虚拟现实</li><li>…</li></ul><blockquote><p>这部分没什么东西，略过</p></blockquote><h1>二、图像的形成</h1><h2 id="1-图像的类型">1. 图像的类型</h2><h3 id="1-二进制图像">（1）二进制图像</h3><p>每个像素点取值0/1；0黑，1白<br>每个像素点可以用1个bit表示<br><img src="/../images/post13_images/c577564971b79c29dc5958291aa7c1ab.png" alt></p><h3 id="2-灰色图像">（2）灰色图像</h3><p>每个像素点取值0~255；小黑，大白<br>每个像素点可以用1个byte表示（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">byte</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span></span></span> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup></mrow><annotation encoding="application/x-tex">2^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span></span></span></span>= <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>256</mn></mrow><annotation encoding="application/x-tex">256</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">256</span></span></span></span> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span></span></span></span>）<br><img src="/../images/post13_images/347e291fb5502947fa87fd2fb5a65d94.png" alt><br>灰度图像能表示的信息有限，比如车道的黄线和白线，灰度表示不出来</p><h3 id="3-彩色图像">（3）彩色图像</h3><h4 id="eg-rgb">eg.RGB</h4><p>三个通道：Red/Green/Blue<br>每个像素点可以用3个byte表示</p><h2 id="2-数字图像的存储">2. 数字图像的存储</h2><blockquote><p>对数字图像进行采样和量化两个操作，从而表示为整数值矩阵</p></blockquote><h3 id="1-采样">（1）采样</h3><p>在一个规则的网格上对二维空间进行采样：</p><ul><li>把图像划分为非常多的小格子，格子越多，分辨率越高，每个格子表示一个像素<br><img src="/../images/post13_images/b6153f9813f5948f64910aef2bcedc50.png" alt></li></ul><h3 id="2-量化">（2）量化</h3><ul><li>给每个小格子（像素）一个整数值，0~255，数值连续<br><img src="/../images/post13_images/3d9d43a93052cd327031dc82bc9b8bbd.png" alt></li></ul><h2 id="3-图像色彩模型">3. 图像色彩模型</h2><h3 id="1-色彩空间的定义">（1）色彩空间的定义</h3><p>通过多个颜色分量构成坐标系来表示各种颜色的模型系统</p><h3 id="2-常见的色彩空间">（2）常见的色彩空间</h3><h4 id="①-rgb">① RGB</h4><p>Red/Green/Blue<br>红绿蓝，每个0~255，因此可以表示<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>256</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">256^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">25</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>种颜色<br><img src="/../images/post13_images/a33f3b2a71ca3653b8e46b2c37c0f1f4.png" alt></p><h4 id="②-hsv">② HSV</h4><p>Hue（色调）/Saturation（饱和度）/Value（亮度）<br><img src="/../images/post13_images/63295e8932a2054577fa6773825184f6.png" alt><br>Hue的取值是0°~360°；Saturation的取值是0~1；Value的取值是0~1<br>HSV在图像增强领域应用的比较多，能够更大程度保护图像颜色信息，避免色彩失真</p><h4 id="③-hls">③ HLS</h4><p>Hue（色调）/Lightness（亮度）/Saturation（饱和度）<br><img src="/../images/post13_images/81457c35c1609f9b35ecbd6030ebd880.png" alt><br>（图中说数值越大越小，色彩越白越黑，指的是）</p><h4 id="value和lightness的区别">Value和Lightness的区别</h4><ul><li>Value：光线强度的明度</li><li>Lightness：白色光线的多少</li></ul><h2 id="4-图像直方图">4. 图像直方图</h2><h3 id="1-构建直方图示例-简单灰度图像示例">（1）构建直方图示例（简单灰度图像示例）</h3><p>直方图Histograms，初始化直方图有i个格子（bin）：H[i]<br>假设i=4，对如下图的图像构建直方图：<br><img src="/../images/post13_images/f05d39f1037bb15116353a75b2431921.png" alt></p><h3 id="2-归一化">（2）归一化</h3><h4 id="①-动机">① 动机</h4><p>对于两个大小不同的图像，想要进行比较，如果都选取同样bin的数量构建直方图，则小的图像显然取值少，无法合理比较。</p><h4 id="②-做法">② 做法</h4><p>按照原来的取值，除以总像素数量即可。<br>在刚才的例子中，相当于从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2,3 ,1,3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span></span></span></span> 变成 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>2</mn><mn>9</mn></mfrac><mo separator="true">,</mo><mfrac><mn>3</mn><mn>9</mn></mfrac><mo separator="true">,</mo><mfrac><mn>1</mn><mn>9</mn></mfrac><mo separator="true">,</mo><mfrac><mn>3</mn><mn>9</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{2}{9},\frac{3}{9},\frac{1}{9},\frac{3}{9}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><h3 id="3-彩色图像构建直方图-颜色直方图">（3）彩色图像构建直方图——颜色直方图</h3><h4 id="①-构建方法">① 构建方法</h4><h5 id="a-方法1：分别构建三个通道的直方图">a. 方法1：分别构建三个通道的直方图</h5><h5 id="b-方法2：三个通道取均值-按比例得到一个数值-再构建一个直方图">b. 方法2：三个通道取均值/按比例得到一个数值，再构建一个直方图</h5><h4 id="②-颜色直方图的优点">② 颜色直方图的优点</h4><ul><li>颜色直方图可以比较好的表示一张图像</li><li>计算过程快速且计算方式简单</li><li>可以将大小进行标准化，从而比较不同的图像直方图</li><li>可以利用颜色直方图进行数据库查询或分类</li></ul><h3 id="4-总结bin与像素的关系">（4）总结bin与像素的关系</h3><ul><li>每个像素都有且只有一个自己所属的bin</li><li>每个bin可能会对应多个像素</li></ul><h1>三、图像处理基础</h1><h2 id="1-噪声的去除">1. 噪声的去除</h2><p>如果能和周围的像素加权平均一下，噪声点的影响就变小了<br>因此可以把加权平均的权值做成一个卷积核/滤波核</p><h2 id="2-卷积">2. 卷积</h2><h3 id="1-卷积核">（1）卷积核</h3><h4 id="①-卷积核的意义">① 卷积核的意义</h4><p>存储了当前点和周围点的加权平均的权值<br><img src="/../images/post13_images/568dc1194148738e2a082f16abb95060.png" alt><br>例如上图，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>9</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{9}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>其实是需要乘到每个小方格里面的<br>那么以中间的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>9</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{9}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>为例子，它就是由周围的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span>个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>9</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{9}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，加起来后除以<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span>，进而得到的</p><h4 id="②-卷积的定义">② 卷积的定义</h4><p>假设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>是图像，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span>是卷积核：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>f</mi><mo>∗</mo><mi>g</mi><mo stretchy="false">)</mo><mo stretchy="false">[</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">]</mo><mo>=</mo><munder><mo>∑</mo><mrow><mi>k</mi><mo separator="true">,</mo><mi>l</mi></mrow></munder><mi>f</mi><mo stretchy="false">[</mo><mi>m</mi><mo>−</mo><mi>k</mi><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mi>l</mi><mo stretchy="false">]</mo><mi>g</mi><mo stretchy="false">[</mo><mi>k</mi><mo separator="true">,</mo><mi>l</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">(f * g)[m,n] = \sum_{k,l} f[m-k, n-l] g[k,l]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4882em;vertical-align:-1.4382em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4382em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">]</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">]</span></span></span></span></span></p><p>其中：<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo separator="true">,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">m,n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span></span></span></span>是卷积模板最中间位置的坐标<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo separator="true">,</mo><mi>l</mi></mrow><annotation encoding="application/x-tex">k,l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>是翻转后卷积核的坐标，取值范围是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1,0,1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">[</mo><mi>k</mi><mo separator="true">,</mo><mi>l</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">g[k,l]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">]</span></span></span></span>是翻转后的卷积核在(k,l)位置的值<br><strong>我认为需要结合一个例子来解释更清晰：</strong><br><img src="/../images/post13_images/14ea42f0ecee36dbc0b1126671110af8.png" alt><br><strong>关于卷积核的翻转：</strong><br>老师的PPT中翻转是垂直翻转，但实际上严格的卷积翻转是垂直+水平，也就是中心旋转180°<br>考试中如果提到翻转还是默认以老师PPT中的垂直翻转为准<br>上面的卷积公式，只有在中心旋转时才生效！否则不生效，是错误的！</p><h4 id="③-卷积的理解">③ 卷积的理解</h4><p><img src="/../images/post13_images/388e3a914032945e25299b0fead74271.png" alt><br>因此卷积做了翻转：<br><img src="/../images/post13_images/d03b2f7a5f086e2005bd71ba1f97fda1.png" alt></p><h3 id="2-卷积操作的特性">（2）卷积操作的特性</h3><h4 id="①-线性">① 线性</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mi>i</mi><mi>l</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mn>1</mn></msub><mo>+</mo><msub><mi>f</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mi>i</mi><mi>l</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mi>i</mi><mi>l</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">filter(f_1+f_2)=filter(f_1)+filter(f_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>f</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">f_1,f_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>两张图像先求和在做卷积，等于分别卷积后在求和</p><h4 id="②-平移不变性">② 平移不变性</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mi>i</mi><mi>l</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo stretchy="false">(</mo><mi>s</mi><mi>h</mi><mi>i</mi><mi>f</mi><mi>t</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mi>s</mi><mi>h</mi><mi>i</mi><mi>f</mi><mi>t</mi><mo stretchy="false">(</mo><mi>f</mi><mi>i</mi><mi>l</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">filter(shift(f))=shift(filter(f))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mclose">))</span></span></span></span></span></p><p>即一张图像先做平移还是先做卷积，结果是一样的<br><strong>推论：任何剪平移不变的操作，都可以用卷积来表示</strong></p><h4 id="③-一些数学特性">③ 一些数学特性</h4><ul><li>交换律：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∗</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>∗</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a*b=b*a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></li><li>结合律：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>b</mi><mo>∗</mo><mi>c</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mo>∗</mo><mi>b</mi><mo stretchy="false">)</mo><mo>∗</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">a*(b*c)=(a*b)*c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></li><li>分配律：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>b</mi><mo>+</mo><mi>c</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mo>∗</mo><mi>b</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>a</mi><mo>∗</mo><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a*(b+c)=(a*b)+(a*c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span></span></li><li>数乘结合律：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mi>a</mi><mo>∗</mo><mi>b</mi><mo>=</mo><mi>a</mi><mo>∗</mo><mi>k</mi><mi>b</mi><mo>=</mo><mi>k</mi><mo stretchy="false">(</mo><mi>a</mi><mo>∗</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">ka*b=a*kb=k(a*b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">ka</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">kb</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></li><li>对于单位脉冲信号<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><mo stretchy="false">[</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">e=[...,0,0,1,0,0,...]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mclose">]</span></span></span></span>，有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∗</mo><mi>e</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a*e=a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></li></ul><h3 id="3-卷积核覆盖与图像大小的关系">（3）卷积核覆盖与图像大小的关系</h3><p>matlab函数中通过指定shape，存在三种覆盖模式<br><img src="/../images/post13_images/95d591d05d9c3616f7dff8fc77150edb.png" alt></p><ul><li>full：卷积后图像会变大一圈</li><li>same：卷积后图像会保留原始尺寸</li><li>valid：卷积后图像会变小一圈</li></ul><h3 id="4-卷积边缘填坑问腿">（4）卷积边缘填坑问腿</h3><p>对于上面的same模式，由于卷积核部分在目标区域外，落在周围那一圈是我们需要填充的，有下面几个填充方法：</p><h4 id="①-clip-filter-black">① Clip filter（black）</h4><p>就是常数填充<br>填充一圈黑的，会出现黑边，不太好<br>对应matlab：imfilter(f,g,0)</p><h4 id="②-wrap-around">② wrap around</h4><p>填充的那一圈是从图像中随机采样的<br>对应matlab：imfilter(f,g,‘circular’)</p><h4 id="③-copy-edge">③ copy edge</h4><p>填充的那一圈是把边缘继续延伸进去的<br>对应matlab：imfilter(f,g,‘replicate’)</p><h4 id="④-reflect-across-edge">④ reflect across edge</h4><p>填充的那一圈是沿着边缘镜像过去的<br>对应matlab：imfilter(f,g,‘symme’)<br><img src="/../images/post13_images/62d3c1650c634c1796e1d32081151dd9.png" alt></p><h3 id="5-常见卷积核">（5）常见卷积核</h3><p><img src="/../images/post13_images/fc38dd0c2eceb75fb338638891a94b4b.png" alt><br><strong>锐化的原理：</strong><br>模糊/平滑卷积核相当于提取了平滑的特征，原图减去这些平滑的就剩不平滑的部分了，再加回原图相当于加强了。因此一共存在两倍的原图，所以在上面存在一个2<br><img src="/../images/post13_images/c0e3bdc8fc6f8acf17d178aa0a450182.png" alt></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo>∗</mo><mo stretchy="false">(</mo><mn>2</mn><mi>e</mi><mo>−</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f*(2e-g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span></span></p><p>同时，可以设置一个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">α</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>在第二步加回去的突出部分前面，从而控制加回去多少细节，进而控制锐化强度，则有：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo>+</mo><mi>α</mi><mo stretchy="false">(</mo><mi>f</mi><mo>−</mo><mi>f</mi><mo>∗</mo><mi>g</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>α</mi><mo stretchy="false">)</mo><mi>f</mi><mo>−</mo><mi>α</mi><mi>f</mi><mo>∗</mo><mi>g</mi><mo>=</mo><mi>f</mi><mo>∗</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>α</mi><mo stretchy="false">)</mo><mi>e</mi><mo>−</mo><mi>α</mi><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f + \alpha (f - f \ast g) = (1 + \alpha)f - \alpha f \ast g = f \ast ((1 + \alpha)e - \alpha g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">((</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">αg</span><span class="mclose">)</span></span></span></span></span></p><h3 id="6-卷积核的有效性">（6）卷积核的有效性</h3><h4 id="①-动机">① 动机</h4><ul><li>卷积核通过与图像的像素值进行加权求和，提取特定的特征（如边缘、纹理）或实现滤波效果（如模糊、锐化）。卷积核中每个值的大小决定了对应位置像素的权重，因此可以说卷积核的设计直接影响了每个像素对输出结果的“贡献”。</li><li>想要得到更加有效的卷积模板，则应该考虑图像每个像素的贡献来设计卷积核的每个值，贡献大设计值大，贡献小设计值小。</li><li>因此很容易想到大部分情况下，中心像素对任务贡献最大。因此希望设计卷积核中间值大，越往两边越小。</li></ul><h4 id="②-高斯核-高斯滤波">② 高斯核/高斯滤波</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>G</mi><mi>σ</mi></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>π</mi><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac><msup><mi>e</mi><mrow><mo>−</mo><mfrac><mrow><mo stretchy="false">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac></mrow></msup></mrow><annotation encoding="application/x-tex">G_\sigma = \frac{1}{2\pi\sigma^2} e^{-\frac{(x^2 + y^2)}{2\sigma^2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">σ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0151em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3291em;"><span style="top:-3.4534em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.251em;"><span style="top:-2.5062em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9384em;"><span style="top:-2.9384em;margin-right:0.1em;"><span class="pstrut" style="height:2.6444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.5021em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0484em;"><span style="top:-3.0484em;margin-right:0.1em;"><span class="pstrut" style="height:2.6444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0484em;"><span style="top:-3.0484em;margin-right:0.1em;"><span class="pstrut" style="height:2.6444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4938em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>高斯函数就是中间大两头小，非常符合上面我们的想法。</p><h4 id="a-参数-sigma-方差">a. 参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>（方差）</h4><p>固定窗宽看方差变化的影响：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>越大，数据越分散，中心点峰值越小，卷积核中心值越小</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>越小，数据越集中，中心点峰值越大，卷积核中心值越大<br><img src="/../images/post13_images/9247199addd60a97673d778010320237.png" alt><br>因此<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>可以控制平滑程度，形象点说，中心值越大说明对自己有很大的掌控权啊，平滑对我自己的影响就小，中心值小说明我容易丧失自我，就被平滑的很厉害~</li></ul><h4 id="b-窗宽">b. 窗宽</h4><p>固定方差看窗宽变化的影响：</p><ul><li>窗宽越小，在归一化时分母越小，每个的权重就越大，平滑程度越大</li><li>窗宽越大，在归一化时分母越大，每个的权重就越小，平滑程度越小<br><img src="/../images/post13_images/f4ba84297588a11164d00d332e4e1a23.png" alt></li></ul><h4 id="c-现实中如何设置">c. 现实中如何设置</h4><p>根据经验值，窗宽的一半=三倍的方差<br>一般在现成的工具包中，指定一个方差，窗宽会自动给出</p><h4 id="d-高斯核的特性">d. 高斯核的特性</h4><ul><li>作为低通滤波器，从图像中移除高频信号</li><li><font color="red"><strong>高斯核的自卷积是另一个高斯函数，因此可以用小粒度高斯核的多次卷积，得到使用大粒度高斯核卷积相同的结果。    【重要！】</strong></font><br><img src="/../images/post13_images/8fab1ebe7bf74472049b9536fa518edd.png" alt><br>图中的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span> 表示图像；同时这里符合勾股定理，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>=</mo><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a^2+b^2=c^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></li><li>一个二维的高斯函数可以拆分成两个一维的——<strong>可分离的</strong>函数<br>可分离性的应用：<br><img src="/../images/post13_images/624eb31b695986113315cc50e03817ca.png" alt><br>就是一个拆分后逐步计算</li></ul><h3 id="7-卷积的时间复杂度">（7）卷积的时间复杂度</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">m×m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 的卷积核 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n×n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 的图像做卷积</p><h4 id="①-一般情况">① 一般情况</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><msup><mi>m</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2m^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><h4 id="②-卷积核可分离的情况">② 卷积核可分离的情况</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></p><h2 id="3-噪声">3. 噪声</h2><h3 id="1-噪声的种类">（1）噪声的种类</h3><p><img src="/../images/post13_images/e991f67613e75b26e3acf7f170039324.png" alt></p><h4 id="①-椒盐噪声-salt-and-pepper-noise">① 椒盐噪声（Salt and pepper noise）</h4><blockquote><p>像随机在图像上撒了一把“椒盐”，有黑的有白的</p></blockquote><p>随机出现黑白像素</p><h4 id="②-白噪声-impulse-noise">② 白噪声（Impulse noise）</h4><p>随机出现白色像素</p><h4 id="③-高斯噪声-gaussian-noise">③ 高斯噪声（Gaussian noise）</h4><p>出现从高斯正态分布得到的强度变化（叠加变量）</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>+</mo><mi>η</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x, y) = \hat{f}(x, y) + \eta(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2079em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span></p><p>其中：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> 是高斯噪声产生后的图像</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\hat{f}(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2079em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> 是理想状态没有高斯噪声的清晰图像</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\eta(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> 是高斯噪声，满足<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\eta(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>μ</mi><mo separator="true">,</mo><mi>σ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N(μ,σ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal">μ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="mclose">)</span></span></span></span> ，即服从高斯分布</li></ul><h3 id="2-使用高斯滤波器去除高斯噪声">（2）使用高斯滤波器去除高斯噪声</h3><p><img src="/../images/post13_images/0fe237f3052110aab6472db0f277e7bf.png" alt><br>但上图也可以发现，大方差高斯卷积核虽然更能去除噪声，但也<strong>损失图像细节</strong></p><h3 id="3-去除椒盐噪声">（3）去除椒盐噪声</h3><h4 id="①-高斯卷积核效果不佳">① 高斯卷积核效果不佳</h4><p>用高斯卷积核去除椒盐噪声<strong>效果不理想</strong>：<br><img src="/../images/post13_images/16fb090613a3e2bbbb402e1384823f38.png" alt><br>大模板不仅没能更有效去除噪声，反而还损失了不少图像细节</p><h4 id="②-中值滤波的步骤">② 中值滤波的步骤</h4><h5 id="a-第一步：生成模板-3-3为例">a. 第一步：生成模板（3×3为例）</h5><p>单纯一个3×3的框，里面啥也没有</p><h5 id="b-第二步：放到图像中取出像素值">b. 第二步：放到图像中取出像素值</h5><h5 id="c-第三步：对其中的值找到中位数">c. 第三步：对其中的值找到中位数</h5><p><img src="/../images/post13_images/a5257af2a6160a141995951348c110d9.png" alt></p><h5 id="d-第四步：用中位数替代模板最中间的值">d. 第四步：用中位数替代模板最中间的值</h5><blockquote><p>Q：中值滤波是一个线性操作嘛？<br>A：不是，因为其中核心原理在排序，排序不是线性操作。</p></blockquote><h4 id="③-中值滤波的优点">③ 中值滤波的优点</h4><h5 id="a-擅长处理椒盐噪声-白噪声">a. 擅长处理椒盐噪声、白噪声</h5><h5 id="b-和均值滤波相比">b. 和均值滤波相比</h5><p><img src="/../images/post13_images/d8d32d9613174203f86ed491eacc5e2c.png" alt></p><h1>四、边缘检测</h1><h2 id="1-边缘基本概念">1. 边缘基本概念</h2><h3 id="1-边缘的定义">（1）边缘的定义</h3><p>图像中亮度值明显而急剧变化的点</p><h3 id="2-研究边缘的意义">（2）研究边缘的意义</h3><ul><li>图像中大多数语义和形状信息可在边缘进行编码</li><li>相对于像素表示边缘表示更加紧凑<br>图像→边缘→语义</li></ul><h3 id="3-边缘的分类">（3）边缘的分类</h3><ul><li>表面法向不连续</li><li>深度不连续</li><li>表面颜色不连续</li><li>光照不连续<br><img src="/../images/post13_images/79e912ac1a3c00f556e77546261682a9.png" alt></li></ul><h2 id="2-边缘的提取">2. 边缘的提取</h2><h3 id="1-思路">（1）思路</h3><p>水平方向观察到像素值变化，强度函数求导找到极值点,极值点展示出边缘<br><img src="/../images/post13_images/e914eceb58b435ebfeee3474855e0467.png" alt></p><h3 id="2-图像求导">（2）图像求导</h3><h4 id="①-2d函数求导公式">① 2D函数求导公式</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mo>=</mo><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>ε</mi><mo>→</mo><mn>0</mn></mrow></munder><mfrac><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>ε</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mi>ε</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial f(x, y)}{\partial x} = \lim_{\varepsilon \to 0} \frac{f(x + \varepsilon, y) - f(x, y)}{\varepsilon}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1441em;vertical-align:-0.7171em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.3829em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ε</span><span class="mrel mtight">→</span><span class="mord mtight">0</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7171em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">ε</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h4 id="②-图像求导公式">② 图像求导公式</h4><p>图像是一个一个像素，是离散存储的，并不是上面那样连续的，因此只能取<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\epsilon=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>来近似：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mo>≈</mo><mfrac><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mn>1</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial f(x, y)}{\partial x} \approx \frac{f(x + 1, y) - f(x, y)}{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>相当于右边的像素减去自己，就是导数了</p><h4 id="③-用卷积实现图像求导">③ 用卷积实现图像求导</h4><p>如图设计卷积核：<br><img src="/../images/post13_images/6572a796ec866d8e5d5d9dc78238fe75.png" alt><br>正好水平x求导就是右减左，竖直y求导就是下减上</p><h4 id="④-解释对不同方向求导得出垂直方向特征图像的原因-导数模板方向和信号方向是垂直关系">④ 解释对不同方向求导得出垂直方向特征图像的原因【导数模板方向和信号方向是垂直关系】</h4><p><img src="/../images/post13_images/df18927abab0b64a37451286e6552fef.png" alt><br>解释：<br>对于x方向，求导相当于水平两个像素做差。</p><ul><li>如果水平的两个像素差异不大，相减就相当于0，什么都没有了，导数为接近0，而前面说了，求导数后导数的极值点展示了边缘，所以没有展示出x方向的边缘。</li><li>如果水平的两个像素差异明显，同理，那么导数就得到了极值点，检测出y方向边缘。<br><img src="/../images/post13_images/1737439c8fe7834b23afa913bcee0064.png" alt></li></ul><h4 id="⑤-其他常见的导数滤波器-可略">⑤ 其他常见的导数滤波器（可略）</h4><h5 id="a-简介">a. 简介</h5><p><img src="/../images/post13_images/65375152be328c5234f7125884569718.png" alt></p><ul><li>Prewitt：利用像素点上下、左右邻点的灰度差。这种判定是欠合理的，会造成边缘点的误判，因为许多噪声点的灰度值也很大，而且对于幅值较小的边缘点，其边缘反而丢失了。</li><li>Sobel：Sobel 算子在 Prewitt 算子的基础上增加了权重的概念，认为相邻点的距离远近对当前像素点的影响是不同的，距离越近的像素点对应当前像素的影响越大，从而实现图像锐化并突出边缘轮廓。</li><li>Roberts：交叉算子边缘检测方法。该方法最大优点是计算量小，速度快。但该方法由于是采用偶数模板，如下图所示，所求的(x,y)点处梯度幅度值，其实是图中交叉点处的值，从而导致在图像(x,y)点所求的梯度幅度值偏移了半个像素<br><img src="/../images/post13_images/eb7ca1698d2d9d3e6c8711df862ff915.png" alt></li></ul><h5 id="b-总结">b. 总结</h5><ul><li>Robert算子对陡峭的低噪声图像效果较好，尤其是边缘正负45度较多的图像，但定位准确率较差；</li><li>Prewitt算子对灰度渐变的图像边缘提取效果较好，而没有考虑相邻点的距离远近对当前像素点的影响；</li><li>Sobel算子考虑了综合因素，对噪声较多的图像处理效果更好。<br><img src="/../images/post13_images/ac18a383e7c30fcc5fbd95d400953594.png" alt></li></ul><h3 id="3-图像梯度">（3）图像梯度</h3><p><img src="/../images/post13_images/2b94b200b979f35581cd0088d4e151cc.png" alt></p><h2 id="3-噪声对边缘的影响">3. 噪声对边缘的影响</h2><h3 id="1-影响">（1）影响</h3><p>存在影响：<br><img src="/../images/post13_images/acd89619e493294306a1eab8978d5bf2.png" alt></p><h3 id="2-原因">（2）原因</h3><p><img src="/../images/post13_images/cbe2af545dc0f863efb03fd44e18065d.png" alt><br>由于噪声的存在，找不到极值点了</p><h3 id="3-解决">（3）解决</h3><h4 id="①-流程">① 流程</h4><p>先去噪，再对信号求导，找到极值点<br><img src="/../images/post13_images/c44f26b9647acdf319383576ed77e1c4.png" alt></p><h4 id="②-弊端">② 弊端</h4><p>存在两次卷积，一次是去噪时卷积（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>∗</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">f*g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span>），另一次是求偏导时用导数模板做卷积求出偏导数，即上图红框的部分的求导过程。<br>当图像数量多的时候，由于存在两次卷积，<strong>计算量大</strong></p><h4 id="③-弊端的进一步解决">③ 弊端的进一步解决</h4><p>利用卷积的结合性：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>d</mi><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mo stretchy="false">(</mo><mi>f</mi><mo>∗</mo><mi>g</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo>∗</mo><mfrac><mi>d</mi><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mi>g</mi></mrow><annotation encoding="application/x-tex">\frac{d}{dx}(f * g) = f * \frac{d}{dx}g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2251em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span><br>也就是：</p><ul><li>先对高斯核进行求导——得到 <font color="red"><strong>高斯一阶偏导核</strong></font></li><li>再利用求导后的高斯核来和原始的有噪声的图像做卷积<br><img src="/../images/post13_images/cfb1ae26fc3bf2c26ae1a7775a9db82b.png" alt></li></ul><h4 id="④-高斯一阶偏导核">④ 高斯一阶偏导核</h4><h5 id="a-可视化">a. 可视化</h5><p>看一下就行：<br><img src="/../images/post13_images/8b49e7eb0501dc0bdd18435f85d255b2.png" alt></p><h5 id="b-方差的影响">b. 方差的影响</h5><p>随高斯一阶偏导核方差变大，图像细节的丢失也会越来越严重</p><blockquote><p>实际应用中，如果要识别细微的边缘特征，肯定方差设置小一点会好些；但如果只是想粗糙识别一下，比如看远方的一个物体是不是人，那方差设置大一点会好些，保留了轮廓信息<br>【就是看我们需要的轮廓是粗糙的还是细微的】</p></blockquote><h5 id="c-可分离性证明">c. 可分离性证明</h5><p><img src="/../images/post13_images/fa68aa6e8847a0a41ab9a8c7cc24cdb4.png" alt></p><h5 id="d-高斯核-vs-高斯一阶偏导核">d. 高斯核 vs 高斯一阶偏导核</h5><p>总结对比一下：<br><img src="/../images/post13_images/35ce0e86b652578d02f876c32b2cbf13.png" alt></p><h2 id="4-canny边缘检测器">4. Canny边缘检测器</h2><blockquote><p>这部分智慧课堂无声，本人参考<a href="https://blog.csdn.net/weixin_42118657/article/details/121255328">CS131专题-3：图像梯度、边缘检测（sobel、canny等）</a>进行学习，感谢这篇博客。这篇博客恰好对应本章所有内容，相较课内更为详细，推荐学习。</p></blockquote><h3 id="1-提出动机">（1）提出动机</h3><p>常规边缘检测算法存在以下问题：</p><ul><li>边缘很粗：如sobel这样的边缘检测算子，对图像求梯度图后，会设置一个阈值，绝对值超过阈值的像素为视为边缘，这就导致得到的边缘图中“边缘”会很粗<br><img src="/../images/post13_images/08e2185d3cd2fe3a0f0481b1b8bd8592.png" alt></li><li>渐变边低于阈值，无法被识别为边缘：由于sobel中梯度阈值是全局性的，不能太高也不能太低，这就导致很多不明显的渐变边被擦除。<br><img src="/../images/post13_images/36f9d48a22cde65528e3c8269167be76.png" alt></li></ul><h3 id="2-canny边缘检测器算法流程">（2）Canny边缘检测器算法流程</h3><p>matlab：edge(image,‘canny’)</p><h4 id="①-对原始图像进行灰度化">① 对原始图像进行灰度化</h4><p>此步课内PPT未提及，但是要进行的。因为边缘检测本质检测的是亮度变化。</p><h4 id="②-对图像进行平滑-高斯滤波">② 对图像进行平滑（高斯滤波）</h4><p>用高斯导数对图像进行滤波：对图像的x方向和y方向求梯度</p><h4 id="③-求图像平滑后的梯度图-以及梯度方向图">③ 求图像平滑后的梯度图、以及梯度方向图</h4><p>计算梯度强度（衡量是否为边缘）和梯度方向（用于非极大值抑制）</p><h4 id="④-nms非极大值抑制筛选">④ NMS非极大值抑制筛选</h4><p>顾名思义就是在附近的一堆值中找到最大的那个，然后把不是最大的都设0<br><img src="/../images/post13_images/21c5b2245b44a323e4d37f36f74559c1.png" alt><br>对比一下非极大值抑制的效果，明显变细了：<br><img src="/../images/post13_images/7c66d41c3bbadfe147ef53b64c9ca5fd.png" alt></p><h4 id="⑤-双阈值-连通与否筛选">⑤ 双阈值+连通与否筛选</h4><p>双门限法：定义两个阈值</p><ul><li>高阈值：检测强边缘</li><li>低阈值：连接强边缘<br><img src="/../images/post13_images/51bf3feebbd7360d9977231cade81e4e.png" alt><br>简单来说就是高于高的就是边缘，低于低的就不是边缘，在中间的看有没有穿过高阈值的部分</li></ul><h4 id="补充">补充</h4><ul><li>在②③两部分，实际中会采取之前说的先得到高斯一阶偏导核，再做卷积~</li><li>高斯核的方差<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>越大，对图像平滑效果越强，越容易把边缘平滑掉，边缘会稀疏（仅保留非常明显的边缘）；反之，边缘会密集、详细。因此可控制方差大小获得想要的边缘图。</li><li>Canny边缘检测的一些缺点：边缘可能不连续、边缘位置可能出现空间偏移（偏离真实边界）、方差的变化会明显改变结果，鲁棒性差。<br><img src="/../images/post13_images/9621d8a62d6e10bd05ccb16856a1c0f9.png" alt></li></ul><h2 id="5-其他边缘检测技术-缺">5. 其他边缘检测技术（缺）</h2><blockquote><p>因为视频没声，PPT这部分也看不出来是想说啥细节，所以只能略过喽</p></blockquote><ul><li>CNN 边缘检测模型</li><li>用Transformer做边缘检测</li><li>语义边缘检测</li><li>遮挡边缘检测</li></ul><h1>五、拟合（Fitting）</h1><blockquote><p>边缘检测出的边缘是一个底层的特征 low-level<br><strong>从边缘图中，通过拟合技术，进一步提取需要的几何边缘</strong></p></blockquote><h2 id="1-拟合的基本概念">1. 拟合的基本概念</h2><h3 id="1-目标">（1）目标</h3><p>找到一个参数化的模型，来表示特征</p><h3 id="2-难点-需要解决的问题">（2）难点/需要解决的问题</h3><p><img src="/../images/post13_images/b747884957bd4465dc44a6d937e56064.png" alt></p><ul><li>噪声：图像以及预处理会存在各种噪声，影响拟合</li><li>外点/无关点：比如我只想找车上的几何形状，那么车之外的像素点都是无关点，这些点会影响程序自动化寻找车的形状</li><li>缺失数据——遮挡：由于遮挡关系，几何形状可能是间断的。比如想检测车后面房子的窗户的形状，结果由于车在前面，被挡住了。</li></ul><h2 id="2-拟合的常见方法">2. 拟合的常见方法</h2><h3 id="1-最小二乘法-least-squres-line-fitting">（1）最小二乘法（Least squres line fitting）</h3><h4 id="①-原理">① 原理</h4><h5 id="a-确定目标函数">a. 确定目标函数</h5><p><img src="/../images/post13_images/8a0b4e595d6d4a8e4c73235739c1ba8b.png" alt></p><h5 id="b-最小化目标函数">b. 最小化目标函数</h5><p>利用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∥</mi><mi mathvariant="bold">P</mi><msup><mi mathvariant="normal">∥</mi><mn>2</mn></msup><mo>=</mo><msubsup><mi>P</mi><mn>1</mn><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>P</mi><mn>2</mn><mn>2</mn></msubsup><mo>+</mo><mo>⋯</mo><mo>+</mo><msubsup><mi>P</mi><mi>n</mi><mn>2</mn></msubsup><mo>=</mo><msup><mi mathvariant="bold">P</mi><mi>T</mi></msup><mi mathvariant="bold">P</mi></mrow><annotation encoding="application/x-tex">\|\mathbf{P}\|^2 = P_1^2 + P_2^2 + \cdots + P_n^2=\mathbf{P}^T\mathbf{P}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord">∥</span><span class="mord mathbf">P</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0622em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4519em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0622em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4519em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0611em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord mathbf">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathbf">P</span></span></span></span><br><img src="/../images/post13_images/7f0ccb8dc1b03b50228562fab8271ed3.png" alt><br>最终得到了最优直线对应的m和b（B矩阵）</p><h4 id="②-缺陷">② 缺陷</h4><p><img src="/../images/post13_images/29550c26cb37aba9aecf8f0973a3ee93.png" alt><br>所以缺陷就是没办法解决垂直线，因为它不是旋转不变的，只要发生旋转了，就解决不好问题了</p><h3 id="2-全最小二乘法-total-least-squares">（2）全最小二乘法（Total least squares）</h3><h4 id="①-原理">① 原理</h4><p>本质上就是将计算的距离从竖直方向距离改为点到直线的距离<br>最优化的参数从两个（m，b）变为三个（a，b，d）<br><img src="/../images/post13_images/8e61f7f2d99b3bc1a05ade96d02e46fa.png" alt><br><img src="/../images/post13_images/bfafdc9629a990839758aa3ee221d0fa.png" alt><br>其中从对d求导到得到d的a、b表示：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><mo>−</mo><mn>2</mn><mi>a</mi><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><mn>2</mn><mi>b</mi><msub><mi>y</mi><mi>i</mi></msub><mo>+</mo><mn>2</mn><mi>d</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{n} (-2ax_i - 2by_i + 2d) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">2</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><mi>a</mi><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d=\sum_{i=1}^{n}(ax_i+by_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo>=</mo><mfrac><mi>a</mi><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><mfrac><mi>b</mi><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>a</mi><mover accent="true"><mi>x</mi><mo>ˉ</mo></mover><mo>+</mo><mi>b</mi><mover accent="true"><mi>y</mi><mo>ˉ</mo></mover></mrow><annotation encoding="application/x-tex">d = \frac{a}{n} \sum_{i=1}^{n} x_i + \frac{b}{n} \sum_{i=1}^{n} y_i = a \bar{x} + b \bar{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">b</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span></span></span></span></span></p><p>以及其中矩阵U：<br><img src="/../images/post13_images/1dbdcf11de1c89a201662a0f212000bc.png" alt></p><h4 id="②-优缺点">② 优缺点</h4><ul><li>优点：相较于最小二乘，具有旋转不变性</li><li>缺点：不能很好地对抗噪声点<br><img src="/../images/post13_images/b1da2f3b0ccee2fdec55f5054d6107b6.png" alt></li></ul><h4 id="③-从概率角度理解全最小二乘">③ 从概率角度理解全最小二乘</h4><blockquote><p>感觉不是很重要，但是PPT讲了，就附带一下吧<br>也就是最小二乘法与极大似然估计之间的内在联系</p></blockquote><p><strong>假设：</strong><br>存在一条理想直线（最终的拟合直线）<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mi>y</mi><mo>=</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">ax+by=d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span>，法向量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">n</mi><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{n}=(a,b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span>，直线上真实点坐标为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>，但观测点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>受到垂直于直线方向的噪声干扰。<br><strong>观测点的表示：</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>+</mo><mi>ε</mi><mo>⋅</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><msqrt><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></mrow></msqrt></mfrac></mrow><annotation encoding="application/x-tex">(x, y) = (u, v) + \varepsilon \cdot \frac{(a, b)}{\sqrt{a^2 + b^2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.357em;vertical-align:-0.93em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.1966em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9134em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.8734em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1266em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">ε</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>是噪声幅值，服从均值为0、标准差为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>的高斯分布<br><strong>单点概率密度：</strong><br>给定直线参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a,b,d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span></span></span></span>，观测点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_i,y_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>的噪声服从高斯分布，由于理想点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>满足<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>u</mi><mo>+</mo><mi>b</mi><mi>v</mi><mo>=</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">au+bv=d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span>，垂直距离<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∣</mi><mi>a</mi><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><mi>d</mi><mi mathvariant="normal">∣</mi></mrow><msqrt><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></mrow></msqrt></mfrac></mrow><annotation encoding="application/x-tex">\varepsilon = \frac{|ax_i + by_i - d|}{\sqrt{a^2 + b^2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.548em;vertical-align:-0.538em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.5445em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9221em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathnormal mtight">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.8821em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1179em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="mord mathnormal mtight">a</span><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">b</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">d</span><span class="mord mtight">∣</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，结合高斯分布公式，化简得到观测点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_i,y_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>的概率密度为：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>i</mi></msub><mo>∣</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo><mo>∝</mo><mi>exp</mi><mo>⁡</mo><mrow><mo fence="true">(</mo><mo>−</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>a</mi><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><mi>d</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">P(x_i, y_i \mid a, b, d) \propto \exp \left( -\frac{(ax_i + by_i - d)^2}{2\sigma^2} \right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4411em;vertical-align:-0.95em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">d</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></p><p><strong>似然函数：</strong><br>假设所有观测点独立同分布，联合似然函数为各点概率的乘积：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="script">L</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∏</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>exp</mi><mo>⁡</mo><mrow><mo fence="true">(</mo><mo>−</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>a</mi><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><mi>d</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{L}(a, b, d) = \prod_{i=1}^{n} \exp \left( -\frac{(ax_i + by_i - d)^2}{2\sigma^2} \right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal">L</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">d</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></p><p><strong>对数似然函数：</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>ln</mi><mo>⁡</mo><mi mathvariant="script">L</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><mi>a</mi><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><mi>d</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\ln \mathcal{L}(a, b, d) = -\frac{1}{2\sigma^2} \sum_{i=1}^{n} (ax_i + by_i - d)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">ln</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathcal">L</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><p><strong>最大化似然函数相当于：</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>max</mi><mo>⁡</mo></mrow><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>d</mi></mrow></munder><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><mi>a</mi><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><mi>d</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\max_{a,b,d} -\sum_{i=1}^{n} (ax_i + by_i - d)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.3479em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">d</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8882em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><p><strong>等价于全最小二乘的目标：</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>d</mi></mrow></munder><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><mi>a</mi><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><mi>d</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\min_{a,b,d} \sum_{i=1}^{n} (ax_i + by_i - d)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.3479em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">d</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8882em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><h3 id="3-鲁棒最小二乘法">（3）鲁棒最小二乘法</h3><h4 id="①-原理">① 原理</h4><p>根据点的残差来差异化特征贡献，也就是离得近的贡献大，离得远的贡献小<br><strong>找到最优参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> 最小化目标损失函数：</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mo>∑</mo><mi>i</mi></munder><mi>ρ</mi><mo stretchy="false">(</mo><msub><mi>r</mi><mi>i</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>θ</mi><mo stretchy="false">)</mo><mo separator="true">;</mo><mi>σ</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><mi>ρ</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">;</mo><mi>σ</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><mfrac><msup><mi>u</mi><mn>2</mn></msup><mrow><msup><mi>σ</mi><mn>2</mn></msup><mo>+</mo><msup><mi>u</mi><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\sum_{i} \rho(r_i(x_i, \theta); \sigma)=\sum_{i} \rho(u;\sigma)=\sum_{i} \frac{u^2}{\sigma^2+u^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">ρ</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">ρ</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.7688em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>其中：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>=</mo><msub><mi>r</mi><mi>i</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">u=r_i(x_i,θ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>是第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个数据点的残差（模型预测值与真实值的偏差）</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span> 是尺度参数，控制函数从“类平方”到“饱和”的转折点。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>  越小，函数越早进入饱和区，模型对离群点更鲁棒；<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>  越大，饱和区延迟，模型更接近传统最小二乘。<br><img src="/../images/post13_images/1f420d0acb628860ab3da05239d329c4.png" alt><br>如上图，横坐标是残差 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> ，纵坐标是对应的响应（贡献）<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ρ</span></span></span></span>，三条曲线分别展现了不同 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span> 大小带来的影响。</li></ul><h4 id="②-特点">② 特点</h4><ul><li>非线性优化过程，经过了一个非线性的变换</li><li>可以先用全最小二乘初始化初始解，再用梯度下降方法取求最优解</li><li>受 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span> 大小的影响很大，一般选择1.5倍的平均残差</li></ul><h4 id="③-优缺点">③ 优缺点</h4><ul><li>优点：对外点具有鲁棒性</li><li>缺点：依赖于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span> 的取值，取大取小都不好；如果外点数变多，表现可能也不是那么好了<br><img src="/../images/post13_images/c921a13f321cab84bb954899c455f683.png" alt></li></ul><h3 id="4-随机采样一致性算法ransac">（4）随机采样一致性算法RANSAC</h3><blockquote><p>如果有很多外点，鲁棒最小二乘可能也不好用了<br>RANSAC：Random sample consensus</p></blockquote><h4 id="①-原理流程-以直线为例">① 原理流程（以直线为例）</h4><h5 id="a-随机从所有点中选择所需的最少的样本点-如估计一条直线方程需要两个点-其他模型可能不一样">a. 随机从所有点中选择所需的最少的样本点（如估计一条直线方程需要两个点，其他模型可能不一样）</h5><h5 id="b-拟合出一条直线">b. 拟合出一条直线</h5><h5 id="c-计算每个点到该直线的距离-并设置一个距离的阈值-门限">c. 计算每个点到该直线的距离，并设置一个距离的阈值/门限</h5><h5 id="d-记录落在阈值-门限范围内的点的数量-内点数量-作为投票得分">d. 记录落在阈值/门限范围内的点的数量（内点数量），作为投票得分</h5><h5 id="e-重复abcd这四步若干次">e. 重复abcd这四步若干次</h5><h5 id="f-跳出迭代后-选用内点最多-投票得分最高-的拟合结果">f. 跳出迭代后，选用内点最多（投票得分最高）的拟合结果</h5><p><img src="/../images/post13_images/1d04e12fa76de326f80a0f8c6c106bfc.png" alt></p><h4 id="②-参数设置">② 参数设置</h4><h5 id="a-初始化样本点数-s">a. 初始化样本点数 s</h5><p>这个是跟任务相关的，直线最少需要俩点，其他模型可能更多</p><h5 id="b-门限-阈值-t">b. 门限/阈值 t</h5><h5 id="c-迭代次数-n">c. 迭代次数 N</h5><blockquote><p>迭代多少次才结束呢？需要选取一个合适的迭代次数</p></blockquote><h6 id="i-基本原理">i. 基本原理</h6><p>先设置两个概率：</p><ul><li><strong>最优概率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span>：</strong> 只要这个拟合结果有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> 的概率能够准确检测所有样本点的，那么久接受它，不去继续找了</li><li><strong>外点概率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>：</strong> 某个点不属于拟合结果的概率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span></li></ul><p>然后进行下面的理解：</p><ul><li>最终拟合直线的准确率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></li><li>最终拟合直线预测错误的概率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">1-p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></li><li>外点的概率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span></li><li>内点的概率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>e</mi></mrow><annotation encoding="application/x-tex">1-e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span></li><li>对于某一次迭代，最开始选了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 个点做初始化，内点的概率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>e</mi><msup><mo stretchy="false">)</mo><mi>s</mi></msup></mrow><annotation encoding="application/x-tex">(1-e)^s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span></span></span></span></li><li>对于某一次迭代，最开始选了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 个点做初始化，外点的概率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>e</mi><msup><mo stretchy="false">)</mo><mi>s</mi></msup></mrow><annotation encoding="application/x-tex">1-(1-e)^s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span></span></span></span></li><li>对于总共 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 次迭代，外点的概率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>e</mi><msup><mo stretchy="false">)</mo><mi>s</mi></msup><msup><mo stretchy="false">)</mo><mi>N</mi></msup></mrow><annotation encoding="application/x-tex">(1-(1-e)^s)^N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span></span></span></span></li></ul><p>对于理想的拟合直线，它已经是由很多内点投票出来的直线了，它对于这些内点，就相当于是可以预测/检测成功的；那相对应的，如果遇到外点了，那可不就是会预测错误嘛<br>所以：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>e</mi><msup><mo stretchy="false">)</mo><mi>s</mi></msup><mo>=</mo><mn>1</mn><mo>−</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">1-(1-e)^s=1-p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span></p><p>满足上式的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 就是我们想要的，反解出来：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>N</mi><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>e</mi><msup><mo stretchy="false">)</mo><mi>s</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N=log(1-p)/log(1-(1-e)^s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h6 id="ii-自适应算法">ii. 自适应算法</h6><blockquote><p>实际的外点概率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span> 经常是未知的，如果外点特别多的话，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 会非常大，也不利于计算</p></blockquote><p>步骤如下：<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi mathvariant="normal">∞</mi><mo separator="true">,</mo><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi mathvariant="normal">_</mi><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">N=∞,sample\_count=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"></span><span class="mord">∞</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">am</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord mathnormal">e</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span><br>While <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&gt;</mo><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi mathvariant="normal">_</mi><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">N&gt;sample\_count</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">am</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord mathnormal">e</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span> :<br>  选择一个样本并计算内点率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>e</mi></mrow><annotation encoding="application/x-tex">1-e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>（就是正常拟合后算出来阈值内的内点数，然后算个占比）；<br>  进一步计算出外点率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span> （就是1-内点率）<br>  根据 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>e</mi><msup><mo stretchy="false">)</mo><mi>s</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N=log(1-p)/log(1-(1-e)^s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 更新 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span><br>  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi mathvariant="normal">_</mi><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">sample\_count</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">am</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord mathnormal">e</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span>++</p><p>【其实通过分析公式，可以看出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>∝</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">e\propto N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>，所以上面的自适应算法由于动态计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>，就实现了动态调整 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>】</p><h5 id="d-一致性-d">d. 一致性 d</h5><p>比如对于总共有100个点，我们可以设置d=50，迭代结束后：</p><ul><li>如果所有拟合结果的内点数（投票得分）都没到50，最终给出投票数最高的那个就行</li><li>如果有多个都到了50，除了最高的以外，这些高于50的也给出来，输出多条直线。<br>【因此可以通过设置d来控制结果要多条直线还是单条直线】</li></ul><h4 id="③-优缺点">③ 优缺点</h4><h5 id="a-优点">a. 优点</h5><ul><li>简单、通用</li><li>适用于许多不同问题</li><li>在实践中效果通常不错</li></ul><h5 id="b-缺点">b. 缺点</h5><ul><li>需要调整的参数很多</li><li>内点数比较低（外点数比较多）的时候，迭代次数太多</li><li>初始化不稳定，比如如果第一次外点数就爆多，那很坏了；<br>但是如果第一次内点数爆多，那说不定很快就解决了；<br>所以这初始化挺不稳定的</li></ul><h4 id="④-补充">④ 补充</h4><ul><li><strong>还是建议记忆一下 <font color="red"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>∝</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">e\propto N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></font></strong></li><li>真实应用时，其实需要针对特定问题和情况做更多改进，比如RANSAC最终得到最好的一根线，其实再用最小二乘去拟合这根线周围的点，得到的新直线会更好（<strong>细化</strong>）</li><li>RANSAC的一个实际应用的抽象示例——指纹匹配<br><img src="/../images/post13_images/6e8726c3c30421b22707a24a3d14a37a.png" alt></li></ul><h3 id="5-霍夫变换">（5）霍夫变换</h3><h4 id="①-引入-ransac无法解决的一些问题">① 引入——RANSAC无法解决的一些问题</h4><p>如果只想检测下图的绿色直线，那么其他直线都是外点，外电太多了，RANSAC计算量爆炸，效果也受影响。<strong>RANSAC不好解决图像中存在大量线的情况</strong><br><img src="/../images/post13_images/3a81fcd271fa745accdb6f8887f7006f.png" alt></p><h4 id="②-霍夫变换需要满足的投票方案">② 霍夫变换需要满足的投票方案</h4><h5 id="a-让每个特征为所有与其兼容的模型投票">a. 让每个特征为所有与其兼容的模型投票</h5><p>也就是说，对于一个点，谁能检测到它，它就给谁投票。都各自投完，最后选的模型依然是分数最高的那个。</p><h5 id="b-噪声点不可以一直为同一个模型投票">b, 噪声点不可以一直为同一个模型投票。</h5><p>不能所有噪声点都投给一个模型，噪声本就是随机产生的，咋可能都投给一个模型，那根本没随机性，不能叫噪声了欸。</p><h5 id="c-只要足够多特征同意一个模型-缺失数据也并不重要-但也不能太多">c. 只要足够多特征同意一个模型，缺失数据也并不重要（但也不能太多）</h5><p>只要得分高，有遮挡也无所谓，反正其他大部分特征都选择它了。正因如此，霍夫变换也可以解决遮挡问题。但遮挡的也不能太多，如果几乎全遮挡，剩下零散几个点也没办法确定目标的模型。</p><h4 id="③-霍夫变换的原理">③ 霍夫变换的原理</h4><p><img src="/../images/post13_images/73a276a70d3af4ce88629ea963d06206.png" alt><br>于是可以绘制出图像空间和参数空间：<br><img src="/../images/post13_images/0aaeea182babc24186d567abe68bc9a8.png" alt><br>当情况逐渐复杂：<br><img src="/../images/post13_images/f6810b84cc3184fbee66a1003a7ccf0d.png" alt></p><h4 id="④-霍夫变换的流程">④ 霍夫变换的流程</h4><p><img src="/../images/post13_images/deb7336fceb50058fd2b811c683e9870.png" alt><br>如果图像空间有其他的直线，那么在参数空间就会出现其他的极大值，这个可以在下面的例子中看到</p><h4 id="⑤-霍夫变换的检测示例-数学模型上">⑤ 霍夫变换的检测示例（数学模型上）</h4><p>最简单的情况：<br><img src="/../images/post13_images/413ab608f19a4413d795686036913ca1.png" alt><br>稍微复杂的情况，多个点—多个拟合结果—多个局部极大值<br><img src="/../images/post13_images/d69554353046db95943f5d7c728dddd4.png" alt><br>多条线的情况，每条线一个局部最大值：<br><img src="/../images/post13_images/74fe3a9fd6abcbbb9455bab62e1927d2.png" alt></p><h4 id="⑥-传统霍夫变换的局限性">⑥ 传统霍夫变换的局限性</h4><p>对于垂直的线，没斜率，没法对应到参数空间：<br><img src="/../images/post13_images/ff5219d5c8e202fdd903a5155ee2d30a.png" alt><br>如果累加器设置的太小，那可能没包含我们涉及到的点；<br>如果累加器设置的太大，那就需要遍历所有斜率，对内存和计算能力要求太高</p><h4 id="⑦-改进：极坐标系下的霍夫变换">⑦ 改进：极坐标系下的霍夫变换</h4><h5 id="a-原理">a. 原理</h5><p>改用极坐标系，用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> 表示方向，用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ρ</span></span></span></span> 表示原点到直线的距离<br><img src="/../images/post13_images/db86958451d8208354668ba5c98d5f3f.png" alt><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> 的范围显而易见；<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ρ</span></span></span></span> 的范围是因为图像有边界，最大也就是图像对角线的距离<br><img src="/../images/post13_images/a73152d8655be88123d56f1b5e60c04a.png" alt><br>同样可以找到局部极大值</p><h5 id="b-步骤">b. 步骤</h5><p><img src="/../images/post13_images/03c09fc27da03cd8ef998193bb14cf33.png" alt></p><h5 id="c-优点">c. 优点</h5><p>如上图，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> 有范围，可以遍历表示垂直的直线</p><h5 id="d-进一步改进提升效率">d. 进一步改进提升效率</h5><p>上图橙色问题是想表明，<strong>对于每个角度都遍历，计算量有点大，咋办</strong><br>解决方案：<br>可以先用边缘检测，拿到最大梯度方向，而边缘方向和梯度方向是垂直关系，则可以在这个方向（角度）进行极坐标霍夫变换。同时，也可以根据这个角度来设置一个小的范围，更加严谨地进行遍历~<br><img src="/../images/post13_images/e41a2804bca67c301a8d0eae86cf1d4b.png" alt></p><h4 id="⑧-霍夫变换的实例效果-实际任务上">⑧ 霍夫变换的实例效果（实际任务上）</h4><p><img src="/../images/post13_images/8f2c5bfb1a134fcd703f2dcdcc9986d3.png" alt></p><h4 id="⑨-霍夫变换的影响因素与解决">⑨ 霍夫变换的影响因素与解决</h4><h5 id="a-自身-噪声的影响">a. （自身）噪声的影响</h5><h6 id="i-影响">i. 影响</h6><p>一个例子：<br><img src="/../images/post13_images/bb0610b62968e544667895a56112a01d.png" alt><br>噪声大小和投票数最大值的关系图（以20个点的图为例）：<br><img src="/../images/post13_images/e057758a1640889701a9e56c35be08b5.png" alt><br>可以看出噪声越大，票数峰值越小，对投票的影响越大<br>即<strong>噪声越大，霍夫变换性能越差</strong></p><h5 id="b-外部噪声-随机点的影响">b. （外部噪声）随机点的影响</h5><blockquote><p>随机点是外部随机生成的噪声点，和刚才那个自身的噪声不一样，这个是外部随机出现在图像中的随机点。<strong>一个是自身的，一个是外部的。</strong></p></blockquote><p>一个例子：<br><img src="/../images/post13_images/421b9dca92ab9934ff7aa706fc41e70b.png" alt><br>随着随机点噪声的增大，越有可能出现虚假峰值（伪峰值），也就是由这些随机噪声点投票出来了一个结果，而不是我们本来的数据。<br><img src="/../images/post13_images/630f60c8c6e351c3f5d841417a020aaf.png" alt><br>如上图所示，随机点越多，伪峰值越可能出现。</p><h5 id="c-解决">c. 解决</h5><ul><li>方法1：在对参数空间进行离散化时，选取一个合适大小的网格<br>不能太大，也不能太小<br><img src="/../images/post13_images/25330ae90951c7114fefc3d989d4d20e.png" alt></li><li>方法2：软投票——不采用“落在某个格子”来投票，而用“距离”来投票<br>相当于一票掰开好多份，给近的多些，给远的少些</li><li>方法3：尝试去掉不相关的特征，只选择具有明显梯度的边缘做霍夫变换</li></ul><h4 id="⑩-霍夫变换检测圆形">⑩ 霍夫变换检测圆形</h4><h5 id="a-原理">a. 原理</h5><p>圆的方程：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mi>u</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>y</mi><mo>−</mo><mi>v</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">(x-u)^2+(y-v)^2=r^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal">u</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span> 是圆心，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> 是半径<br>一个圆由三个参数确定：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo separator="true">,</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">u,v,r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span><br>依旧是从图像空间变换到参数空间<br>读懂下面的图，需要先进行以下理解：</p><ul><li>图像空间的一个圆，可以用三个参数表示：圆心坐标 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> 和半径 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> 。所以，<strong>图像中一个圆，可以用三维参数空间中一个点来表示</strong></li><li>一个点如果在图像中的某个圆上，那它和圆心所成的方向，是该点<strong>图像梯度的方向</strong></li><li>已知的某点图像梯度方向，经过图像中某一个点的所有可能的圆，可以在x,y,r三维空间中用<strong>两根直线</strong>表示。<br>（如果不考虑该点梯度方向，则笛卡尔坐标系中某一个点，其所有可能的圆，在参数空间中可以用一个<strong>立体圆锥曲面</strong>表示！）</li><li>对于图像中某个像素点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> ，当给定 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> 半径值后，仅有<strong>两个可能的圆心位置</strong>（这两个潜在可能的圆心位置相对这个像素点<strong>互为镜像位置</strong>），这两个圆心的位置可以通过x，y，r，以及图像梯度角度值计算出来。<br><img src="/../images/post13_images/15edeb7edb21b596af6c8898dba09c5d.png" alt></li></ul><h4 id="⑪-广义霍夫变换">⑪ 广义霍夫变换</h4><h5 id="a-动机">a. 动机</h5><blockquote><p>普通霍夫变换需要用方程描述要检测的形状，从而获得图像空间到参数空间的变换，但有些形状很难用方程参数化描述</p></blockquote><p>拟合无法用方程描述的形状</p><h5 id="b-原理">b. 原理</h5><p>我们的目的：找到一个能表示这个形状的参考点，最终模型可以表示这个参考点<br>例如下图的不规则形状，怎么做：</p><ul><li>先假设参考点是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mi>c</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>c</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_c,y_c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，这个参考点的具体坐标我们不知道，只是先设出来。</li><li>然后对于边缘上的所有点，每个点都要计算：<ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> ：点到参考点的距离</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>：点和参考点连线与水平方向的夹角</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ϕ</span></span></span></span> ：点的梯度方向（注意图中说的边缘方向实际上是想说边缘梯度方向）</li></ul></li><li>统计梯度方向的投票情况。如图中的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ϕ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\phi_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，可以看出多个点可能存在相同的梯度方向</li><li>取出投每个梯度方向，拿到各自所包含的点，进行投票。<br><img src="/../images/post13_images/63bcc2c1dbab49373a0e66292d3c64d3.png" alt></li></ul><h5 id="c-流程">c. 流程</h5><p><img src="/../images/post13_images/42703432f4e82ba1dc05262b96d64f01.png" alt></p><h5 id="d-改进">d. 改进</h5><p>存在问题：无法应对旋转<br><img src="/../images/post13_images/395080a9329ba46d7742fb126b9162ad.png" alt><br>改进方式：引入更多参数<br><img src="/../images/post13_images/0cf0d21bcc39a3395793fde56bd9cace.png" alt></p><h5 id="e-应用">e. 应用</h5><p>除了检测形状以外，还可以通过检测一些大物体的局部组件相对大物体的位置关系，通过方向投票机制，去锁定图像中某大物体的中心位置。<br><img src="/../images/post13_images/cb3a0a2d7a6ccf5cc239c6f5e984d869.png" alt></p><h4 id="⑫-霍夫变换的优缺点">⑫ 霍夫变换的优缺点</h4><h5 id="a-优点">a. 优点</h5><ul><li>可以处理非局部性的（全局的）和遮挡的情况</li><li>可以检测出多个模型的实例（就是拟合出多个符合要求的模型出来）</li><li>对噪声比较鲁棒（这是前提条件了，见第②部分）</li></ul><h5 id="b-缺点">b. 缺点</h5><ul><li>随着模型参数的增加，搜索空间变越来越大，搜索时间复杂度指数级增长</li><li>非形状目标可能会在参数空间中产生虚假峰值（伪峰值）</li><li>很难选择一个合适的网格大小（见⑨.c）</li></ul><h2 id="3-拟合方法的选择">3. 拟合方法的选择</h2><p><img src="/../images/post13_images/275a8a32d3475d58bf586ae9ebbfbd3c.png" alt></p><h1>六、局部特征</h1><h2 id="1-角点检测">1. 角点检测</h2><h3 id="1-为什么要提取特征">（1）为什么要提取特征</h3><h4 id="动机：全景拼接">动机：全景拼接</h4><blockquote><p>摄像机视角有限，因此需要转动在多视角进行拍摄，完成全景图像。</p></blockquote><h5 id="a-流程">a. 流程</h5><p>提取特征 --&gt; 进行特征匹配 --&gt; 根据匹配得到的联系，拼接图像</p><h5 id="b-良好特征的性质-提取哪些特征才更适配任务">b. 良好特征的性质（提取哪些特征才更适配任务）</h5><ul><li>可重复性：在几幅图像中可以找到的共同特征</li><li>显著性：显著区别于其他的特征</li><li>紧凑性和效率：希望特征能比图像像素少得多，从而计算是高效的</li><li>局部性：特征只跟其周围的图像有关系（在图像中占据相对较小的区域），对杂乱和遮挡具有鲁棒性</li></ul><h5 id="c-特征点的应用">c. 特征点的应用</h5><p>图像对齐、3D重建、运动跟踪、机器人导航、索引和数据库检索、物体识别…</p><h3 id="2-角点">（2）角点</h3><h4 id="①-角点的定义">① 角点的定义</h4><p>图像梯度在两个方向或更多方向上发生了突变的地方</p><h4 id="②-角点的性质">② 角点的性质</h4><p>角点具有可重复性、显著性、紧凑性（时间计算效率高）、局部性</p><h4 id="③-判断是否是角点">③ 判断是否是角点</h4><h5 id="a-直观描述">a. 直观描述</h5><p><img src="/../images/post13_images/1c78897a756fa731f684b9d86a6b3bfb.png" alt><br>如果是角点，窗口至少沿着两个方向移动会发生变化</p><h5 id="b-数值描述">b. 数值描述</h5><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>∑</mo><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub><mi>w</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><msup><mrow><mo fence="true">[</mo><mi>I</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>u</mi><mo separator="true">,</mo><mi>y</mi><mo>+</mo><mi>v</mi><mo stretchy="false">)</mo><mo>−</mo><mi>I</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E(u, v) = \sum_{x, y} w(x, y) \left[ I(x + u, y + v) - I(x, y) \right]^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3898em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0017em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">]</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p><p><img src="/../images/post13_images/33dd7bd924045b7c00cba30ed7a3cbc8.png" alt></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo separator="true">,</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">u,v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>：平移量</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">I(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>：没有移动前的图像强度</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>u</mi><mo separator="true">,</mo><mi>y</mi><mo>+</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">I(x+u,y+v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>：移动后的图像强度</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>：窗口移动前后像素值的差异；</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>：权值，可根据每个点对整个E(u,v)的贡献的差异特异化设置</li></ul><p><strong>i. 将E(u,v)进行二阶泰勒展开，以观测在很小的移动下E(u,v)的数值表现（E(u,v)和u,v的关系会更加直观）：</strong><br><img src="/../images/post13_images/ecf8e088532ae18f6981a67e69e0cc8c.png" alt><br><strong>ii. 计算上式中涉及到的偏导数：</strong><br><img src="/../images/post13_images/5da01acc050884586c8f4624a717c8d8.png" alt><br><strong>iii. 代入数值并整理得到最终二阶泰勒展开式化简结果：</strong><br><img src="/../images/post13_images/3c4995c84cb467ceaba233bb6328e721.png" alt><br><strong>iv. 理解M矩阵：</strong></p><ul><li>假设窗口检测到的信号是垂直关系的，则有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>x</mi></msub><msub><mi>I</mi><mi>y</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">I_x I_y = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，则M可以转化成下图特征值的形式：<br><img src="/../images/post13_images/b9aebc64e9a48e495c3a9bb7fdca000c.png" alt></li><li><ul><li>如果点位于垂直的边缘，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>x</mi></msub><mo mathvariant="normal">≠</mo><mn>0</mn><mtext>，</mtext><msub><mi>I</mi><mi>y</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">I_x≠0，I_y =0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord">0</span><span class="mord cjk_fallback">，</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ：<br>则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>λ</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mtext>，</mtext><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>λ</mi><mn>1</mn></msub><msup><mi>u</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">M = \begin{bmatrix}\lambda_1 &amp; 0 \\0 &amp; 0\end{bmatrix}，E(u,v)=λ_1u^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">，</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9641em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><br>则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span>变，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>变；<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>变，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>不变</li></ul></li><li><ul><li>如果点位于水平的边缘，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>x</mi></msub><mo>=</mo><mn>0</mn><mtext>，</mtext><msub><mi>I</mi><mi>y</mi></msub><mo mathvariant="normal">≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">I_x=0，I_y ≠0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord">0</span><span class="mord cjk_fallback">，</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ：<br>则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>&nbsp;</mtext><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>λ</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mtext>，</mtext><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>λ</mi><mn>2</mn></msub><msup><mi>v</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">M = \begin{bmatrix}\ 0&amp; 0 \\0 &amp; \lambda_2\end{bmatrix}，E(u,v)=λ_2v^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace">&nbsp;</span><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">，</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9641em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><br>则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span>变，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>不变；<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>变，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>变</li></ul></li></ul><p>所以，只有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">λ_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">λ_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 都不为0（或接近0）时，角点才存在</p><ul><li>假设窗口检测到的信号存在旋转，则M是一个实对称矩阵：<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mtext>，</mtext><mi>c</mi><mo mathvariant="normal">≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">M = \begin{bmatrix} a &amp; c \\c &amp; a\end{bmatrix}，c≠0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">，</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，<br>则可以进行对角化：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><msup><mi>R</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>λ</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>λ</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mi>R</mi><mo separator="true">,</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">M = R^{-1}\begin{bmatrix}\lambda_1 &amp; 0 \\0 &amp; \lambda_2\end{bmatrix}R, R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>是一个正交矩阵<br>同样等于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><msup><mi>R</mi><mi>T</mi></msup><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>λ</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>λ</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">M = R^{T}\begin{bmatrix}\lambda_1 &amp; 0 \\0 &amp; \lambda_2\end{bmatrix}R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span></li></ul><p>所以，无论是否存在旋转，都可以通过上述方法只分析 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">λ_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">λ_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ‘<br><strong>v. E(u,v)在数学上是椭圆</strong></p><ul><li>课程中，首先是针对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>x</mi></msub><mo mathvariant="normal">≠</mo><mn>0</mn><mtext>，</mtext><msub><mi>I</mi><mi>y</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">I_x≠0，I_y =0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord">0</span><span class="mord cjk_fallback">，</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 的情况，进行化简发现<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>满足椭圆方程，是一个正椭圆，而刚才第四部分对M的讨论的第二种情况，存在旋转，即一个旋转的椭圆。</li><li>在形式上，椭圆的轴长由 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">λ_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">λ_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>确定，方向由<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>确定</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">λ_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">λ_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 越大，轴越短 ； <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">λ_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">λ_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 越小，轴越长<br><img src="/../images/post13_images/1c7291a49768036eecda238a0681b3e2.png" alt></li></ul><p><strong>vi. 二阶矩矩阵M的可视化</strong><br><img src="/../images/post13_images/677a2434fa4e0a1504ed546c02b55c35.png" alt></p><p><strong>vii. 阶段总结</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">λ_1=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">λ_2=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ，点在边</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub><mo mathvariant="normal">≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">λ_1≠0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo mathvariant="normal">≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">λ_2≠0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 且都非常大，角点</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">λ_1=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">λ_2=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 或都非常小，平坦区域</li></ul><p><strong>viii. 阈值R</strong><br>Q：多大算非常大？这不方便人工设定<br><strong>A：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mi>det</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>M</mi><mo stretchy="false">)</mo><mo>−</mo><mi>α</mi><mtext> </mtext><mo stretchy="false">(</mo><mrow><mi mathvariant="normal">t</mi><mi mathvariant="normal">r</mi></mrow><mo stretchy="false">(</mo><mi>M</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><msub><mi>λ</mi><mn>1</mn></msub><msub><mi>λ</mi><mn>2</mn></msub><mo>−</mo><mi>α</mi><mo stretchy="false">(</mo><msub><mi>λ</mi><mn>1</mn></msub><mo>+</mo><msub><mi>λ</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">R = \det(M) - \alpha \, (\mathrm{tr}(M))^2 = \lambda_1 \lambda_2 - \alpha (\lambda_1 + \lambda_2)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">det</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathrm">tr</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></strong><br><strong>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>r</mi><mo stretchy="false">(</mo><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">tr(M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span> 是矩阵的迹，是主对角线元素之和</strong><br><strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">R&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，则是角点</strong><br><strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">R&lt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，则是边缘</strong><br><strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">R→0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，则是平坦区域</strong></p><h5 id="c-harris角点检测">c. Harris角点检测</h5><p>Harris角点检测就是上面的数值描述方法，总结一下：</p><ul><li>先在每个像素处计算高斯导数，也就是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">I_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>y</mi></msub></mrow><annotation encoding="application/x-tex">I_y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>，相关计算见b.ii</li><li>然后计算每个像素周围高斯窗口的二阶矩矩阵M，相关计算见b.iii</li><li>然后计算角点响应函数R，相关计算见b.viii</li><li>将R作为阈值来判断是否是角点，相关判断见b.viii</li><li>最后进行非极大值抑制，找到响应函数的局部最大值</li></ul><p>最后一步的是因为：某一个点是角点（响应较高）时，周围的点可能也是如此。找到最高的即可。</p><h3 id="3-harris角点的特性">（3）Harris角点的特性</h3><h4 id="①-好的特征具备的四个特性">① 好的特征具备的四个特性</h4><p>可重复性、显著性、计算高效（紧凑性）、局部性</p><h4 id="②-invariance-和-covariance-的区别">② Invariance 和 Covariance 的区别</h4><ul><li>Invariance：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo><mo>=</mo><mi>F</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F(I)=F[T(I)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mclose">)]</span></span></span></span><br>即图像变化前后，用同一个特征提取器<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>提取到的特征是相同的</li><li>Covariance：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo><mo mathvariant="normal">≠</mo><mi>F</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F(I)≠F[T(I)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mclose">)]</span></span></span></span>，但<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">[</mo><mi>F</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>=</mo><mi>F</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">T'[F(I)]=F[T(I)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mclose">)]</span></span></span></span><br>即对原始图像提取的特征做变换后，与变换后的图像提取到的特征是相同的</li></ul><p><strong>所以，好的特征应当具备Invariance特性，实在不行，Covariance特性也可以</strong></p><h4 id="③-探究harris角点是否具有invariance-covariance特性">③ 探究Harris角点是否具有Invariance/Covariance特性</h4><h5 id="a-对图像强度进行变化">a. 对图像强度进行变化</h5><p>加光照，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo>→</mo><mi>I</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">I → I+b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span>，并不改变梯度变化，对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>矩阵无影响，因此还能检测到角点，<strong>满足Invariance</strong></p><h5 id="b-对图像进行尺度变化-缩放">b, 对图像进行尺度变化（缩放）</h5><p>缩放，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo>→</mo><mi>α</mi><mi>I</mi></mrow><annotation encoding="application/x-tex">I → αI</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span>，可能将原本低于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>阈值的响应点也检测为角点，<strong>不满足Invariance和Covariance</strong>，如图：<br><img src="/../images/post13_images/eb06cee6da5ca4d10c58723d04aef8b8.png" alt></p><h5 id="c-对图像进行平移或旋转">c, 对图像进行平移或旋转</h5><p>平移或旋转不改变梯度，还是能够检测到角点，但平移或旋转前后提取到的特征不相同，<strong>不满足Invariance</strong>；但把平移后得到的特征再变化，就相同了，<strong>满足Covariance</strong></p><h5 id="d-结论">d. 结论</h5><p>Harris角点检测对于仿射变换具有<strong>部分</strong>的不变性<br>Harris角点检测不具备尺度不变性<br>如果相机和场景距离固定（图像尺度不变），Harris角点检测可行，反之不可行</p><hr><h2 id="2-blob检测">2. Blob检测</h2><blockquote><p>Blob检测具有尺度不变性，而Harris角点检测不具备尺度不变性</p></blockquote><h3 id="1-blob-斑点">（1）Blob（斑点）</h3><h4 id="①-定义：">① 定义：</h4><p>二维图像跟周围有着明显颜色和灰度变化的区域</p><blockquote><p>斑点可以是一个区域，但角点只是一个点，因此斑点具有<strong>更好的稳定性和抗干扰能力</strong></p></blockquote><h4 id="②-斑点的尺度寻找">② 斑点的尺度寻找</h4><p>找到一个函数，从而自适应尺度的变化，因此有尺度不变性<br><img src="/../images/post13_images/fc7f5fed3f567897168db5d6d8af4d16.png" alt></p><blockquote><p>回顾边缘检测</p></blockquote><h5 id="a-高斯一阶偏导核">a. 高斯一阶偏导核</h5><p><img src="/../images/post13_images/938235066e8c47e45724d511464633f8.png" alt></p><h5 id="b-高斯二阶偏导核-拉普拉斯核">b. 高斯二阶偏导核（拉普拉斯核）</h5><p><img src="/../images/post13_images/0bd611aa56f53df69370dd3910ac4250.png" alt></p><h5 id="c-通过拉普拉斯核找到最优尺度">c. 通过拉普拉斯核找到最优尺度</h5><p><img src="/../images/post13_images/eec9eeba1a6ee1b9012d8174825b23a0.png" alt><br>在实际应用中，由于不知道信号长什么样，会设置多个不同方差的拉普拉斯核去卷积，从而才能选择到最好的。</p><h5 id="d-拉普拉斯核方差的选择">d. 拉普拉斯核方差的选择</h5><p><strong>问题</strong>：随着方差<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>逐渐变大，信号会逐渐衰减，很难找到极值点<br><strong>原因</strong>：<br><img src="/../images/post13_images/486dcbdb3deaa9e7eaff10174a447aaa.png" alt></p><ul><li>数学理解：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>越大，图中面积越小，产生出的信号相应越小。（图中仅是高斯一阶偏导核，而二阶会受到更强烈的影响）</li><li>物理理解：高斯核去噪，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>越大，去噪效果越强，把高频信号都去掉了，原本响应值突出的区域也都因此变得平坦了</li></ul><p><strong>解决</strong>：需要对信号进行补偿，给拉普拉斯核乘上一个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">σ^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi mathvariant="normal">∇</mi><mtext>norm</mtext><mn>2</mn></msubsup><mi>g</mi><mo>=</mo><msup><mi>σ</mi><mn>2</mn></msup><mrow><mo fence="true">(</mo><mfrac><mrow><msup><mi mathvariant="normal">∂</mi><mn>2</mn></msup><mi>g</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msup><mi>x</mi><mn>2</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><msup><mi mathvariant="normal">∂</mi><mn>2</mn></msup><mi>g</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\nabla^2_{\text{norm}} g = \sigma^2 \left( \frac{\partial^2 g}{\partial x^2} + \frac{\partial^2 g}{\partial y^2} \right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0611em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">norm</span></span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.8em;vertical-align:-0.65em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.07em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.07em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span></span></span></span><br>从而把分母上的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">σ^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>约掉，效果如图，可以找到我们想要的函数曲线了：<br><img src="/../images/post13_images/9337869d8a3f92af9b40847f83b40a24.png" alt><br>横轴是方差变化，也就是尺度变化；纵轴是响应值变化</p><h5 id="e-拉普拉斯核方差和信号半径的关系">e. 拉普拉斯核方差和信号半径的关系</h5><p>当拉普拉斯核的过零点的宽度和信号的直径恰好相等时，响应值最大<br><img src="/../images/post13_images/329ea11f49265c8469c8a094fc9e00a7.png" alt><br><strong>此时也存在关系：</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><msqrt><mn>2</mn></msqrt><mi>σ</mi></mrow><annotation encoding="application/x-tex">r=\sqrt{2}σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1328em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span><br>这个的计算方式就是让拉普拉斯核等于0（过零点），结合本身斑点存在的关系 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x^2+y^2=r^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>（圆），化简得到了。</p><blockquote><p>大方差，大窗宽，检测大信号；小方差，小窗宽，检测小信号</p></blockquote><h5 id="f-斑点检测的非极大值抑制">f, 斑点检测的非极大值抑制</h5><p>由于检测时，相邻区域的点可能响应值都很大，因此步骤：</p><ul><li>取下图三个尺度的27个点的响应值</li><li>对最大响应值对应的点，作为圆心，根据对应尺度和计算出的半径画圆<br><img src="/../images/post13_images/73e6d157f96ba59af5c36f60a2188afc.png" alt><br>（此图假设检测模板是3×3的，同时在实际检测中一般仅比较相邻三个的尺度如图所示）</li></ul><h4 id="③-斑点检测计算量大的解决办法">③ 斑点检测计算量大的解决办法</h4><h5 id="a-和harris角点检测相结合">a. 和Harris角点检测相结合</h5><ul><li>先用Harris角点检测，把角点检测出来</li><li>在每个角点周围，建立一个尺度空间，看周围有没有合适尺度（斑点检测画圆）</li></ul><h5 id="b-sift特征">b. SIFT特征</h5><p>见下</p><h3 id="2-sift">（2）SIFT</h3><h4 id="①-高斯差分">① 高斯差分</h4><h5 id="a-定义">a. 定义</h5><p>两个高斯核做差<br><img src="/../images/post13_images/75d109bce06eef976fbe69fcdb8d9002.png" alt></p><h5 id="b-优势-效率提升方式">b. 优势——效率提升方式</h5><ul><li>高斯差分和拉普拉斯之间就差了一个常数：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，则：高斯函数→高斯差分→拉普拉斯<br><img src="/../images/post13_images/0b436b76b01c215960b476753271bf50.png" alt><br>（图中这样一组空间成为一个Octave——八度）</li><li>在构建高斯空间时，可以利用”过两个小的等于过一个大的，关系是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mn>2</mn></msqrt></mrow><annotation encoding="application/x-tex">\sqrt2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1328em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">2</span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span></span></span></span></span></span></span></span></span> 的性质，来得到其他尺度的高斯层    【<strong>Octave组内加速</strong>】</li><li>如果不想用大方差的拉普拉斯核和大信号做卷积，可以通过：<br>先把图像进行缩放，用小方差的卷积核与缩放后的图像做卷积，找到的尺度空间再乘回缩放倍数<br>这样可以避免一直增大卷积核的方差不断做卷积构成新的Octave，直接用原来的小方差卷积核就可以构建新的Octave了<br>所以在实际应用中，对于1-8的尺度，可以：尺度为1-2时，用原图计算；2-4时，用1/2原图计算；4-8时，用1/4原图计算。拼起来就可以得到连续的尺度空间。<br>【<strong>Octave组间加速</strong>】</li></ul><h5 id="c-如何设置k的数值">c. 如何设置k的数值</h5><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><msup><mn>2</mn><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>S</mi></mrow></msup></mrow><annotation encoding="application/x-tex">k=2^{1/S}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1/</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span></span></span></span></span></span></span></span>，因为只有满足这个关系才能构建连续的尺度空间<br>S是怎么来的：</p><ul><li>对于5层高斯空间，有4层高斯差分空间，则有4层拉普拉斯空间，我们在前面说过，一般仅比较相邻三个的尺度，则有两种可能，S=2（123、234两种可能）</li><li>对于6层高斯空间，同理，则有三种可能，S=3（123、234、345三种可能）</li></ul><h4 id="②-sift特征的特性">② SIFT特征的特性</h4><h5 id="a-拉普拉斯相应的invariance">a. 拉普拉斯相应的Invariance</h5><p>当图像进行旋转或缩放时，拉普拉斯算子计算出的响应值不会改变。</p><h5 id="b-斑点位置和尺度的covariance">b. 斑点位置和尺度的Covariance</h5><p>当图像进行旋转或缩放时，检测到的“blob”的位置和尺度会相应地变化。</p><h5 id="c-对于强度-角度-形状变化不满足invariance和covariance">c. 对于强度、角度、形状变化不满足Invariance和Covariance</h5><p>角度和形变的解决方案：经过大小归一化变成椭圆，再利用梯度方向直方图按梯度最强方向进行旋转（梯度方向直方图见下）<br>强度（光照）变化的解决方案：SIFT描述子投票（SIFT描述子见下）</p><blockquote><p>大小归一化：计算出M矩阵，微调<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">λ_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">λ_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，把小的变大一点，迭代微调，直到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">λ_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">λ_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>相等，相当于接近于原始的正圆了<br>【不确定理解的是否正确，老师在这里的讲解逻辑很混乱，讲的不太好这里】</p></blockquote><h4 id="③-梯度方向直方图">③ 梯度方向直方图</h4><p>梯度强度：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><msubsup><mi>I</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>I</mi><mi>y</mi><mn>2</mn></msubsup></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{I_x^2+I_y^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.84em;vertical-align:-0.6765em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1635em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.1235em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.88em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.88em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"><path d="M983 90l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6765em;"><span></span></span></span></span></span></span></span></span><br>梯度方向：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><msqrt><mrow><msubsup><mi>I</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>I</mi><mi>y</mi><mn>2</mn></msubsup></mrow></msqrt></mrow><annotation encoding="application/x-tex">arctan\sqrt{I_x^2+I_y^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.84em;vertical-align:-0.6765em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">rc</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1635em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.1235em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.88em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.88em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"><path d="M983 90l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6765em;"><span></span></span></span></span></span></span></span></span><br>箭头方向表示梯度方向，箭头长度表示梯度强度<br><img src="/../images/post13_images/98c8ee16179daff71acc3a4ec9e687f7.png" alt></p><h4 id="④-sift描述子">④ SIFT描述子</h4><p>将小区域进行划分<br>1个区域划分为16个小区域，每个小区域存在8个方向，因此共有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn><mo>×</mo><mn>8</mn><mo>=</mo><mn>128</mn></mrow><annotation encoding="application/x-tex">16×8=128</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">16</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">128</span></span></span></span>维特征<br><img src="/../images/post13_images/1e3de9e6d21c4a68890e99e59827525f.png" alt></p><h2 id="3-纹理特征">3. 纹理特征</h2><h3 id="1-纹理-texture">（1）纹理（Texture）</h3><h4 id="①-定义">① 定义</h4><p>某种基元以某种方式组合起来</p><h4 id="②-分类">② 分类</h4><ul><li>规则的纹理</li><li>不规则的纹理</li></ul><h4 id="③-用途">③ 用途</h4><ul><li>从纹理中恢复形状信息</li><li>应用于分割、分类任务【课程主要关注】<br>（可以帮助我们区分事物、划分类别等）</li><li>应用于合成任务</li></ul><h4 id="④-纹理的重要性">④ 纹理的重要性</h4><ul><li>通常表示了材料的特性</li><li>可能是重要的外观线索，特别是在物体形状相似的情况下</li><li>旨在区分形状、边界和纹理</li></ul><h3 id="2-纹理特征的提取">（2）纹理特征的提取</h3><h4 id="①-发现模式-pattern">① 发现模式（Pattern）</h4><blockquote><p>模式就是某种规则、规律</p></blockquote><p>利用斑点检测器、角点检测器、边缘检测器…检测出基础的元素</p><h4 id="②-描述纹理">② 描述纹理</h4><p>利用统计的方法：平均值、标准差、直方图…</p><h4 id="③-示例">③ 示例</h4><p><img src="/../images/post13_images/336e64283bcade1b026fb889cef74fe9.png" alt><br><img src="/../images/post13_images/1167a7522edd8b3b177b08f0ed086765.png" alt><br>其中，<br><img src="/../images/post13_images/8be32f58e506354de3cfc05fae430315.png" alt><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><msqrt><mrow><mo stretchy="false">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo>−</mo><msub><mi>b</mi><mn>1</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mn>2</mn></msub><mo>−</mo><msub><mi>b</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mn>3</mn></msub><mo>−</mo><msub><mi>b</mi><mn>3</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt><mo>=</mo><msqrt><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>3</mn></msubsup><mo stretchy="false">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo>−</mo><msub><mi>b</mi><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">D(a,b)=\sqrt{(a_1-b_1)^2+(a_2-b_2)^2+(a_3-b_3)^2} = \sqrt{\sum_{i=1}^{3} (a_i - b_i)^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.305em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.935em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.895em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewbox="0 0 400000 1296" preserveaspectratio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.305em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.84em;vertical-align:-0.5279em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3121em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.2721em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.88em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.88em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"><path d="M983 90l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5279em;"><span></span></span></span></span></span></span></span></span></p><h4 id="④-filter-banks-滤波器组-卷积核组">④ Filter banks（滤波器组/卷积核组）</h4><h5 id="a-背景">a. 背景</h5><p>在③示例中，使用了两个滤波器分别在x和y两个方向上做卷积，产生了二维特征向量，用于描述窗口中的纹理特征。</p><h5 id="b-引入">b. 引入</h5><p>推广，应用一组d个滤波器，产生d维特征向量</p><h5 id="c-形式">c. 形式</h5><p>如图所示48维的滤波器组<br><img src="/../images/post13_images/722d46bd0c22b46e2b1bebeeb7397062.png" alt><br>每个窗口纹理被映射为48维空间的一个点，是一个48维的特征向量，这个点具有48维的特征</p><h5 id="d-多维高斯-multivariate-gaussian">d. 多维高斯（Multivariate Gaussian）</h5><p>展现了协方差矩阵和高斯核之间的关系：<br><img src="/../images/post13_images/51d72ea41f04ff2ac2093e35fd9b69ab.png" alt><br>在 Filter banks中的48个滤波器就是通过如上编程定义（不同方向）</p><h5 id="e-filter-bank-应用示例">e. Filter bank 应用示例</h5><p>应用一个38维的Filter bank做卷积：<br><img src="/../images/post13_images/ba335962a9b95ff650748d0554f7a385.png" alt><br>一个匹配quiz：<br><img src="/../images/post13_images/1e7cfa90899fd73dbc22ab9996be4d0a.png" alt></p><h5 id="f-fliter-bank-卷积结果的应用">f. Fliter bank 卷积结果的应用</h5><h6 id="i-对整个图像卷积">i. 对整个图像卷积</h6><p>一张图像，x维Filter bank卷积，得到x个卷积响应，对这x个卷积响应计算平均，得到了一个图像的x维特征向量，表示了图像</p><h6 id="ii-对每个像素点卷积">ii. 对每个像素点卷积</h6><p>对一张图像的所有像素点，x维Filter bank卷积，每个像素得到x个卷积响应</p><h3 id="3-纹理检测在视觉任务中的应用">（3）纹理检测在视觉任务中的应用</h3><ul><li>通过Filter bank检索相似纹理 / 通过相似纹理的检索进一步进行图像分类任务</li><li>通过纹理来区分场景（其实也是分类任务）</li><li>通过纹理来进行图像分割，通过纹理让图像中的各部分进行了分类，从而分开了</li></ul><h1>七、分割</h1><h2 id="1-图像分割的基本概念">1. 图像分割的基本概念</h2><h3 id="1-定义">（1）定义</h3><p>将图像划分为多个互不相交的区域</p><h3 id="2-目标">（2）目标</h3><p>根据像素的<strong>相似性</strong>，把具有相似特征的像素组织在一起，识别和分理处不同的对象或区域</p><h3 id="3-超像素">（3）超像素</h3><p>一个超像素=多个像素形成的小块，例如下图<br><img src="/../images/post13_images/419ac13de61f1c578f43b075854252f9.png" alt></p><h3 id="4-理想的分割方法">（4）理想的分割方法</h3><p>既不是过分割，也不是欠分割</p><ul><li>过分割：把一个主体过度分割成多个主体了<br>（超像素属于一种过分割）</li><li>欠分割：没有完全分开，把多个主体划分成一个主体了</li></ul><h3 id="5-分割方式">（5）分割方式</h3><h4 id="①-自下而上-自上而下">① 自下而上、自上而下</h4><h5 id="a-自下而上的分割方法">a. 自下而上的分割方法</h5><ul><li>自下：先获取像素的底层特征，例如纹理、边、点</li><li>而上：再分割出主体</li></ul><h5 id="b-自上而下的分割方法">b. 自上而下的分割方法</h5><ul><li>自上：先获取一定的图像语义等高层特征</li><li>而下：再分割出主体<br>人思考的方式其实就是自上而下</li></ul><h4 id="②-有监督-无监督">② 有监督、无监督</h4><ul><li>有监督：给标签，从label中学习</li><li>无监督，没标签，自己寻找规律<br>人思考的方式其实是有监督+无监督结合的<br>常用深度学习模型基于有监督</li></ul><h2 id="2-人类做图像分割的原理">2. 人类做图像分割的原理</h2><blockquote><p>格式塔学派理论</p></blockquote><p><strong>群组是视觉感知的关键</strong></p><h3 id="1-感知整体空间">（1）感知整体空间</h3><p>人的视觉系统将元素综合为一个新的领域，相较于部件/元素，更感知整体<br><img src="/../images/post13_images/f8449f17deb8c98418f01a1307012ce2.png" alt></p><h3 id="2-利用先验知识做判断-自上而下">（2）利用先验知识做判断（自上而下）</h3><p>例如下图，人类可能会根据经验，感觉到图像中的事物，比如中间有相交的道路<br><img src="/../images/post13_images/2652c8b5b05e6d40f72140b53082157d.png" alt></p><h3 id="3-格式塔的组织原则">（3）格式塔的组织原则</h3><p><img src="/../images/post13_images/c039eae9f50ebe739cddb2575a8489a9.png" alt><br><img src="/../images/post13_images/a29d58d21dd9b9af1f14265133d778df.png" alt></p><h2 id="3-k-means-图像分割">3. K-Means 图像分割</h2><blockquote><p>格式塔学派理论“群组”的思想，恰好对应机器学习的“聚类”任务</p></blockquote><h3 id="1-算法流程">（1）算法流程</h3><p><img src="/../images/post13_images/e135158a5bae51c312c717975ba78334.png" alt></p><h3 id="2-应用实例及问题">（2）应用实例及问题</h3><p><img src="/../images/post13_images/fa6f8069233e6a331df33af8edb39228.png" alt></p><h3 id="3-影响因素">（3）影响因素</h3><p>初始化聚类中心点的位置（位置不同，算法计算量不同，可能结果也不同）<br>聚类数量K的选取（图中K越大，效果越好，但在具体任务上也有可能出现别的问题，例如过分割~）<br><img src="/../images/post13_images/89ad3df7f68a58c8dcc1798d22785070.png" alt></p><h3 id="4-优缺点">（4）优缺点</h3><p>优点</p><ul><li>非常简单</li><li>可以收敛到局部最优值<br>缺点</li><li>内存需求较大</li><li>需要指定K的值，K值的选取影响结果</li><li>对初始化随机中心点位置十分敏感</li><li>对外点敏感<br><img src="/../images/post13_images/8a283ac112a21bb35c35ef565a94895f.png" alt></li><li>最终只能生成球形的聚类簇（因此在用K-Means时，需要看最终的任务形成的簇大概会是什么形状，K-Means 比较适合最终划分为球形簇的任务）</li></ul><h2 id="4-mean-shift-均值漂移-图像分割">4. Mean Shift （均值漂移） 图像分割</h2><h3 id="1-算法流程">（1）算法流程</h3><p><strong>原理：在特征空间中寻找密度模式，或密度的局部最大值</strong><br>一步一步找到密度极大值点：<br><img src="/../images/post13_images/9fe8a240751bbed6d472dcfa5dbabaff.png" alt></p><ul><li>查找特征（颜色、纹理等）</li><li>在单个特征点初初始化漂移的窗口</li><li>对每个窗口执行均值漂移，直到收敛</li><li>合并最终接近相同峰值或模式的窗口<br><img src="/../images/post13_images/63c85019d3b12fe92327c3dd2ca4d516.png" alt></li></ul><h3 id="2-优缺点">（2）优缺点</h3><h4 id="a-优点">a. 优点</h4><ul><li>不需要假设聚类簇的一个球形的（不像K-Means那样），对任何形状都可以聚类</li><li>只需要设定一个参数——飘逸的窗口大小</li><li>不需要预先设定类别数量（K-Means里的K值），飘逸后找到几个点就代表几个类</li><li>对外点比较鲁棒</li></ul><h4 id="b-缺点">b. 缺点</h4><ul><li>最终输出的结果特别依赖于飘逸窗口大小的设置</li><li>计算成本高</li><li>如果特征维度太高，表现不太好了</li></ul><h4 id="c-计算成本高的解决方案">c. 计算成本高的解决方案</h4><ul><li>对超像素进行Mean Shift，因为超像素本身已经是比较相似的像素的集合，对超像素进行均值漂移就不需要遍历图像中每一个像素了</li><li>记录每个漂移框漂移过程中涉及到的所有重心点，当其他框也飘到这个过程中的重心点时，则说明也是那个类（终点是一致的）</li></ul><h2 id="5-graph-cut-图割-图像分割">5. Graph Cut（图割）图像分割</h2><h3 id="1-广义框架">（1）广义框架</h3><blockquote><p>移除一组边使图分裂为互不连通的子图</p></blockquote><h4 id="①-准备阶段">① 准备阶段</h4><p>把图像表示成图结构：</p><ul><li>节点：每个像素对应一个节点</li><li>边：相邻像素/满足空间邻近条件的像素对，通过边连接</li><li>边权重：像素对的相似性越高，权重越大<br><img src="/../images/post13_images/381359bef2751571e52e60b9336823c2.png" alt><br>权重涉及到的相似度计算：</li></ul><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>exp</mi><mo>⁡</mo><mrow><mo fence="true">(</mo><mo>−</mo><mfrac><mn>1</mn><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac><mtext>dist</mtext><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>j</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\exp \left( -\frac{1}{2\sigma^2} \text{dist}(x_i, x_j)^2 \right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord text"><span class="mord">dist</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></p><p>像素表示为特征向量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，通过上面的公式，将特征向量间的距离映射为相似度（0到1之间）<br>其中：</p><ul><li>距离可以用各种距离，例如欧氏距离，L2距离等</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span> 控制相似性衰减速率，是一个尺度参数。<ul><li>小 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>：仅聚集邻近像素，生成细粒度分割（如纹理细节）</li><li>大 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">σ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>：允许远距离像素归为同组，生成粗粒度分割（如整体轮廓）</li></ul></li></ul><h4 id="②-割图阶段">② 割图阶段</h4><p>断开图中的低权重边，将图划分为若干子图<br><img src="/../images/post13_images/a60185548c48a3f627df9b48653e2e2f.png" alt></p><h3 id="2-minimum-cut-最小割">（2）Minimum Cut（最小割）</h3><h4 id="①-目标">① 目标</h4><p>割成本：被移除边的权重之和<br>因此最小割想要：找到使割成本最小的分割方式<br><img src="/../images/post13_images/e94ba81e2c91f92fcc196b996e3c29c2.png" alt></p><h4 id="②-局限性">② 局限性</h4><p>易切割出孤立小区域（如噪声点），导致过分割<br><img src="/../images/post13_images/b6c959a15f0dcfbccb780589bca6334c.png" alt></p><h3 id="3-normalized-cut-归一化割">（3） Normalized Cut（归一化割）</h3><blockquote><p>最小割倾向于割出很多小区域，这可以根据与每个区域相连所有边的总权重，通过引入归一化因子，平衡分割区域规模</p></blockquote><h4 id="①-原理">① 原理</h4><h5 id="a-归一化割的成本">a. 归一化割的成本</h5><p>归一化割成本公式：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Normalized&nbsp;Cut&nbsp;Cost</mtext><mo>=</mo><mfrac><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo></mrow></mfrac><mo>+</mo><mfrac><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{Normalized Cut Cost} = \frac{w(A, B)}{w(A, V)} + \frac{w(A, B)}{w(B, V)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">Normalized&nbsp;Cut&nbsp;Cost</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>其中：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(A,B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span>：子图A与B间边权重和</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(A,V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span>：子图A与全图V的边权重和</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(B,V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span>：子图B与全图V的边权重和</li></ul><p>矩阵表示：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Normalized&nbsp;Cut&nbsp;Cost</mtext><mo>=</mo><mfrac><mrow><msup><mi>y</mi><mi>T</mi></msup><mo stretchy="false">(</mo><mi>D</mi><mo>−</mo><mi>W</mi><mo stretchy="false">)</mo><mi>y</mi></mrow><mrow><msup><mi>y</mi><mi>T</mi></msup><mi>D</mi><mi>y</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{Normalized Cut Cost} ={\frac{y^T (D - W) y}{y^T D y}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">Normalized&nbsp;Cut&nbsp;Cost</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3988em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7673em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">Dy</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p><p>其中：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>：图的邻接矩阵，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n×n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，元素 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">W(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span> 表示节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> 之间边的权重</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span>：一个对角矩阵，只有对角线上有值，且为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>∑</mo><mi>j</mi></msub><mi>W</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D(i,i) = \sum_{j} {W}(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1858em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>−</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">D−W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>：称为拉普拉斯矩阵，它反映了节点间的差异程度</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>：指示向量，用于标记每个节点所属的子集。如果第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个节点属于子集 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">y_i=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，否则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 为一个负常数，通常设为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>y</mi><mi>T</mi></msup><mo stretchy="false">(</mo><mi>D</mi><mo>−</mo><mi>W</mi><mo stretchy="false">)</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">y^T(D−W)y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>：表示割的代价，即两个子集 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> 之间的边权总和</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>y</mi><mi>T</mi></msup><mi>D</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">y^TDy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">Dy</span></span></span></span>：表示区域 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 的总关联度，用于归一化分子部分，避免分割出孤立点或极小区域‘</li></ul><h5 id="b-归一化割的数学松弛解法">b. 归一化割的数学松弛解法</h5><h6 id="i-原理">i. 原理</h6><p>直接求解归一化割成本的最优解（最小值）在计算上不可行（指数复杂度）<br>但可以通过放宽离散约束（允许指示向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 取任意值），将问题转化为可解的广义特征值问题：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>D</mi><mo>−</mo><mi>W</mi><mo stretchy="false">)</mo><mi>y</mi><mo>=</mo><mi>λ</mi><mi>D</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">(D-W)y=\lambda Dy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">λ</span><span class="mord mathnormal" style="margin-right:0.03588em;">Dy</span></span></span></span></span></p><p>解这个问题可以解出许多解：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>λ</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\lambda,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">λ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span><br>我们的最终目标：拿到第二小特征值(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span></span></span></span>) 所对应的解的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 值<br>（第一小特征值是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">λ=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，对应特征向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mn>1</mn><msup><mo stretchy="false">]</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">y=[1,1,...,1]^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span>，所有像素归为同一类，无意义）<br>这个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 的值表示了像素的分组倾向，可以根据 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 值分布，使用0或中位数来进行分类（割一刀）（属于哪个子集）</p><blockquote><p>可以这样理解：平常 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>可能只能取 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>，但我们可以放宽要求，让 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 取任意的正负值，这样就不是绝对二分类，而是类似于对于某个子集的置信度得分（更加可能属于哪个子图）</p></blockquote><h6 id="ii-算法流程">ii. 算法流程</h6><ul><li>构建图：将图像表示为带权的图 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>V</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G=(V,E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span> （节点可能是像素或者超像素），并计算每条边的权重，得到边权重矩阵 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> 和 对角矩阵 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span></li><li>特征求解：计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>D</mi><mo>−</mo><mi>W</mi><mo stretchy="false">)</mo><mi>y</mi><mo>=</mo><mi>λ</mi><mi>D</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">(D-W)y=\lambda Dy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">λ</span><span class="mord mathnormal" style="margin-right:0.03588em;">Dy</span></span></span></span> 的第二小特征向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></li><li>割：根据特征向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 元素值的分布进行阈值分割</li></ul><h6 id="iii-扩展到多类割">iii. 扩展到多类割</h6><p>现在的割是一图割两半<br>也可以扩展到一图一次多割<br>方法有：</p><ul><li>递归二分：逐层细分（可能引入误差累积）</li><li>K-Means聚类：联合多个特征向量（前k个）进行聚类</li></ul><h5 id="c-效果">c. 效果</h5><p><img src="/../images/post13_images/77232bdc9a4e330efc5df8c7b178fd1d.png" alt><br>效果不错捏</p><h5 id="d-利用纹理特征进行分割">d. 利用纹理特征进行分割</h5><blockquote><p>如何分割那些是“纹理马赛克”的图像（反正就是因为纹理的问题搞得有点难分割的图像）</p></blockquote><p>步骤：</p><ul><li>用一组滤波器组（Filter Bank）对图像进行卷积，提取不同方向和尺度下的纹理特征响应</li><li>对所有得到的纹理特征响应，使用聚类算法对特征进行分组，每个聚类中心对应一种纹理的基元</li><li>统计窗口内所有像素的纹理基元类别分布，生成基元直方图，直方图的每个bin对应一种基元出现的频率</li><li>基元直方图将用于归一化割之中，例如可通过基元直方图来构建 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> 矩阵等</li></ul><p>不过还可能有一种特殊情况：相似纹理跨不同物体（如鹰的羽毛与背景纹理混淆）<br>解决策略：介入轮廓检测。在计算像素间亲和度时，沿连接路径检查是否存在显著边缘（如Canny边缘）</p><h5 id="e-归一化割的优缺点">e. 归一化割的优缺点</h5><p>优点：是一个通用的框架，算法流程清晰、固定，可以结合很多其他特征和相似度计算工作<br>缺点：图像存储要求高（不过可以用超像素缓解）、时间复杂度高、倾向于把一个图分为两个部分（如果想得到多个可能需要再多次执行归一化割算法）</p><h2 id="6-基于深度学习的弱监督图像分割">6. 基于深度学习的弱监督图像分割</h2><p>有如下几种标住手段，从而不用一点一点描边缘：<br><img src="/../images/post13_images/c1d8aae1b9aa22b9117b9fd0757bde2f.png" alt></p><h1>八、识别</h1><h2 id="1-图像识别基本概念">1. 图像识别基本概念</h2><h3 id="1-涉及到的任务">（1）涉及到的任务</h3><ul><li>分类：二分类、多分类</li><li>检测：包含两个部分：定位+分类（先得到位置信息，再判断是啥东西）</li><li>分割；语义分割（例如，结合了语义描述，某个类别是人，另一个类别是狗。。）、实例分割（人和人不一样，小美小帅）</li><li>类别识别和单实例识别</li><li>行为或事件识别</li></ul><blockquote><p>理解单实例：就比如拍了个华电西门，虽然都是门，但是花店西门跟别人家学校的门不一样，它就是门的一个单独的实例，具体它自己独立的含义~</p></blockquote><h3 id="2-图像识别算法应当解决的问题">（2）图像识别算法应当解决的问题</h3><ul><li>对图像或视频进行分类（视频可以切成帧来做分类任务）</li><li>对物体进行检测和定位</li><li>评估语义和几何特征</li><li>分析人类的行为和事件</li></ul><h3 id="3-图像识别的难点">（3）图像识别的难点</h3><ul><li>种类问题——世界上那么多种类的事物，怎么才能学习到这么多种</li><li>视角问题——从不同的视角得到的同一个图像，怎么才能识别成功</li><li>光照问题——同一个图像的光照不同，怎么才能识别成功</li><li>尺度问题——怎么让算法能够对抗尺度变化（缩放）</li><li>形变问题——怎么让算法能够对抗形状的变化（一只小猫咪、一坨小猫咪、一条小猫咪、一摊小猫咪…）</li><li>遮挡问题——怎么让算法能够对抗遮挡（带了口罩怎么才能认出我是我）</li><li>背景杂波问题——长得跟背景也太像了，咋区分呢，像下图这样<br><img src="/../images/post13_images/fe6edd4158b30643c0a627f3c0500f47.png" alt></li><li>人为设计问题——同样是椅子，有好多种设计形态呢，设计师灵感不灭，椅子形态总会更新</li></ul><h2 id="2-图像识别算法设计">2. 图像识别算法设计</h2><h3 id="0-设计识别算法需要考虑的问题">（0）设计识别算法需要考虑的问题</h3><ul><li>表达：怎么表达图像类别</li><li>学习：怎么学习给定的数据，得到模型</li><li>识别：怎么在崭新的数据上应用学习好的模型</li></ul><h3 id="1-表达-representation">（1）表达–Representation</h3><h4 id="①-表达的方式">① 表达的方式</h4><p>先划分成小块，有下面很多种划分成小块的方式：<br><img src="/../images/post13_images/330f1616751e8518f926160b710fb803.png" alt><br>然后放入一个词袋中（像一块拼图），可附加一些语义信息等（每个小块之间可能有关联，从而能根据这些关联拼凑出要识别的东西），拼凑出识别物体，从而表达了图像<br><img src="/../images/post13_images/d7cf7fa366f0df781a1f68c820704e59.png" alt></p><h4 id="②-理想的表达能具备的效果">② 理想的表达能具备的效果</h4><h5 id="不变性-invariance">不变性（Invariance）</h5><p>视角不变性、光照强度不变性、遮挡不变性、尺度不变性、形变不变性、背景杂波不变性…</p><h4 id="③-图像识别任务选取的模型">③ 图像识别任务选取的模型</h4><p>对于这种内类的变化（同一类别中不同样本之间的差异性，比如对于猫类，有狸花猫、布偶猫、奶牛猫…），<strong>概率模型</strong>更为有效<br>概率模型有下面三种</p><h5 id="a-生成式模型-generative-model">a. 生成式模型（Generative Model）</h5><blockquote><p>区分张三和李四，先知道他们都具体长啥样，然后区分开</p></blockquote><p>思想：建模数据本身的分布，学习“如何生成这个类别的样本”<br>根据先验（自然本身就有的规律）和似然来建模<br>常见模型：朴素贝叶斯、层次化贝叶斯（潜在迪利克雷分布）…</p><h5 id="b-判别式模型-discriminative-model">b. 判别式模型（Discriminative Model）</h5><blockquote><p>区分张三和李四，不管他俩长啥样，只要找到一个差异能分开他俩就行</p></blockquote><p>思想：直接学习类别之间的边界，不关心数据如何生成<br>根据后验（从结果观察到总结出的规律）来建模<br>常见模型：近邻分类法、神经网络、支持向量机及其衍生算法、Boosting…</p><h4 id="④-bof-bag-of-features-方法">④ BoF（Bag of Features）方法</h4><blockquote><p>借鉴了文本处理中的词袋BoW（Bag of Words）模型，将图像视为由多个局部特征组成的集合，类似于文档中的词汇</p></blockquote><h5 id="a-步骤">a. 步骤</h5><h6 id="i-特征提取">i.特征提取</h6><ul><li>先提取图像特征，可以用规则网格，也可以用显著性检测只提取感兴趣区域<br><img src="/../images/post13_images/790ad64870e0931d3fdda655a407a070.png" alt></li><li>根据提取到的特征，用聚类算法（例如K-Means）进行聚类<br><img src="/../images/post13_images/6405c09e2018f6e4f3860ace791c73d9.png" alt></li></ul><h5 id="ii-学习-视觉词汇">ii. 学习“视觉词汇”</h5><p><strong>码本生成（Codebook Learning）：刚才聚类得到的每个特征向量聚簇的聚类中心，称为码向量（Codevector），即视觉词汇；所有码向量构成码本（Codebook），即视觉词汇表（Visual Vocabulary）</strong><br><img src="/../images/post13_images/27d72fcc4d739d0e53b4f9678469d291.png" alt><br>涉及的问题与解决：</p><ul><li>词汇量选择：<ul><li>过小：视觉词无法覆盖所有特征（如蝴蝶翅膀纹理差异被忽略）</li><li>过大：量化噪声增加（相似特征被分到不同类），导致过拟合</li></ul></li><li>传统K-means聚类随词汇量增长计算量激增</li></ul><p>解决：</p><ul><li>词汇树（Vocabulary Trees, Nister &amp; Stewenius, 2006）：分层聚类结构，通过树状搜索加速最近邻匹配</li></ul><h5 id="iii-用-视觉词-频率表示图像">iii. 用“视觉词”频率表示图像</h5><ul><li>码本（视觉词汇表）可以表示图像</li><li>将新特征映射到码本中最接近的码向量索引（离散化表示），例如：特征向量→索引3（代表“车轮”视觉词）</li></ul><h5 id="c-混合模型-hybrid-model">c. 混合模型（Hybrid Model）</h5><p>思想：结合生成式与判别式模型的优势<br>平衡先验与后验，通过隐变量或联合优化融合两类模型优势</p><h3 id="2-学习-learning">（2）学习-- Learning</h3><p>关注的问题有：</p><ul><li>学习参数</li><li>监督信息的级别（手动分割、边界框、图像打标签、噪声标签）</li><li>批量（batch）/增量（incremental）</li><li>先验（领域知识、专业知识）</li><li>训练时可能遇到的问题：过拟合、负样本</li></ul><blockquote><p>批量学习：一次性加载全部训练数据（如10000张图片），完成整个数据集遍历后才更新模型参数<br>增量学习：逐步接收新数据（如每天新增100张图片），每接收一个/小批样本就立即更新<br>负样本是指与目标类别相反的参照数据。它们的作用是帮助模型建立区分边界，通过对比学习使模型更精准地识别正样本。</p></blockquote><h3 id="3-识别-recognition">（3）识别-- Recognition</h3><h4 id="①-识别任务">① 识别任务</h4><p>见1.（1）</p><h4 id="②-搜索策略">② 搜索策略</h4><p>滑动窗口，通过不同尺度（S）、位置（x,y）、旋转角度（θ）的窗口遍历图像</p><h4 id="③-搜索策略存在的问题">③ 搜索策略存在的问题</h4><h5 id="a-计算复杂度">a. 计算复杂度</h5><p>窗口数=位置(x,y)×尺度(S)×角度(θ)×类别(N)，导致计算量爆炸<br>解决：</p><ul><li>Lampert et al. BSW (2008)：基于分支定界法（Branch and Bound）的 BSW (Branch-and-Bound with Subwindows) 方法，通过智能剪枝减少无效窗口计算</li><li>Alexe et al. (2010)：改进候选区域生成（Objectness），预筛无关区域提升效率</li></ul><h5 id="b-定位困难">b. 定位困难</h5><p>传统检测方法默认用矩形框（Bounding Box）标注物体，但实际物体形状复杂（如弯曲的动物肢体、树枝、服装褶皱等）<br>矩形框无法贴合非规则物体边缘，且滑动窗口可能将相似纹理/颜色的背景区域误判为物体，导致误报<br>解决：</p><ul><li>非极大值抑制 NMS：合并重叠检测框，仅保留置信度最高的结果</li><li>用Canny边缘检测辅助：通过提取物体边缘轮廓（如狗与背景的边界），辅助判断检测框是否贴合真实形状（减少“框住空气”的误报）</li><li>引入语义分割技术：不再依赖矩形框，而是逐像素标注物体所属类别（如“狗”像素 vs “人”像素）</li></ul><h1>九、检测</h1><blockquote><p>聚焦于图像的位置→找一个模板，在图像中滑动窗口检测，区分是否存在我们要找的对象<br>【检测任务→分类任务（每个框是否有我们要找的对象）】</p></blockquote><h2 id="1-目标检测的难点">1. 目标检测的难点</h2><h3 id="1-可能遇到的问题">（1）可能遇到的问题</h3><p>可能受以下影响：</p><ul><li>光照强度</li><li>物体的姿势</li><li>背景杂波</li><li>遮挡</li><li>视角</li><li>非物体（即其他部分如背景）干扰</li><li>目标特征相似度</li><li>…</li></ul><h3 id="2-设计算法需要解决的问题">（2）设计算法需要解决的问题</h3><h4 id="①-如何高效搜索可能的对象">① 如何高效搜索可能的对象</h4><p>可能需要成千上万的窗口，计算量庞大，怎么办</p><h4 id="②-特征的设计和评分">② 特征的设计和评分</h4><ul><li>外观如何建模</li><li>哪些特征与要检测的对象有联系</li></ul><h4 id="③-怎么处理不同的视角">③ 怎么处理不同的视角</h4><ul><li>传统为不同的视角建立各自的检测模型</li></ul><h2 id="2-人脸检测-face-detection">2. 人脸检测 （Face Detection）</h2><h3 id="1">（1）</h3><p>基于滑动窗口法的人脸检测：</p><ul><li>一方面，框不断滑动位置，寻找人脸</li><li>另一方面，框也会不断更改尺寸，因为不知道人脸在图像中的大小<br><img src="/../images/post13_images/60d4a36ad7f3415204095a12bcd45695.png" alt></li></ul><h3 id="2-人脸检测的难点">（2）人脸检测的难点</h3><h4 id="①-滑动窗口计算量庞大">① 滑动窗口计算量庞大</h4><p>成千上万的位置，太多了<br>解决：由于人脸在图像中是少量的，为了提高计算效率，希望在非面部窗口上花的时间越少越好</p><h4 id="②-怎么降低假阳性-false-positive">② 怎么降低假阳性（False Positive）</h4><p>False Positive：把不是人脸的检测成人脸了</p><h3 id="3-viola-jones算法">（3）Viola &amp; Jones算法</h3><blockquote><p>基于boosting原理的人脸检测</p></blockquote><h4 id="①-boosting">①  Boosting</h4><h5 id="a-为什么选用boosting">a. 为什么选用Boosting</h5><ul><li>能得到较鲁棒的分类器，且简单</li><li>是一个提供稀疏视觉特征选择的有效算法</li><li>易于实现，不需要外部优化工具、</li></ul><h5 id="b-原理">b. 原理</h5><p>图示：<br><img src="/../images/post13_images/d55ff588e6a832c0e6443ea860786f27.png" alt><br>公式：<br><img src="/../images/post13_images/6c7f1bf2f95db11aef1f47bd2938e52b.png" alt><br>其中：<br><img src="/../images/post13_images/d34375f418f3a3bbf17f4bd6112342f6.png" alt></p><h4 id="②-viola-jones算法核心特性">② Viola &amp; Jones算法核心特性</h4><ul><li>实时目标检测的"范式级"方法</li><li>训练过程缓慢（需处理大量数据），但检测速度极快（适合实时应用）</li></ul><h4 id="③-viola-jones算法流程">③ Viola &amp; Jones算法流程</h4><h5 id="a-用积分图加速特征提取并获取弱分类器">a. 用积分图加速特征提取并获取弱分类器</h5><p>如图的四种矩形可以通过计算黑白区域像素差，来捕捉图像特征<br><img src="/../images/post13_images/58355c401c2248cd50585ced7b450db5.png" alt><br>特征太多了，24x24窗口内16万种特征，每个特征需遍历矩形内所有像素求和，直接计算每个特征的时间复杂度为O(n)，太耗时，于是我们采用下面的积分图加速：<br><strong>积分图每个点(x,y)存储的是其左上角所有像素值的和</strong><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mo lspace="0em" rspace="0em">∑</mo></msub><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>∑</mo><mrow><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>≤</mo><mi>x</mi><mo separator="true">,</mo><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>≤</mo><mi>y</mi></mrow></msub><mi>i</mi><mo stretchy="false">(</mo><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">I_{\sum}(x, y) = \sum_{x' \leq x, y' \leq y} i(x', y')</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1877em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1783em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">≤</span><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">≤</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br><img src="/../images/post13_images/7930469d81f30978bcba465eaf2c0fad.png" alt><br>则对于任意矩形区域，就可以很快求得积分值了：<br><img src="/../images/post13_images/abb903bb5f8772dfeb7bb594cb811463.png" alt></p><h5 id="b-引入boosting思想构建强分类器">b. 引入Boosting思想构建强分类器</h5><h6 id="i-构建最优弱分类器-最优滤波器-阈值组合">i. 构建最优弱分类器–最优滤波器+阈值组合</h6><p>针对每个矩形特征（如<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>α</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">α₁</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>），计算其在所有样本上的响应值（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">fⱼ(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>）是否大于阈值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">\theta _j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>，是则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">h_j(x)=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，否则<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">h_j(x)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span><br><img src="/../images/post13_images/58a759a10af3ab64e76161d7e926d660.png" alt><br>对权重归一化：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>i</mi></mrow></msub><mo>←</mo><mfrac><msub><mi>w</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>i</mi></mrow></msub><mrow><msubsup><mo>∑</mo><mi>j</mi><mi>n</mi></msubsup><msub><mi>w</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>j</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">w_{t,i} \leftarrow \frac{w_{t,i}}{\sum_{j}^{n} w_{t,j}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4759em;vertical-align:-0.6672em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8087em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7047em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-2.8971em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4603em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.5073em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6672em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br>对每个滤波器 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>，计算所有样本的特征值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">fⱼ(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>，并遍历候选 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>，选择使分类误差最小的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">θⱼ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><br>对每个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">hⱼ(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>和对应的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">θⱼ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>，计算其在当前权重下的误差<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ε</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">εⱼ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>ε</mi><mi>j</mi></msub><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>w</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>−</mo><msub><mi>y</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">\varepsilon_j = \sum_{i} w_i |h_j(x_i) - y_i|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span></span></span></p><p>选择 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ε</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">εⱼ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 最小的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">hⱼ(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> 作为本轮最优弱分类器 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">hₜ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><h6 id="ii-重新设置权重">ii. 重新设置权重</h6><p>计算调整因子 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>β</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">βₜ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>β</mi><mi>t</mi></msub><mo>=</mo><mfrac><msub><mi>ε</mi><mi>t</mi></msub><mrow><mn>1</mn><mo>−</mo><msub><mi>ε</mi><mi>t</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\beta_t = \frac{\varepsilon_t}{1 - \varepsilon_t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.9436em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>更新样本权重：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>w</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>i</mi></mrow></msub><mo>←</mo><msub><mi>w</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>i</mi></mrow></msub><msubsup><mi>β</mi><mi>t</mi><mrow><mn>1</mn><mo>−</mo><mi mathvariant="normal">∣</mi><msub><mi>h</mi><mi>t</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>−</mo><msub><mi>y</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">w_{t+1,i} \leftarrow w_{t,i} \beta_t^{1 - |h_t(x_i) - y_i|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3309em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4542em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight">∣</span><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">∣</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em;"><span></span></span></span></span></span></span></span></span></span></span></p><blockquote><p>解读一下 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>β</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">βₜ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的意义：<br>对第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> 个样本的，当前弱分类器表现很差（误差大），那么我们是想要让这些分类错误的样本在后面更受关注，分类正确的就不管了，所以如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ϵ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon _t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">ϵ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 很小（分的对），那么就应该让它的权重变小。<br>我们的公式，如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ϵ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon _t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">ϵ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 很小，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>β</mi><mi>t</mi></msub><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">βₜ → 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，再看更新样本权重的公式，就可以看出正确样本的权重很小了，则错误样本的权重就相对来说大了。<br>注意，这里并不是提高了错误样本的权重，而是降低正确分类样本的权重。</p></blockquote><h6 id="iii-得到强分类器">iii. 得到强分类器</h6><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msubsup><mo>∑</mo><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi>α</mi><mi>t</mi></msub><msub><mi>h</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msubsup><mo>∑</mo><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi>α</mi><mi>t</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>otherwise</mtext></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">h(x) = \begin{cases} 1 &amp; \sum_{t=1}^{T} \alpha_t h_t(x) &gt; \frac{1}{2} \sum_{t=1}^{T} \alpha_t \\0 &amp; \text{otherwise}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">otherwise</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>其中：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>α</mi><mi>t</mi></msub><mo>=</mo><mi>log</mi><mo>⁡</mo><mfrac><mn>1</mn><msub><mi>β</mi><mi>t</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">\alpha_t = \log \frac{1}{\beta_t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3262em;vertical-align:-0.4811em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em;"><span style="top:-2.357em;margin-left:-0.0528em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>β</mi><mi>t</mi></msub><mo>=</mo><mfrac><msub><mi>ε</mi><mi>t</mi></msub><mrow><mn>1</mn><mo>−</mo><msub><mi>ε</mi><mi>t</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\beta_t = \frac{\varepsilon_t}{1 - \varepsilon_t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1566em;vertical-align:-0.4451em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7115em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathnormal mtight">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><h5 id="c-利用注意力级联机制快速去除负样本">c. 利用注意力级联机制快速去除负样本</h5><p>是一个逐步筛除的过程：<br><img src="/../images/post13_images/0cc6573e2a5d34a083fe7bc1472200aa.png" alt><br>简单来说，就是一次比一次精细，每次只关注上次不确定的那些样本，这样能够在最开始快速去除很多负样本,并一点一点逐渐降低误报：<br><img src="/../images/post13_images/cf19064f1c660dbe27c5c6deb4d570d4.png" alt></p><h2 id="3-行人检测-pedestrian-detection">3. 行人检测（Pedestrian Detection）</h2><h3 id="1-hog特征">（1）HOG特征</h3><p>HOG特征（方向梯度直方图，Histogram of Oriented Gradients） 是一种用于目标检测的传统图像特征描述方法，由Navneet Dalal和Bill Triggs于2005年提出，尤其在行人检测领域表现突出。其核心思想是通过统计图像局部区域的梯度方向分布来描述物体轮廓和形状特征。</p><h3 id="2-dalal-triggs-行人检测流程">（2）Dalal-Triggs 行人检测流程</h3><h4 id="①-滑动窗口提取">① 滑动窗口提取</h4><p>在多尺度图像金字塔上，以64x128窗口滑动遍历所有位置</p><h4 id="②-hog特征计算">② HOG特征计算</h4><blockquote><p>计算方式PPT里没有，但在这里写一下：</p></blockquote><blockquote><p>1.图像预处理：</p><ul><li>转为灰度图，并进行伽马校正（减少光照影响）。</li><li>（可选）调整图像尺寸，统一输入尺度。</li></ul></blockquote><blockquote><p>2.计算梯度：</p><ul><li>使用水平 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">G_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>) 和垂直 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>y</mi></msub></mrow><annotation encoding="application/x-tex">G_y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>) 方向的Sobel算子计算每个像素的梯度：<br>梯度幅值 = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mrow><msubsup><mi>G</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>G</mi><mi>y</mi><mn>2</mn></msubsup></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{G_x^2 + G_y^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.84em;vertical-align:-0.6765em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1635em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.1235em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.88em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.88em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"><path d="M983 90l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6765em;"><span></span></span></span></span></span></span></span></span>,   梯度方向 = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>arctan</mi><mo>⁡</mo><mrow><mo fence="true">(</mo><mfrac><msub><mi>G</mi><mi>y</mi></msub><msub><mi>G</mi><mi>x</mi></msub></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\arctan\left(\frac{G_y}{G_x}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.8em;vertical-align:-0.65em;"></span><span class="mop">arctan</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9857em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.5073em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span></span></span></span></li></ul></blockquote><blockquote><p>3.划分细胞单元（Cell）：</p><ul><li>将图像划分为多个小单元（如8×8像素的Cell）。</li><li>对每个Cell内的像素，统计其梯度方向直方图（通常分为9个方向区间，即0°~180°或0°~360°）。</li></ul></blockquote><blockquote><p>4.块（Block）归一化：</p><ul><li>将相邻的多个Cell组合成一个Block（如2×2的Cell组成16×16像素的Block）。</li><li>对Block内所有Cell的直方图进行归一化（如L2归一化），增强对光照和对比度的鲁棒性。</li></ul></blockquote><blockquote><p>5.生成特征向量：</p><ul><li>所有Block的归一化直方图按顺序拼接，形成最终的高维特征向量（例如，64×128的图像按8×8 Cell划&gt;分，每个Block滑动步长8像素，最终特征维度为7×15×36=3780）</li></ul></blockquote><p>对每个窗口提取3780维HOG特征</p><h4 id="③-线性svm分类">③ 线性SVM分类</h4><p>使用预训练的SVM权重向量w对窗口打分（：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>=</mo><msup><mi>w</mi><mi>T</mi></msup><mo>⋅</mo><mi>H</mi><mi>O</mi><mi>G</mi><mtext>特征向量</mtext><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">Score=w^T⋅HOG特征向量+b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">core</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mord mathnormal">OG</span><span class="mord cjk_fallback">特征向量</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span>）<br>分数高于阈值则判定为行人</p><h4 id="④-非极大值抑制">④ 非极大值抑制</h4><p>在连续响应图上寻找局部最大值，合并重叠检测框</p><h2 id="4-统计模板方法的优缺点">4. 统计模板方法的优缺点</h2><p>统计模板方法是一类基于手工设计特征与统计学习的目标检测/识别算法，通过分析目标在图像中的统计分布规律（如边缘方向、纹理对比度），构建数学化的特征模板，并利用分类器（如SVM、Adaboost）进行匹配决策。其核心特点是数据驱动但依赖人工先验知识<br>例如上面的HOG+SVM、Viola-Jones</p><h3 id="1-优点">（1）优点</h3><ul><li>在检测具有标准方向（典型、固定的视角等）的非可变形对象（人脸、汽车、行人）的任务上，表现不错</li><li>检测很快</li></ul><h3 id="2-缺点">（2）缺点</h3><ul><li>对于高度可变形的事物（比如猫咪，太软了啥形态都有），检测效果可能不太好</li><li>抗遮挡能力不强</li><li>需要大量的训练数据</li></ul><h1>十、跟踪</h1><p>考试不考，时间精力原因暂不梳理</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机视觉 </tag>
            
            <tag> 人工智能 </tag>
            
            <tag> 深度学习 </tag>
            
            <tag> 卷积神经网络 </tag>
            
            <tag> 目标检测 </tag>
            
            <tag> 边缘检测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C盘容量可视化与C盘清理</title>
      <link href="/2025/04/16/post12/"/>
      <url>/2025/04/16/post12/</url>
      
        <content type="html"><![CDATA[<blockquote><p>声明：本博客不为任何读者错误迁移C盘文件导致的系统崩溃负责，自己搞坏了别说我<br>如果下载连接进不去记得科学上网</p></blockquote><h1>1. C盘容量可视化软件WizTree</h1><p><a href="https://diskanalyzer.com/download">点击下载WizTree</a><br>这个主要是能看一下C盘的占用结构，如图所示哈：<br><img src="/../images/31.png" alt="WizTree" title="WizTree"><br>当然类似的软件也不少，比如windirstat，SpaceSniffer，因为都差不多所以就不多说了。<br>对于这种软件，每次启动都得给管理员权限。WizTree如果你忘记用管理员权限打开了，界面左上角会有按钮的，按一下就以管理员模式重启了。</p><h1>2. C盘文件迁移软件FreeMove</h1><p><a href="https://github.com/imDema/FreeMove/releases/tag/2.1.0">点击下载FreeMove</a><br>下载FreeMove.exe就可以啦。<br>选择路径，直接迁移。<br><img src="/../images/32.png" alt="FreeMove" title="FreeMove"></p><blockquote><p>这么做的原理：<br>①符号链接技术（Symbolic Links）<br>FreeMove通过将文件或文件夹物理移动到新位置后，在原路径创建一个系统级符号链接（类似于智能快捷方式），将所有对旧路径的访问请求自动重定向到新位置。<br>例如：将 C:\Program Files\App 迁移到 D:\App 后，原路径会生成一个符号链接，系统仍会认为程序位于C盘，但实际文件已转移至D盘。<br>②无需修改注册表<br>传统手动迁移可能导致注册表路径错误，但FreeMove的符号链接机制绕过了直接修改注册表的需求。系统仍通过原路径访问文件，而符号链接已在底层完成路径转换。<br>保持文件结构完整性<br>③迁移过程中，FreeMove会完整保留文件夹层级和文件关联性，确保程序依赖的配置文件、动态链接库（DLL）等仍能正确调用。</p></blockquote><h1>3. 迁移失败的情况</h1><p>对于一些很长的路径，迁移可能会失败，如图所示：<br><img src="/../images/37.png" alt="迁移失败" title="迁移失败"><br>解决方式是手动创建符号链接。</p><h2 id="1-确保在windows中启用长路径支持">（1）确保在Windows中启用长路径支持</h2><ul><li>专业版Windows：任务栏搜索框中输入 gpedit.msc 并回车，打开“本地组策略编辑器”，依次进入：计算机配置 &gt; 管理模板 &gt; 系统 &gt; 文件系统，找到并双击 “启用 Win32 长路径”，选择“已启用”，点击“应用”和“确定”。</li><li>家庭版windows：打开regedit，找到HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem，将其中的LongPathsEnabled值修改为1</li></ul><h2 id="2-使用robocopy手动移动">（2）使用RoboCopy手动移动</h2><p>用 Windows 自带的、非常强大的命令行工具 RoboCopy 来移动文件夹：</p><ul><li>完全退出迁移目录的所有程序</li><li>创建目标文件夹，用来存放即将移动过来的文件</li><li>以管理员身份打开命令提示符cmd</li><li>执行移动命令<br>移动命令格式：</li></ul><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">robocopy "原目录" "新目录" /E /MOVE /J<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中，/E 表示复制所有子目录，包括空的；/MOVE 移动文件和目录（复制后会从源位置删除）；/J 是推荐使用的参数，可以提升大文件复制的性能。</p><h2 id="3-手动创建符号链接">（3）手动创建符号链接</h2><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">mklink /D "原目录" "新目录"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1>4. 什么不能迁移</h1><blockquote><p>适合迁移的大部分时User目录下的以及其他散户， 而ProgramData/Program Files/Program Files (x86)/System Volume Information/Recovery 这些都别碰</p></blockquote><h2 id="作者提示的">作者提示的</h2><ul><li>C:\Users</li><li>C:\用户</li><li>C:\Documents and Settings</li><li>C:\Program Files</li><li>C:\Program Files (x86)<br>（是说根目录不可以迁移，而不是说这些目录下的子目录。）</li></ul><h2 id="我提示也不能迁移的">我提示也不能迁移的</h2><ul><li>C:\WINDOWS （整个别碰）</li><li>C:\windows</li><li>C:\ProgramData<br>…<br>（这些根目录都不适合迁移，别以身犯险哈）</li></ul><h2 id="其他你拿不准的">其他你拿不准的</h2><p>有很多文件挺大的但是不知道干啥用的，可以先搜搜，再迁移</p>]]></content>
      
      
      <categories>
          
          <category> 工具设置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
            <tag> github </tag>
            
            <tag> 磁盘处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>下载工具NDM与cvefixes数据集的获取建议</title>
      <link href="/2025/04/15/post11/"/>
      <url>/2025/04/15/post11/</url>
      
        <content type="html"><![CDATA[<p>起因是今天完善竞赛作品想整多语言的漏洞数据集，恰好找到了这个：<a href="https://github.com/secureIT-project/CVEfixes">cvefixes</a><br>感觉应该还可以，打算先试试手，但是11个G，下的也太慢了。<br>然后就想起来之前我看见过NDM这个下载软件，当时记得性能不错，今天一用，果真快了不少。</p><h1>（一）NDM</h1><h2 id="1-下载连接">1. 下载连接</h2><p><a href="https://neatdownload.com/">NDM下载链接</a></p><h2 id="2-配置">2. 配置</h2><p>因为我是下外面的东西，所以得科学上网，正好NDM有给配置代理的地方。<br>在 <code>Settings --&gt; Proxy/Socks</code> 中设置一下就好，clash的端口号自己去clash看一下<br><img src="/../images/30.png" alt="配置代理" title="配置代理"></p><h2 id="3-资源嗅探">3. 资源嗅探</h2><p>在Edge的扩展中下载NeatDownloadManager Extension，可以实现网站的资源嗅探，直接下载对应的视频等。<br>比较可惜的是对于m3u8格式的视频是无法成功提取的，只支持mp4，不过也很好了~</p><h1>（二）cvefixes</h1><p>之前尝试去获取这个数据集，在Windows系统下按照Readme文件操作，一直没成功。后面自己因为其他原因装了WSL，就又在这个Linux环境下试了一下，成功了。</p><h2 id="1-提取db文件">1. 提取db文件</h2><blockquote><p>开始之前确保自己配置了linux环境，我这里直接以WSL作为示例了</p></blockquote><h3 id="1-标准做法">（1）标准做法</h3><p>运行：</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">(cvefixesEnv) G:\VulnerabilityDataset\CVEfixes\CVEfixes&gt;wsl sh Code/create_CVEfixes_from_dump.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>可能提示</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">Code/create_CVEfixes_from_dump.sh: 7: gzcat: not foundCode/create_CVEfixes_from_dump.sh: 7: sqlite3: not found<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>那就得下载对应的工具，执行：</p><pre class="line-numbers language-none"><code class="language-none">sudo apt updatesudo apt install gzip sqlite3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>再次运行.sh脚本即可</p><h3 id="2-我的做法">（2）我的做法</h3><p>由于我<strong>安装了这些工具</strong>还是执行失败，问题出在gzcat命令的运行上而不是提取上，因此我选择：<br>将 <code>create_CVEfixes_from_dump.sh</code> 的内容替换如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">DATA_PATH</span><span class="token operator">=</span>Data/sqlite3 <span class="token variable">$DATA_PATH</span>/CVEfixes.db <span class="token operator">&lt;</span> <span class="token variable">$DATA_PATH</span>/CVEfixes.sql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>直接用<strong>Bandzip</strong>解压<strong>CVEfixes.sql.gz</strong>，解压出来的<strong>CVEfixes.sql</strong>存放在Data目录下。<br>再次运行.sh脚本，直接开始漫长的db文件提取</p><blockquote><p>简而言之，数据集前期的工作就是从CVEfixes.sql.gz变为CVEfixes.sql，最终成为CVEfixes.db</p></blockquote><h2 id="2-设置配置文件">2. 设置配置文件</h2><p>在项目根目录（即本 <a href="http://INSTALL.md">INSTALL.md</a> 文件所在位置）创建一个 <strong>.CVEfixes.ini</strong> 配置文件（仓库包含一个文件 example.CVEfixes.ini，复制改名即可）。<br>在 [CVEfixes] 部分定义以下变量以自定义路径：</p><ul><li>database_path：应包含 CVEfixes 数据库文件（以及提取过程中的一些临时文件）的目录。</li><li>sample_limit: 要提取的样本数量，sample_limit = 0 被解释为无限数量的样本</li></ul><h2 id="3-设置-github-令牌">3. 设置 GitHub 令牌</h2><p>这一步是因为CVEFixes数据集在db文件中存的是Github提交url，可以下载DB Browser for Sqlite来看具体的数据库表结构~<br>因此，获取一个 <strong>GitHub 令牌</strong>并配置到 <strong>.CVEfixes.ini</strong> 配置文件，其中包含两个变量 user 和 token，分别填写你的 GitHub 用户名和访问令牌。<br>如何获取令牌就自行百度吧，很简单~</p><h2 id="4-提取源代码">4. 提取源代码</h2><p>以下是我整的一个脚本，记得替换输出目录。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> sqlite3<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">from</span> pathlib <span class="token keyword">import</span> Path<span class="token keyword">import</span> os<span class="token comment"># --- 步骤 1: 定义路径 ---</span>BASE_PATH <span class="token operator">=</span> Path<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">.</span>parentDB_PATH <span class="token operator">=</span> BASE_PATH <span class="token operator">/</span> <span class="token string">"Data"</span> <span class="token operator">/</span> <span class="token string">"CVEfixes.db"</span><span class="token comment"># 定义输出目录 - 按用户要求修改路径</span>VULNERABLE_DIR <span class="token operator">=</span> Path<span class="token punctuation">(</span><span class="token string">"G:/VulnerabilityDataset/CVEfixes/vulnerability_dataset/vulnerable"</span><span class="token punctuation">)</span>NON_VULNERABLE_DIR <span class="token operator">=</span> Path<span class="token punctuation">(</span><span class="token string">"G:/VulnerabilityDataset/CVEfixes/vulnerability_dataset/non_vulnerable"</span><span class="token punctuation">)</span><span class="token comment"># --- 步骤 2: 创建输出目录 ---</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在创建源代码数据集输出目录..."</span><span class="token punctuation">)</span>VULNERABLE_DIR<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>parents<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>NON_VULNERABLE_DIR<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>parents<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"修复版本将保存到: </span><span class="token interpolation"><span class="token punctuation">{</span>VULNERABLE_DIR<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"未修复版本将保存到: </span><span class="token interpolation"><span class="token punctuation">{</span>NON_VULNERABLE_DIR<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token comment"># --- 步骤 3: 连接数据库并查询数据 ---</span><span class="token keyword">try</span><span class="token punctuation">:</span>    conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_PATH<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"\n成功连接到数据库: </span><span class="token interpolation"><span class="token punctuation">{</span>DB_PATH<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token keyword">except</span> sqlite3<span class="token punctuation">.</span>Error <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"数据库连接失败: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    exit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 编写 SQL 查询语句 - 修复查询逻辑，获取文件级别的代码和CWE信息</span>query <span class="token operator">=</span> <span class="token triple-quoted-string string">"""SELECT DISTINCT     f.file_change_id,    f.filename,    f.code_before,    f.code_after,    f.programming_language,    cc.cwe_id,    cv.cve_idFROM file_change fJOIN commits c ON f.hash = c.hashJOIN fixes fx ON c.hash = fx.hashJOIN cve cv ON fx.cve_id = cv.cve_idJOIN cwe_classification cc ON cv.cve_id = cc.cve_idWHERE f.programming_language IN ('C', 'C++', 'C/C++')     AND f.code_before IS NOT NULL     AND f.code_after IS NOT NULL    AND f.code_before != ''    AND f.code_after != ''ORDER BY f.file_change_id"""</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在从数据库查询源代码数据..."</span><span class="token punctuation">)</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_sql_query<span class="token punctuation">(</span>query<span class="token punctuation">,</span> conn<span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"查询完毕！共找到 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 条源代码变更记录。"</span></span><span class="token punctuation">)</span><span class="token comment"># --- 步骤 4: 遍历数据并保存文件 ---</span><span class="token keyword">if</span> df<span class="token punctuation">.</span>empty<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"未查询到任何源代码数据，请检查数据库。"</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n开始处理并保存文件..."</span><span class="token punctuation">)</span>    total_files <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>    processed_count <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> index<span class="token punctuation">,</span> row <span class="token keyword">in</span> df<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token comment"># 获取原始文件的后缀名</span>            original_filename <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token string">'filename'</span><span class="token punctuation">]</span>            extension <span class="token operator">=</span> Path<span class="token punctuation">(</span>original_filename<span class="token punctuation">)</span><span class="token punctuation">.</span>suffix            <span class="token keyword">if</span> <span class="token keyword">not</span> extension<span class="token punctuation">:</span>                <span class="token comment"># 根据编程语言设置默认后缀</span>                <span class="token keyword">if</span> row<span class="token punctuation">[</span><span class="token string">'programming_language'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'C'</span><span class="token punctuation">:</span>                    extension <span class="token operator">=</span> <span class="token string">".c"</span>                <span class="token keyword">elif</span> row<span class="token punctuation">[</span><span class="token string">'programming_language'</span><span class="token punctuation">]</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'C++'</span><span class="token punctuation">,</span> <span class="token string">'C/C++'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    extension <span class="token operator">=</span> <span class="token string">".cpp"</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    extension <span class="token operator">=</span> <span class="token string">".txt"</span>            <span class="token comment"># 构造新的文件名：CWE-ID_CVE-ID_文件变更ID.后缀</span>            cwe_id_sanitized <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token string">'cwe_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span>            cve_id_sanitized <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token string">'cve_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span>            file_change_id <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token string">'file_change_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                        new_filename <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>cwe_id_sanitized<span class="token punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token punctuation">{</span>cve_id_sanitized<span class="token punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token punctuation">{</span>file_change_id<span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">{</span>extension<span class="token punctuation">}</span></span><span class="token string">"</span></span>            <span class="token comment"># 获取修复前和修复后的代码</span>            code_before <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token string">'code_before'</span><span class="token punctuation">]</span>            code_after <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token string">'code_after'</span><span class="token punctuation">]</span>            <span class="token comment"># 保存未修复版本 (vulnerable) - 修复前的代码</span>            <span class="token keyword">if</span> code_before <span class="token keyword">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>code_before<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token keyword">and</span> code_before<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                vulnerable_path <span class="token operator">=</span> NON_VULNERABLE_DIR <span class="token operator">/</span> new_filename                <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>vulnerable_path<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>code_before<span class="token punctuation">)</span>            <span class="token comment"># 保存已修复版本 (non_vulnerable) - 修复后的代码</span>            <span class="token keyword">if</span> code_after <span class="token keyword">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>code_after<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token keyword">and</span> code_after<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                fixed_path <span class="token operator">=</span> VULNERABLE_DIR <span class="token operator">/</span> new_filename                <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>fixed_path<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>code_after<span class="token punctuation">)</span>                        processed_count <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">if</span> processed_count <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"  已处理 </span><span class="token interpolation"><span class="token punctuation">{</span>processed_count<span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span>total_files<span class="token punctuation">}</span></span><span class="token string"> 个文件..."</span></span><span class="token punctuation">)</span>        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"处理第 </span><span class="token interpolation"><span class="token punctuation">{</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string"> 行时出错: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string"> - 文件名: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'filename'</span><span class="token punctuation">,</span> <span class="token string">'N/A'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>            <span class="token keyword">continue</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"\n所有文件处理完毕！成功处理了 </span><span class="token interpolation"><span class="token punctuation">{</span>processed_count<span class="token punctuation">}</span></span><span class="token string"> 个文件。"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"修复版本保存在: </span><span class="token interpolation"><span class="token punctuation">{</span>VULNERABLE_DIR<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"未修复版本保存在: </span><span class="token interpolation"><span class="token punctuation">{</span>NON_VULNERABLE_DIR<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 工具设置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
            <tag> github </tag>
            
            <tag> 下载 </tag>
            
            <tag> 漏洞数据集 </tag>
            
            <tag> 数据集 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Faster R-CNN 源码与流程分析（ResNet50为例）</title>
      <link href="/2025/04/13/post10/"/>
      <url>/2025/04/13/post10/</url>
      
        <content type="html"><![CDATA[<p>这篇分析贴由于精力有限，没有涉及到utils包下的自定义的模块，主要对主文件夹和net文件夹下的文件进行解析，大致能顺下来训练和预测的整体流程。<br>目录结构：<br><img src="/../images/post10_images/0.png" alt="目录结构" title="目录结构"></p><h1>（一）<a href="http://train.py">train.py</a></h1><blockquote><p>我们的流程肯定是训练模型后利用模型预测，所以train.py就是程序的主入口之一，先训练。<br>待会会将train.py涉及到调用的其他文件的类、函数等逐一插入解释。</p></blockquote><p>先导入了一些包以及我们自定义的类方法，这部分比较详细，直接阅读：<br><img src="/../images/post10_images/1.png" alt="图1" title="图1"><br>设置Cuda、种子（保证结果可重复）、用到的gpu数、是否采取混合精度训练、类别名称文件路径（就是指定有哪些要预测的类别）、预训练权重路径、输入图片大小、主干网络类型、是否使用预训练权重、锚框大小、冻结阶段训练参数、是否进行冻结训练、学习率、优化器等等基本参数。直接看图：<br><img src="/../images/post10_images/2.png" alt="图2" title="图2"><br><img src="/../images/post10_images/3.png" alt="图3" title="图3"><br><img src="/../images/post10_images/4.png" alt="图4" title="图4"><br><img src="/../images/post10_images/5.png" alt="图5" title="图5"><br>上面都是基本的参数设置，下面开始真正有关模型训练的部分。下面这张图，首先创建了一个模型实例，加载好resnet50的权重。<br><img src="/../images/post10_images/6.png" alt="图6" title="图6"><br>而创建模型实例是FasterRCNN类的实例，这个是从net文件夹下的frcnn.py导入的。下面分析net.frcnn.py以及FasterRCNN类的代码。</p><h2 id="1-net-frcnn-py">1. <a href="http://net.frcnn.py">net.frcnn.py</a></h2><p>结合刚才创建实例的那行代码，可以看到，要初始化一个FasterRCNN网络，需要传入：类别总数、模式、特征步长、锚框尺度、锚框高宽比、骨干网络、预训练标志。其中我们创建实例的时候，没有传入模式、特征步长、锚框高宽比，因此这三个参数将使用默认的参数。<br>由于我们传入的骨干网络是resnet50，会走下图的resnet50的分支，构建RPN网络。<br>我们待会再说RPN网络的问题，先说前向传播函数。在前向传播函数中，利用resnet50提取图像特征（self.extractor就是resnet50的extractor），然后利用上面构建的RPN网络获取建议框，并获取头部网络的分类结果和回归结果。<br><img src="/../images/post10_images/7.png" alt="图7" title="图7"><br>然后说回RPN网络的构建。可以看到调用了<strong>net.resnet50.py的resnet50，net.rpn的RegionProposalNetwork，net.classifier.py的Resnet50RoIHead</strong>，我们逐个研究一下。<br>（在研究之前，把net.frcnn.py的剩余部分展示如图8，由于我们在文件里指定了forward的mode是forward，所以会走完整的流程，图8的分解步骤没有调用到，就不讲解了，有兴趣看图~）<br><img src="/../images/post10_images/8.png" alt="图8" title="图8"></p><h3 id="①-net-resnet50-py">① <a href="http://net.resnet50.py">net.resnet50.py</a></h3><p>下面的图9和图10非常详细地解释了resnet50的网络结构：<br><img src="/../images/post10_images/9.png" alt="图9" title="图9"><br><img src="/../images/post10_images/10.png" alt="图10" title="图10"><br>我们着重看图11，能看到刚才调用的resnet50函数出现在最后几行中。<br>resnet50函数首先实例化了一个模型，这个模型由传入Bottleneck残差块的ResNet类实现。<br>其次，if pretrained分支我们不会进入，因为我们本身就在外部定义过了model_path<br>在我们实例化ResNet类的时侯，其实已经走了forward前向传播，这在下面的图11中可以看到。所以直接用list获取了features和classifier，分别是特征提取部分和分类部分，转换成了Sequential模块并返回了。<br>也就是说，如果我们传入一些参数给resnet50函数，由于上层的ResNet类设置了完整的结构以及前向传播过程，我们就可以得到一个具备功能（还没有输入图像，但一旦给了图像，也就是ResNet类下forward函数中的参数x，那就可以获取结果了）的resnet50模型了。<br><img src="/../images/post10_images/11.png" alt="图11" title="图11"><br>所以我们可以回看一眼下面的图7的一些部分，在左下角，获取的extractor实际上是resnet50函数返回的features，classifer就是resnet50函数返回的classifier；在右侧的forward模式中，第73行，self.extractor.forward(x)就是ResNet类中的forward函数，传入了图像x，提取得到了特征部分。<br>从图7中也可以看到特征部分的应用，就是在下面放到self.rpn.forward和self.head.forward中。<br><img src="/../images/post10_images/7.png" alt="图7" title="图7"></p><h3 id="②-net-rpn-py">② <a href="http://net.rpn.py">net.rpn.py</a></h3><p>下面我们分析上面图7右上角的部分。<br>这块有点乱，说到哪个图读者可以用snipaste截图一下钉在桌面上方便看。<br>图12到图14的上半部分定义了一个ProposalCreator类，它是为了生成建议框的。由于它是被下面的主要类RegionProposalNetwork调用实例化的类，我们先看RegionProposalNetwork，也就是图14的下半部分到图16。</p><h4 id="regionproposalnetwork">RegionProposalNetwork</h4><p>对比图7和图14下半部分，也就是看实例化的时候传入的参数，可以发现，锚框的尺度使用了类定义的默认值，其他都是由我们输入的，没有走默认值。<br>这个RegionProposalNetwork首先就生成基础先验框，调用的generate_anchor_base函数是一个现成的函数。<br>然后定义了几个卷积核，从图中可以看到是准备给不同任务的卷积核。<br>然后重头戏是下面的forward函数。在我们原来的图7中的forward函数，存在self.rpn.forward获得建议框，因此实际功能就在下面的这个forward函数实现了。<br>forward函数把我们的图像x先走了3×3的卷积核，提取特征，然后又分别走了两个1×1的卷积核，分别用于回归任务和分类任务。其中对于分类任务，我们还走了一个softmax，得到分类的分数。<br>到此为止，forward函数在回归任务上获取了一下偏移量，在分类任务上获取了得分，分类任务完事了。<br>接下来，forward函数先调用_enumerate_shifted_anchor生成锚框，这个是一个简单的锚框生成，是现成的函数。然后锚框出来了，接着就是要根据偏移量来接近实例，实现回归的目的。图14的第135行实例化了我们图12到图14定义的类ProposalCreator，所以在这里可以看到用的是proposal_layer这个实例化后的结果。<br>这个proposal_layer就直接生成了建议框，也就是根据偏移量得到的接近实例的锚框。<br>而这个proposal_layer，也就是类ProposalCreator，是如何生成锚框的，下面我们分析一下。<br><img src="/../images/post10_images/14.png" alt="图14" title="图14"><br><img src="/../images/post10_images/15.png" alt="图15" title="图15"><br><img src="/../images/post10_images/16.png" alt="图16" title="图16"></p><h4 id="proposalcreator">ProposalCreator</h4><p>ProposalCreator也就包含init和call两个部分，call部分是实际实现功能的部分。<br>我们对call部分着重看一下，在图13到图14。<br>简单来说，这里使用了loc2bbox这个现成的函数，把RPN网络预测的偏移量（上面的回归任务的结果）应用到锚框上，得到建议框的坐标。然后这个类还做了非极大值抑制这个环节，通俗点就是保留更好的锚框。其余就是一些异常情况处理等。看图即可。<br><img src="/../images/post10_images/12.png" alt="图12" title="图12"><br><img src="/../images/post10_images/13.png" alt="图13" title="图13"><br><img src="/../images/post10_images/14.png" alt="图14" title="图14"></p><h3 id="③-net-classifier-py">③ <a href="http://net.classifier.py">net.classifier.py</a></h3><p>隔得有点久了，我们回到图7。上面我们解释了利用主干网络提取到特征，然后利用把这个特征传入RPN网络得到建议框。现在还差最后一个部分没有解析，也就是Resnet50RoIHead这个类，这个才会给出最终的分类结果和回归结果。<br><img src="/../images/post10_images/7.png" alt="图7" title="图7"><br>在分析之前，我们得关注一下，其实图7中所示的forward函数是层层递进的，提取特征、获取建议框、同时这建议框的坐标也要传到classifier（从第63行可以看到真正实现功能的部分就是classifier）获取最终的结果。<br><strong>虽然rpn部分也给出了一个建议框，但是需要注意的是它是针对二分类的，即前景和背景的区别，而不是目标检测的多分类的。classifier是在rpn的结果的基础上进一步调整，得到最终的分类</strong><br>下面的图中，从图18的中间开始看，因为之前的是VGG16的，不是我们使用的ResNet的。</p><hr><p><img src="/../images/post10_images/17.png" alt="图17" title="图17"><br>简单来说，classifier接收特征图（backbone提取的特征）和接收RPN网络生成的区域建议（ROIs）以及ROI对应的批次索引。然后使用ROIPool从特征图中提取固定大小的特征，将不同大小的ROI区域映射到特征图上，并提取对应区域的特征，将这些特征调整为固定大小（7×7）后征展平为一维向量。<br>然后，通过一系列全连接层（从ResNet50中提取的）处理这些特征，提取更高级的语义特征。<br>最后，在分类任务上通过全连接层预测每个ROI属于各个类别的概率，在回归任务上通过全连接层预测每个类别的边界框调整参数（参数用于精确调整ROI的位置和大小）。<br><img src="/../images/post10_images/18.png" alt="图18" title="图18"><br><img src="/../images/post10_images/19.png" alt="图19" title="图19"><br>至此我们获得了：某个图片属于某个类的分数以及边界框回归参数。</p><h2 id="2-继续train-py">2. <a href="http://xn--train-jr2nkb.py">继续train.py</a></h2><p>隔得太远了，刚才是图6这里（见下），实例化model所关联的所有代码。可以看到，这个模型就差输入了，只要输入图片，就能得到”某个图片属于某个类的分数以及边界框回归参数“<br><img src="/../images/post10_images/6.png" alt="图6" title="图6"><br>我们继续，图20的内容很简单，就是继续配置硬件环境以及获取我们的数据集。<br><img src="/../images/post10_images/20.png" alt="图20" title="图20"><br>在下面的图21中，我们设置训练步长和冻结训练参数。<br>训练步长是指模型参数更新的总次数，也就是进行梯度下降的总次数。设置训练步长是为了确保模型有足够的参数更新次数来学习数据集中的模式。<br>在冻结训练上，我们是启用了的，然后先让它冻结住，冻结 特征提取网络 的 参数（这样反向传播的时候不会更新了），同时调用freeze.bn冻结bn层，这个函数在图8的最后几行。<br>BN层（归一化层）在训练时会计算并更新每个mini-batch的均值和方差，而在测试时使用整个训练集的统计量。冻结BN层意味着即使在训练模式下，也使用之前计算好的统计量而不再更新。<br><img src="/../images/post10_images/21.png" alt="图21" title="图21"><br>图22首先展示了批次大小、学习率、优化器等的设置，为训练的启动做准备。<br>然后提取了数据集，并生成训练集和验证集。<br>然后创建了FasterRCNNTrainer对象，这个类是在fcrnn_training.py中定义的，我们待会会在第3部分讨论。<br>最后是实例化一个能记录map曲线、评估模型性能的类，这个对象在后面会用到。<br>也就是这个train_util和eval_callback马上就要在训练中用到了。<br><img src="/../images/post10_images/22.png" alt="图22" title="图22"></p><h2 id="3-fcrnn-training-py">3. fcrnn_training.py</h2><ul><li>frcnn_training.py 文件实现了 Faster RCNN 的训练过程，包括以下内容：<br>计算边界框之间的 IoU，将边界框转换为回归目标；<br>为 RPN 网络生成训练目标，为 RoI 头部网络生成训练目标；<br>FasterRCNNTrainer类实现 Faster RCNN 的训练过程，包括损失计算和参数更新；<br>初始化网络权重、生成学习率调度函数、更新优化器的学习率等辅助函数</li><li>特别值得注意的是，Faster RCNN 的训练涉及多个损失函数：</li><li><ul><li>RPN 的分类损失：判断锚框是否包含物体</li></ul></li><li><ul><li>RPN 的回归损失：调整锚框位置和大小</li></ul></li><li><ul><li>RoI 头部的分类损失：判断区域建议的类别</li></ul></li><li><ul><li>RoI 头部的回归损失：精细调整边界框位置和大小<br>这些损失函数共同优化，使得模型能够准确地检测和定位图像中的物体。</li></ul></li></ul><p>我们来看一看具体的代码：<br>图23定义了交并比IoU的计算函数和边界框坐标转换函数，分别用于去除重复度较高锚框和转换回归目标（得到和实际样本的偏移）。<br><img src="/../images/post10_images/23.png" alt="图23" title="图23"><br>图24和图25定义了一个类，AnchorTargetCreator，用于为RPN网络生成训练目标。这块主要是计算锚框和实际样本的接近程度，找到最匹配的那个，分配给真实框。（也就是这么多锚框，找一个跟真实最近的。）不要忘记RPN只是来做二分类的，前景/背景的锚框~<br><img src="/../images/post10_images/24.png" alt="图24" title="图24"><br><img src="/../images/post10_images/25.png" alt="图25" title="图25"><br>图26和图27定义了一个类，ProposalTargetCreator，用于为RoI头部网络生成训练目标。这个类要为每个RoI建议框分配最匹配的真实框和标签。怎么找到最匹配的呢？某个建议框和每个真实框都要计算IoU，argmax一下就好啦。同时，这个类将IoU大于正样本阈值的RoI建议框作为正样本，而可能有很多个正样本（很多建议框都指向这个真实框了），那么在图27中，限制了数量。<br>其他相关的内容看图即可，非常详细。<br><img src="/../images/post10_images/26.png" alt="图26" title="图26"><br><img src="/../images/post10_images/27.png" alt="图27" title="图27"><br>图27开始到图31展示FasterRCNNTrainer类的构造。这个类实现了训练过程。总体来说：<br>首先进行了初始化：接收模型和优化器、设置RPN和RoI的sigma参数、创建锚框目标生成器和建议框目标生成器、设置位置归一化标准。<br>然后前向传播：使用骨干网络提取图像的共享特征、使用RPN网络生成区域建议、拿到批次中的每张图像的属性值、为RPN网络生成训练目标、计算RPN网络的回归损失和分类损失、为分类器网络生成训练目标、使用分类器网络处理ROI、计算分类器网络的回归损失和分类损失、汇总所有损失并返回。<br>最后到训练更新阶段：清零梯度、执行前向传播计算损失、执行反向传播、更新模型参数、混合精度训练。<br>看图吧：<br><img src="/../images/post10_images/28.png" alt="图28" title="图28"><br><img src="/../images/post10_images/29.png" alt="图29" title="图29"><br><img src="/../images/post10_images/30.png" alt="图30" title="图30"><br><img src="/../images/post10_images/31.png" alt="图31" title="图31"></p><h2 id="继续train-py"><a href="http://xn--train-jr2nkb.py">继续train.py</a></h2><p>接下来就回到train.py的最后部分啦，这里开始调用相关函数进行训练了。<br>从0开始训练，先训练到解冻，再从解冻训练到结束，在这期间自适应调整学习率。<br>需要注意在最后的最后，图33的第455行，给fit_one_epoch传入了train_util，这个train_util就是我们刚才说的frcnn_training中FasterRCNNTrainer类的实例化对象。而fit_one_epoch是utils.utils_fit.py中的函数，就是将 frcnn_training与数据加载、损失记录、模型评估和保存等功能连接起来，形成一个完整的训练系统。<br><img src="/../images/post10_images/32.png" alt="图32" title="图32"><br><img src="/../images/post10_images/33.png" alt="图33" title="图33"></p><h1>（二）<a href="http://predict.py">predict.py</a></h1><p>集成了四种不同的预测模式：单张图片预测(predict)、视频检测(video)、FPS性能测试(fps)和批量文件夹预测(dir_predict)。<br>可以通过修改 mode 参数来选择不同的预测方式，对图像或视频中的目标进行检测，并可以选择是否对检测结果进行裁剪、计数或保存。该文件是模型训练完成后进行实际应用的重要工具。<br><img src="/../images/post10_images/34.png" alt="图34" title="图34"><br><img src="/../images/post10_images/35.png" alt="图35" title="图35"><br><img src="/../images/post10_images/36.png" alt="图36" title="图36"><br><img src="/../images/post10_images/37.png" alt="图37" title="图37"></p><h1>（三）其他文件</h1><p>下面是一些并没有在训练、预测流程中实际调用的，但起到项目的辅助作用，或只是没有被调用到。</p><h2 id="1-net-vgg16-py">1. <a href="http://net.vgg16.py">net.vgg16.py</a></h2><p>vgg16网络，和上面的resnet50是对应的，不过我们的案例中使用的是resnet，所以vgg16没有调用。<br>见图38、图39:<br><img src="/../images/post10_images/38.png" alt="图38" title="图38"><br><img src="/../images/post10_images/39.png" alt="图39" title="图39"></p><h2 id="2-voc-annotation-py">2. voc_annotation.py</h2><p>这是数据准备阶段的工具，用于处理VOC格式的数据集，生成训练和验证所需的标签文件。在开始训练前需要手动运行此文件来准备数据。<br>见图40到图43：<br><img src="/../images/post10_images/40.png" alt="图40" title="图40"><br><img src="/../images/post10_images/41.png" alt="图41" title="图41"><br><img src="/../images/post10_images/42.png" alt="图42" title="图42"><br><img src="/../images/post10_images/43.png" alt="图43" title="图43"></p><h2 id="3-get-map-py">3. get_map.py</h2><p>这是模型评估工具，用于计算模型在测试集上的mAP（平均精度均值）。训练完成后，可以手动运行此文件来评估模型性能。<br>见图44到图46：<br><img src="/../images/post10_images/44.png" alt="图44" title="图44"><br><img src="/../images/post10_images/45.png" alt="图45" title="图45"><br><img src="/../images/post10_images/46.png" alt="图46" title="图46"></p><h2 id="4-summary-py">4. <a href="http://summary.py">summary.py</a></h2><p>这是网络结构分析工具，用于查看模型的结构、参数量和计算量(FLOPS)。在设计或修改网络时可以运行此文件来分析模型复杂度。<br>见图47：<br><img src="/../images/post10_images/47.png" alt="图47" title="图47"></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机视觉 </tag>
            
            <tag> 人工智能 </tag>
            
            <tag> 深度学习 </tag>
            
            <tag> 卷积神经网络 </tag>
            
            <tag> 目标检测 </tag>
            
            <tag> 源码分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CodeQL生成数据库报错Spawned process exited abnormally处理</title>
      <link href="/2025/04/06/post8/"/>
      <url>/2025/04/06/post8/</url>
      
        <content type="html"><![CDATA[<h1>前提</h1><p>解决的是参考这篇教程学习CodeQL时遇到的问题：<a href="https://www.freebuf.com/articles/web/283795.html">CodeQL从入门到放弃</a></p><h1>解决方案</h1><p>原命令</p><pre class="line-numbers language-none"><code class="language-none">database create ~/CodeQL/databases/micro-service-seclab-database  --language="java"  --command="mvn clean install --file pom.xml" --source-root=~/CodeQL/micro-service-seclab/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>改为</p><pre class="line-numbers language-none"><code class="language-none">database create ~/CodeQL/databases/micro-service-seclab-database  --language="java"  --command="mvn clean install -DskipTests --file pom.xml" --source-root=~/CodeQL/micro-service-seclab/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>也就是在 <code>mvn clean install</code> 后加上 <code>-DskipTests</code> 跳过项目单元测试。</p><h1>原理分析</h1><h2 id="核心报错：">核心报错：</h2><pre class="line-numbers language-none"><code class="language-none">Caused by: org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when 'hibernate.dialect' not set<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>说明 SpringBoot 在加载应用上下文时尝试连接数据库，但找不到 <code>hibernate.dialect</code>，也无法从数据库连接中自动推断，因此失败。</p><h2 id="解决逻辑">解决逻辑</h2><p>CodeQL 构建数据库的本质是追踪项目的编译过程，因此不需要运行测试。只要项目代码能成功编译，CodeQL 就能生成数据库。所以直接跳过。</p><h1>其他注意点</h1><p>还是应该尊重教程的环境（JDK版本和Maven版本）</p><ul><li>JDK版本切换建议阅读这篇教程：<a href="https://blog.csdn.net/qq_40543170/article/details/88391838">三个步骤教会你自由切换JDK版本，超级简单！</a></li><li>JDK 1.8下载在这篇教程找链接：<a href="https://blog.csdn.net/JasonXu94/article/details/143726390">Java8（JDK1.8）最新下载安装教程</a></li><li>Maven 3.6.3下载在这篇教程找链接：<a href="https://blog.csdn.net/qq_46554590/article/details/119428896">maven3.6.3下载与安装。</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 报错处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 报错处理 </tag>
            
            <tag> CodeQL </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Joplin存储路径问题</title>
      <link href="/2025/04/02/post7/"/>
      <url>/2025/04/02/post7/</url>
      
        <content type="html"><![CDATA[<h1>解决方案</h1><p>  不用Desktop版本，转去用Portable版本就行了。</p><blockquote><p>但是Portable版本的启动速度确实比较慢，如果非常介意这个的话还是可以用符号链接，例如使用FreeMove直接换盘~<a href="https://github.com/imDema/FreeMove/releases/tag/2.1.0">FreeMove</a><br>  Portable版本下载链接：<a href="https://objects.joplinusercontent.com/v3.2.13/JoplinPortable.exe?source=JoplinWebsite&amp;type=New">Joplin Protable</a><br>  记得把Desktop卸载干净。</p></blockquote><h1>区别</h1><p>  Portable版本比Desktop版本启动要慢一些，不过终于是可以自定义位置，适合我这种C盘爆满用户。其实感觉启动速度也没差多少。<br>  网上的方案一般是在 <code>快捷方式&gt;属性&gt;目标</code> 添加 <code>--profile+新路径</code>。反正我这么做了之后出现了Bug，而且看很多人说重启后又回去了。<br>  找了官方文档，开发者就是建议用Portable或者用mklink去链接，我感觉还是Portable比较适合。<br><img src="/../images/26.png" alt="Portable Version" title="Portable Version"></p>]]></content>
      
      
      <categories>
          
          <category> 工具设置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
            <tag> github </tag>
            
            <tag> Joplin </tag>
            
            <tag> 自定义设置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决hexo d上传失败（Spawn failed）问题</title>
      <link href="/2025/03/30/post6/"/>
      <url>/2025/03/30/post6/</url>
      
        <content type="html"><![CDATA[<h1>前情提要</h1><p>想上传博客，但是发现执行 <code>hexo d</code> 出现如下报错：</p><pre class="line-numbers language-none"><code class="language-none">FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.htmlError: Spawn failed    at ChildProcess.&lt;anonymous&gt; (F:\myweb\myblog\node_modules\hexo-deployer-git\node_modules\hexo-util\lib\spawn.js:51:21)    at ChildProcess.emit (node:events:524:28)    at cp.emit (F:\myweb\myblog\node_modules\cross-spawn\lib\enoent.js:34:29)    at ChildProcess._handle.onexit (node:internal/child_process:293:12)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后就思考是不是网络问题，于是我 <code>ping github.com</code> 发现全是请求超时，花了好长时间去搜索如何解决这个问题。但是在看报错的时候，忽略了一行信息：</p><pre class="line-numbers language-none"><code class="language-none">ssh: connect to host github.com port 22: Connection timed outfatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以看出是ssh连接的问题，且问题出现在22端口。需要说明的是由于最开始部署博客的时候，采用http协议就出现过超时问题，所以转用ssh了。</p><h1>解决方案</h1><ol><li>执行 <code>ssh -T git@github.com</code> 发现抛出异常：<code>ssh: connect to host github.com port 22: Connection timed out</code> ，和刚才<code>hexo d</code> 出现的报错一样。</li><li>我们 <code>ping ssh.github.com</code>，发现可以ping通。同时可以和 <code>ping github.com</code> 返回的ip对比，发现是两个不同的ip，ssh.github.com对应的是&nbsp;20.205.243.160，而github.com对应的是20.205.243.166。所以端口应该是没有毛病的，我们把要访问的改为ssh.github.com即可。</li><li>在 <code>C:\Users\用户名\.ssh</code> 下新建一个 <code>config.txt</code> 文件，写入如下内容：</li></ol><pre class="line-numbers language-none"><code class="language-none">Host github.com    Hostname ssh.github.com    Port 22<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="4"><li>把.txt后缀删掉</li><li>重新执行 <code>ssh -T git@github.com</code> ，发现成功了。</li><li>回到博客目录执行 <code>hexo d</code> 发现一切都好了。</li></ol><h1>其他情况的解决方案</h1><p>可以采取一些尝试：</p><ol><li>如果在根目录下的config.yml中的deploy的repo里用的是http，改用SSH试试，需要自己创建和仓库的ssh连接，可以自行搜索</li><li>参见大佬的一些解决方案 <a href="https://blog.zhheo.com/p/128998ac.html">Hexo错误：spawn failed的解决方法 | 张洪Heo</a>，本文的解决其实就对应大佬这篇博客的<code>ssh -T git@github.com</code> 连接失败的解决方案。/侵删</li></ol><h1>关于Github无法ping通的问题（未解决）</h1><p>情况是：能ping通8.8.8.8或1.1.1.1，<a href="http://xn--pinggithub-wj2ph1jn660a.xn--comgoogle-267rf84x.com">但ping不通github.com或者google.com</a>，科学上网可以直接访问所有外部网站，但就是ping不通。甚至在github可不科学上网直接打开网页的时候，也ping不通。同时不是校园网的问题，隔壁师兄可以ping通。分析了半天，问题定位在ICMP。<br>用WireShark抓包发现所有的ICMP报文都被拦截了，不太清楚到底是什么原因，我做了以下尝试，但均以失败告终：</p><ol><li>关闭防火墙，或在防火墙中出站规则允许关于ICMP的一切规则</li><li>将DNS从DHCP切换手动配置为8.8.8.8或1.1.1.1</li><li>修改hosts文件，在其中添加github.com和问题ip</li><li>执行 <code>ipconfig /flushdns</code>刷新dns缓存</li><li>执行 <code>netsh int ip reset</code> 和 <code>netsh winsock reset</code> 重置TCP/IP协议栈</li><li>用telnet/tcping测试，全都是依旧显示有问题</li><li>禁用ipv6</li><li>更换网络为手机热点<br>最终还是没有解决，不太清楚为什么，不过现在不影响博客上传了，所以也没有处理了。</li></ol><h1>感谢</h1><p>非常感谢下面这篇博客，解决了问题。<br><a href="https://icemyst.github.io/posts/5161.html">GitHub连接超时问题解决 | 冰刻无痕</a><br>感谢可爱小柴陪我解决了半天。<br><a href="https://zycreverse.netlify.app/">Home - 我要当黄牛!</a></p>]]></content>
      
      
      <categories>
          
          <category> 报错处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> hexo </tag>
            
            <tag> 报错处理 </tag>
            
            <tag> 网络问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Datacon2024漏洞分析赛道作品Vuln_wp漏洞挖掘源码分析</title>
      <link href="/2025/03/29/post5/"/>
      <url>/2025/03/29/post5/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="cb4e73c9523c46c2501e96ed628e03945bc60c828eda42f5cce9e14277d4dd87">6eefebefcadb4f0b037af89a621cc0aba66ba9eae679395edb1070cf64ecc97f80d686695106b73aff47e51ada9c0b439fe87b7b38cc8e10adde7cf345c9b8e24bae778811215c9042bb0952a740a549cc81bb8e0bc06e5730f7c0f6da3cb596273b1373cba4097b971e2f8abe2cb093f803874429b7e19521401b4e901914a8a709ebddb4542c6da65573aca85d8ae5bc4252644451b5b3517dc4f6cf9eb6e87c2bfbe96d3b05293b24c1f756169ba88e001012803a382e0512e660caddfab7994371dc94be6a17c0dd32317898484b8ca7cf927d9de85e3c0d29e1253b2c533295e22cbaddd22047bbfefb9311e1d905d78aecf7603b7908bb74d5e55db0df80e38400759349459bc8b1ae6d1958e65dd0d9cb11bd9a4a56c4b98ce94190eb5f24e12f642471fe5e8a2be8845592ec9a4eba6d2d90cfde7226ba9f13f3303d8d3c42b89a4619362169643fa99f66cc46dd20f1e5efe248950c854e47db23af7dd9d9a658bdd0bdb40020f3ebb0f6c37c3fc36d7d4e384e6c8583c1637519aa75bbb4c967f9b96f1f6487623ef92fb963ed4a3fe89e816e968a3393b0df5630e8e23374c8a8373f607ba1634d070718876de828f5f6b8e90b9eec4a9c6a9cc05dafc1c7d35faa963bf35d48ee920dfb2e750d0064c80a2192e9d57e748ece7d19c88bf4bd45da3fd9ab12cf4868ac0886dc0f8aac98a92129e84cf3f11daae786651019776ccfc08240a7f04c880c77382482083b33f830d2ede7669bdf27081b93dbd3671489e8ccf6f56d75a5ac903eeab52e32f581a1a4ad140d4fa25b58e411efc61d89111fed18434489ba171a0b63f38d2a4059f4e3a88fc3646b8a89a31f49abbc04c2039c009858471ce025426e8e4e9aa37fd6ae99c4c3500fc964084df03bebf7ae04c6644dc1f4822f414d37ca07370fab7d747af106b8ea9aacb8ec154df6bb90ad28021c72b804e112ef1928df682dd92628d1ce2aed81a41407655dc5ab8d360f17c7df896c76dae87c48ca6b4a73f12690705807651921cd8caf5fb3484ba12a2337423ea4e1e0607514ec02c4d1a3414a293c8674c7613811b9200288fa2a1d667a8ae1d8b6ac0a30058dff4da0df666f1da9768b0e403f7ea2e8d0d0f5c8934e999edf0b980f8ac926027c6f6a434cccab8b8d472d5c1f83d9d519d4b6922bde2438d9cc280a2af4b9326ba3ca651dbb7c0e32190bfa32af7336821aae27bff0710608b51be6131a5e36c9e86c2ecf0eb76698952e747c607a1892771aa8cd601af13fad7d61aa307818ba21299b7df560e5203f52f471ffda2b1b9c670f40a72f5549d52b1bbce19e9921379e78a1524b4471122038f84438c191b53eccc65c964fd9c14aa290e6a257f6b333465c8a6e8941d386989cd2a05068003254b9aab8bebfa2ee3c017d04bc3b833893b8cb459d5747001f03578ad904d96a7333bc1dcd0f27332c8049f953447eaf53b36649714a9f94c15d8078d0eed40b93f113242e5ebdb1c642cc56c07806adb7826d6d0e5151b96589c87adfc77321d69c9b4a1a69cdb9f2c4e6a75171cc2df5ba3c45ed501698e950b93b179b0fa33f051b646d2ffc3398cbedf65df8b807abd49e5bdc9f60fb08615137e2c6e6a6becafb66ba70ad444d802b6f8ddfcc4198b5998db1deef6f4f58</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 漏洞 </tag>
            
            <tag> LLM </tag>
            
            <tag> 大模型 </tag>
            
            <tag> 网络安全 </tag>
            
            <tag> DataCon </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vulnhuntr大模型漏洞检测工具源码分析</title>
      <link href="/2025/03/25/post4/"/>
      <url>/2025/03/25/post4/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="7e1e2fc4f773459bb681f105ef44c54703bef4356d946979c49e2a443ed46a3a">6eefebefcadb4f0b037af89a621cc0abac50a65906366d639197f9ee8298b9376af004bf5b2c793df0761e05dce8a9df8d167d7d25147f57f969bcfd72b96ea17fb467e5a408c0cfcc5a2d6d8ffa683f4674040c3553e44140d5c0af0155a07f830d8bf89b551a1cfa851d3e0feb8a1aed94dc4c4b0a95977cd052c6ddc339affaa6975e3ea15d7cc25d3d04f0e6f6efb77d3004c60bb9b5342d30c26a6a8e2e0c746b0e576618eab3b213c74eb33e6bf9e2b26def03451fbd26b1d63338729362cf60ab66fccc654eefe2a14c2f16680a55cb20ead2806301b3f24426771bcf6d3b8e49c7c8e037fa41a156f7a571a9b7eebc1b066066e928056f72ef4ba86df9e60e6a721397075d6cb5dc994931af85c0ee0d46cd71f49f657c5fc435f73799da0977b6a47c54bc2efafd02b654a32db51067a2825739c92624978432d63981698581afeeeac8aa4fadbe3d03cc35c65883dd484f96fa6c1995beb66b29e25702489907e24e38414ee53ee92f53ca6cb2b5317ef013f4e5e9ebd8f1ad08100ae316d119219773fd3610dd6659d85fe99ced23dbbdcc5e705cc40b9262a562dc936562921ea540cb3438e2b16a74ecfad38c3c858744d7219a8ea9d7fbd15dbdb2b2fcfecf0e83664d5d74a0b5f3024eeacdc749cf279ac98fa14503aa47d29262c8cfea42be60d1de33148053ba1f3f8300b1795f6b06e4e42ecb31a2597e4634bfa1597094b4a489a4b8ce2a06cf2cb87efceca40e38011e701475ac1f22e1e17862db38feefc5e013b4646a6c8753b9b89e3c882e683ce6dbcf1310fdf8eb7fee4b92ec9d2b26e9ddb74a1716cae15b44a0e109698a6ce340a2878a16e11c890e1442b15cad0a1462dd5fa4c34021bbd7d4688d839f33770db8599cc3db12e6545d42418991aa7a780b043cfbd95600cd331b0b7482edfda0048d0a462eb0c7180c7ef844ff80fd559fe32610013bafb8e8698c184e54af41985eeddea5cc843c0574391847b87ecf65aae6cceee304380d4257120e411f47d897a0229f516a6e21409191fc83b0e0aae5955d732c38e85660d8c4dde6cbfaed3b97a1b4d05bedf5ce8805bb418985968a5591b462d7c28300c16ff1c727c9be1bd8708cc97349439ee42eb074081eb19c9f9831611dda02237d20df5a69c4d7e49a827524fc2ee1b6bd589f25f36a697f9d314f433ba42fa793e2abfb6aab8e91d3eba19ddfc1d686796c256dad20dc91c05c75764d7bf25eaeb777132b076566d1483bef9f926ee4b1acf1d93c4b39fa4b41e7f3c841d573d265d8fc06d4d4279d6ce12d2362a937c77a25d04aead7d34e941b180bffab27f59d213aeb03d26481d34b327cfb20d6a1ece0a292e5e3a205b5867e3675475f8d0cb26d3a44ff1399df24650bced982c550c9dd1cd48cc10c016a90095fbffe054484b4d79a657e2ab53c0028e238898f8aca02d390deb3861a544c069da9fbee360a4307c5c751d5e1a1701e1b2133e51911bb987c6409396593b4ff02dd4677b7ced41b1a2bbdd0bf291134074dc3bc0f56e2985ae1c24bf9f1f0e7486b700edbfd48d6ac9316bf9b026e54151c8165f7dc1897a406ba747f94f99cea5cbd6ccbececd4f30971169ef18753c1015b4579021830206a0da224ce7d006c1b01da5da6de3b8dc9e8749ae0bc5a4e693804dbeed55a4cfc886f5f7e18abe1f40512ab130937372dbd49ce511b6164add2dc310ebb47b95a83bbe2897f52b95d2997a3e9bfbf609ef73df796479e67d312fa23540637728571a11e59fa7125881cb65926edeaa2195a8530b9152a48bb2577b1e11f0410fea3dfd477e3840c0926f9e8781bb334441f8fb1fefc95afb536ac0d6c12cc38201679e1832bba5ab14bee9d5aef60709d3c0eab3360b593fbf02e741a790fa9ed525e5eaee7b3fa7029e58bade44733eac4a0cdaa98b73da6b0a0c404f11bca8a0af1ea0ac972f603d85f141b593db7d8fb1f2a37ffbda9a811c669bd43de3172f428c46aab983e8c9103d1210ad1902e44f7e166ffd0b99a7b15505b6b54ba2e92eb05ea52ec3179c0170c9d555ad9ead7ecfc9936af3d6bc99433db0448358577c319748cfaefb940bdd7a03263c09b05218f536f946ec10b515b38233d09d322c6334faa3d36cc82721e74f7c29a8a598765ad5c6b7d5c7c5190d280983670cf66c79ab11c9d555722ca3cc0118b444701fdec7652aba17a232103fc68f52ca87d62e557bf1bf0f05be9ca6604e2a204c8d87a8531b772e55246ca07b770b4f157cd97acb8352f7e5ac2dc02186d57f9992de0346b0cb9c5b908744847b92f0e5795747100aa805707e0a7768244361b41d5b31116d324bdb60c0144ff6f62f723a4a078b160e36f818bb6c9169ff1c5b69bf1ce709cadcba6505efb35de59d5d3caafbb663d8bf7afa1bc28f65682e202207a1db2cff4ddba2fc4bd75d54576ec863c556ee6c82f60d8c63ce8676df884ea6e27b195ce215b8bbe1714c33d3d76b2161df199bad6f668668ef9bb4b0b5f9adf8d0e0f821001647899adcee23c42b2f852dbd25f9927f01f54f41433a82058490c326147458df58d9dd7273505373a9c9cf50a089eeb2f07ad622c0391ef32c010182da05cac24e165990dec46f66fd5a3cf1f18619fb9367e821a22c0d71b5ace77e794bcad3c13b8e42cafde17e4b58ded36f42776578d441d5fd7257f043564af0df76abb6dc6adef675ab66c641dbbe1313372c089f6a41422fe0111d5491e844a9aaef4ded48604934b783efeab670a2f6ee13dfda9573815333049a8aa8424c049300dd1262532195e2d362a00c0ead4c60d8d89f0f0b153b9d7f272ea13e108b41ec15b343c6c3e4bcb45a3729df20280ef761931691cc513e55e674364771396caddb28668671aa5daf3eaae9299f17ee471e14c0d400ed1283a6948c8d7b1d2c4a97e53d3c28454950f8b28afd2179195320df6a030dd1b9dcba517e984b8a88312861fbf35c0229072f8c0db452509bd2553908cf757188719e0e20eb8205e3b8532dc7f0fc21d2e4821a48f9e22c700fd440bd00be34a85195cb1f6bdee218687f9ff5c3686435b3986313caad5214db5803ee765926185bc4f4c688277df2bdc9503f2c7147d1601a29b5f1f7281091fb1c3f81d16eb9abcb13172477995c47136728016ce70cd237d488dbbcc3b9dc65fb4d97114139e4fe0c8b7980e61d6d3bf1b47d7160b635b5fdb573e6afc59a7639afb4ad82ff2e2dfb0da2888590241d5eba48d644422be1d29c6ef898ebde2f19ae20466177ddcadf4273cf044647b5ab83bf2587cb62df0636d5d694fc15987a42cd5f987bd64433b64ad2202b829c316e0ca9df7529700fed8214f0b3ad159f56c7036b51e9b2a14248ddc6b5ce5e0ea3370712fed902e7878fdec6cf70aa107f6ba2a82e2db0322ef7df2ff622c8f5c3c1c2a13586184b4d3ffeb7b6452f417607c0cbcbabe854d37ab66ce6412f79e9b6d96d04c73bd86d50ff58d66c51e9df2cf58887a08f1a4d4d6ad54e1cd37aa0e4a9daa30a231898889972d275f7d94e1a15a0f09a268c9f6bceff95a7b0d62513cc9c894eed07382cbf2a48fd6c115c46347c5210263cc4351f81fe03fafb7687455401de32f4768b513be2cdd910c055f7886603f905612135cdab09b8f52fac988b4cc6a2e7b1e8dc530b791a44af8026c5bd9ed6a349e0a9de0612ac1ccf7b716ca5c3b0946d702d12edf1dddef65b5b1b3d8931d0a26fa02cc9d894cba7f13ae85dcd3099380b3e50af5af35584166c4bbb12ce6590b33ced6b0cac9bbb33b634915d3c7afcf04bb9fd9b6fba8f6730476277c7f6007596dc38ca141639e6ecc5b00fdaa84fa037975ddc5b0d965a3bcbd5249a492bfba3ce97f812860b21a341b571ffee62ee7d623d9be68b967d6bfe9aa4d91125055c3a722cfbed31514f62c81c687fb30f5dfbd9746b06fc6a9dbe6b09f63c6ab5f3aeaebbd97a592fadb813b710030f3785e9ac918fff6a151ef466a9e8e8d8b3be4940a340890b0eac8e648c854768c612c06fa5b4916b23355672ad6aae5486d2ff40ce8be24b82c27da1738ed8543a830b35d36efdf3b1c67202abe45c6eb6a45b264d43b3e02ef3cecb752047b7394e57b15d33966defc901a3cbb454653acb152f982d9394ab50a572985b3818aabb8d1ef52034a745ef192f34e5310847133ac329c147629c4a30f19dca88723ec25e2514c03f8a3b2e5aeb4f6408797b34a6f8f783137b30e4e096f4a49898a837b0ccf6403d4adce289dcc934c17abfa71ea207d553960655a7171a5fe682de01cd8c4f864470cd3244128e93ad36b71c7e364dca85757c9c203518ac475c97ddeffdada2414969f1dab97298c41f8f29056ca878fd10eb8010523d45eda3472b76f325a1c63f51328c5a97ede6be284af4ba2e75e5eb42d8b1ae5f9913c6ace3c0015acda4d5a2881a2fe54e82ae0ff8a153021cf68b8e8a7136d603ac4af1ddc6430f8af6867f35bdd61d8006f7ad8687d3d89ad1735cdc5b960d95a395045095edf63ebbbf0986ce18cc466e707082a451bba61038fe55b1bb0b70cfd334e064fb2c18ba91f9be5432f21731333c6598cee865ef061fbed5152281349031f65819239bbc146d207c2f06d8b43eb5ce380064e688984d272910e03d890c9ec472b45a0f9edf611eac0857ae20aed4bdff43b25e9c7b982acd9564269a1800aaa0a438a751ee08570d6e716c6a26a039393afe60d4f2f69d918ff6e1f6bd5e7f1c6fb2456d5da753f2240c3e8fd795fada3d918a8b07aafa680063f83aaa8c6f37ce0e4802077c48573f61b7f739e5a79b239279fc212283692f0bd85dea1c6a96f820a0667d2b06cf2ad964076f7a8a0b05960f206c9d0c237f55ecd97d26954084f89aaccf197717883bf92df43f2921035139468a804372efa988ae11396ae33656201df0b9630ade898341c6ec51377a1e84f8e1eae699fef3d8827a3f88d09c575bba1c5fa590628c3fc95202bf20bd3216a3928472dc0ee7ee3836a2a9ad1d1faf4619384e07a79ebdf32225d5c1c5b041c7666ceb2c6bb774c40a70ef6008cad7459b4f7d9eee4ed6f6d5d066c267fd1772a243e9fe3a902484bcd679f9d1ac0c9a379cf4180e6a3d306af21db0ff1dd9665a4b42bc52bbfe5f694389bd5e4a8274ef808df948d93a747ad2b805c081042d770cb471c73e66f0d1b1849062e7612517d6a1d6162de85e1ac324328705376d3fbc903bdc6bbb9e36f3c09c08411cde749d1ab2c67b11da8ead22abb57df0314ff5af2dc768f08b009ce1fb2aa262b674bcfc944cb536247f4a9314acce9a21df1541dab111c560f9a62fe94925001ca04ae2fd8488ea20bdb715d277614c3ecbab52dda8739d5f4da3c150820b6ca8955076b3ca653647d2200b89d08ca26eeb5f39a545a552d558dae5554b68e502442347b771357cfadd57354b0681e90c64f9528a877e3350d409eae3437c74763b71a887b26510c51fbe496b3258d57776c7bd67cfba7dfe75d22babe620afaa3f145f9d745f979d8cbe09551c3ccfb7a2497236e11ed15a743994c64443765a86d498b436cacdf171df53b0a05828fea58ca2e4524be39dbd6ec82414e5d3411c5b2c6c05c63210822eb5fe02c32d0d621e7dfcac1d8e9913f3cd19c83eec5ac1e527e670b1b66251d958180ae2fb109c1df8d5b5be811208b3f2f7f947d7063d45150455abdf60817c131a5c342b7da21609f6bab1b2668109a88aec33d3d53da291964a113e2ce6d33ac15c5a424b6851f3a3ad62b13b32a34595ae2c3ba26fe4dbc54afb1d8af7a57b69477c2197e41efb77eb4b63edc98303e7afb17c71e3c5b3b2d679152f21df2441045ad98662ac4b52f285dc71dea484d0422b28f84ac165c2039cb78ef8df1b98da1a754a45cfec3f97e9f3dcf503f65f568f292d927cf455c38f4070ea1af79d1930d7532920c4eb8e025439604d6a3b40ad9f158b2989989f01eaf9e32da857b90af8e056f578b9de7771366a646bf863ff5609ad406875b38613aa21a26df3b72ca27aa65db55b480526d38e08ceb1522ac7af7eb7dcf4b47d889409cd5d15a3ff3138ebe2c3c01a1527f947f10a6d161c15e3b4120015985c8cfde9ecd13be9d4c7c0f7d65d6d54def87e37d7c34a140bdabbc3732a635929175d0da9cd3ef9a06f3cb12bbbd25ee2e2ea97a21836263b5daed348ff506050c8a5fb296b66e823478882f20697e5bf688a69e0486afab1d6e80e40e4d51e6b28a544ee21795cafcb848b1f34ba3028e097c0dcc2164be13c9d67494c561f4efcd7d8f3f3fcec66a9d4ebe50f3e003b34d06562b8ef3cd27eda0490d802758be3757803a7945080fd3b9839d331956873435ec829adfe971b58404e1f04c783e232322a3068b8cb6b8902086fa963b1198a5b43cf8d47281536e4462b94056979bd639ecf717efb6907e3fcb8594588d333ae83ddedaeb94861a57a0227dbc9e7e683c735489d620978c48d4bfacdc32a718231b1af7aff51681aceb533f6110123accf33f41f1872370cf4bc9935748fd128a444cc331a40a2398899154eca20e7cd587ee862b3cb4dba4fdea0452ac6acb3aa25822d4a8489e8bd63c969787fc659cfe54582751f788394226609ead72cd3edf8811786cc67a6fa7879f0c1c96bebce979c81e1208070ecd2419a6ac9b14d84877d0175d9f7e1962490af5399730f74f97db55e990110735c6141cdf1e5c7a944a524f0c2eca3d5f09b4131785e433bdf67ce41de7782bef68895ced4c87bea813ae7f7efa5e51a0a2bf29fab4047e5aa4a98be4e2680d672e9fb72e1f8225c50a8e62372825b4122d92eb1b28f3cfae202c2ca88d70bb484fc9dd8a96fa0b7b09c2c557a931c2945dc6e158916080a394b3b7970a870ac304feaca3020e72b91e18a540baf55c6ed433269f29628b795a6ba47b81ea88e2b2f1e65808c4232de5c97fafce390df1d831d88d825d7fb3363382812e9392b1e07b707e5244e4acc52c54e7f1d1d8564663f927aa44ff3f1aa4a1f5378e371037901e56467cb811bde093c61879d9da6d73f57c887d294963039983f382f623a75531a424e0fdb0951096d2c595c64b441578740a5ecd95d59f1aced5648e8c69547415f59a9001d65cff8b606cc3ba310478358a71fea27ce6178d427baad0311f448f046d11c3587161da25783db88807a4620efbff986104a5a82262df996e05162872b9abd3d367053769cafaae0ce9745a48eacb9223621352b3f2f1d9e3e5161fee70cbdc21012a8c36b9a8366d8b0368ad673690ab6f7337159f32ba968165cf16bf93433d13f3e11c9618ac1ef8d4ede015a4ca96f3cfec6afcdc6cce757b4c634fe3f8c4245c6d3d4a1e81931f8be095fd4756c6aa4bfce1f841dc4b58dc2bd558b3bb3133dcfc57c34f25185a4f7915dfe57a1c67feff90c8255891f95dfec589a57eae70ab0773b5524f29822213bcdd1738ae907e4863b31b2704bfb91a5d4f8f8847c8de07f26ad3bc83268c65c0ffbb3a2a691c1b54a73779e58082eb1b706335b39af3ed182e3a74afc446fa49e30b45db51308ee92e71bd6d40f422b1eae0561337c69d71baf10dd954164b9f60aec7577efdc99f4d7ec1436a1d59c2b32c08a2d1f6e6e2ab86c1b74b8b07caf6274be09b52709ccbff3988161bdedccfcf60b4d1b9247410cc0d3c1451f6075a2d38ee622cdbd00d42bd8c6a6be439867ae4adc887e0f49f87f40fc7b4d4e5b3802bc29cc562c438480ddd9b67089ded2f23cb1f1bdea7292851225bfc0f267ed56769d326a829816a40aa73a6bd881f8dbe47ab4e075e2c48924b1e01f92f329bce2250cefcfd2e5e2d999ac9e5f5b92231a05a1c849c4b265d6e5519fb1def226c8e5e3e7f0520af76158f0f884aa1468b1ebe94318076d335c7e2a114bc1937190d20829dc8af034b703e44a49e00d9723aabcbaa1eec287aef67f510dc55414dfe22a73bdad5ef02a98e49ae290611f9adb2db492837b736bb41257a57777ac9183e5d4e740803d0e58a7583830509bb8d6a1d7c910a124d050b451c0392dbb256ffcfe1a8d6f7f29a3161051ba6d2baeebc9b511cd525d342e193e6f87cf272bd58b2cc167b3cb11907a77c73089c8ce716fb07658f118719418e68975f60a7e51cc65f0c52944f067d4eea8aed976039591225014eef422516b8a4680d1b6152bbbea3f4104288b37b7a87c20a60a7dbc46f7e3190ada90d73308cee8c01b64a2d5949c7bdaccb6d9444427e95c12397a3eae97f9916fb518173216116c0629836eda6c2b9fac517c2cf6a65c08ab2dfeb1e70f8af231082d3de6da9fc2d589d228dfd2ff4f058e90a3cfade0e9e8c860f8b0081f3b2f5e87b3944889c15b28e4cde6041b33a5d27da890dfb8da1b7743aa98da23652c6b4f49a10c53d2de4d7bfad5ff1d83d0d6b277cace22f72a53b84de951756f2c75153a5ea7b8636a484c9e9f16e939d161dd51d7e5bef6fa55510c8f2c8d282c53b9bc27b98230cc820d801bfeb0915ed3d71bf1828140bbe91df0972335709a59563c8c9c2b21ca8f9b44f1111b6226423735c34f9686732638014389aab1ac69038a9c3e9bdf7d7d83e3956365351889f98f9719301a322899a02688e720fac1043f33c895b8b686d8281f68ee73a6aab93a07f9cc56855effb5386dc7be5d680302dbda3d8de5b615b06f2c7ba1a9b73fd275d72fb9de7469ac16f31a59dc915138891c8bd2c308582e62b2cfbf0d286cc6f64473cba85275baad6928cd5fdfee273fe707f3860ef972c2b819a5a2759ca3aa7588d0a4522ab34e955faea9c472a33c98a5f6d43a35ab81d6f76845c717fcd0c2e74648c49576c9a226fab52a85beaf32c5e5e843605020ea45fe91b4ca9dc474e98c3d7501facfa76169b5df401814e0647a413578307fd6224fa460f24212b9ff236a165f75d230e9d96bd8307b08254bc7d513c6acb42e90c667be29c5bd823a7cf0073085ba31c50b28fbedc3ded479872cb763bdf5d4881cab87cc3028a129478431582e4122cb0aff677028418921c79d6c343ea6deed14b866bc5080c53c47fc73b9bcaa3bd5af2a8081f5b2f40066398c3f14404071f14173f8b8c573bc40dddb4223a4cb62a4b2abc368784375a2195bd3450c3b63d72b57eafbc951f7ad27d90c6cc7a2f659404b27dd250853d9774e81957119ddbd8cf1e265413eb27ba689c1e7d63374cd514489ec5f774c2d56cb80d495c2bfc9a66d97527a83cc20484e238eae4df8749cdeffd9b76a692b0f114072f518e41db5cdad0b0ed30562bdd493a2ee6330448ef1140d90d585cdb396fc96b6e206486ee4ce7aba61b62bac7953b25ed5e0637263c614e1be7b4f8edf66dabf2c0100e63c6fab00932e4cd4657cd8638268d738637c03732d7dd7982c768620813b293711733c956dc626ab19d1fd449abaafba7cf98ba9a911697e9228d0eba83d286283c65cc9643b400f108f4ae2c56306b2b86e25f9c3cd24f19d5964230eed5f14c90052c1eb1553bf83e426dc1e2038c5e858562e2c182e696831c23fa922f200ff79b1b0d1bdcc7ee44060ecb232cb427345bfa939a02992d50253d565fcfffc79d704c4c8b2a918f5881efb5466288fb9dee9de9c9a21a35595153bfea5b1b4e74fe61f4430938640e03c0bee9a63883c26515922be277a2457589056d93cc3ba7f44ca48b40b2e7778974395160587c743906f38dce9ad62e57ec4603bac80a5271f872b0252eb434383aad1831a4d00fce08b19a22ed82dd125438510bb4eb55baf40cf73bbfac217817de0eb15ef099b273fe9c4c15644bbe860d1cc20763c38c3f95a96edc03eae20b297affc50c906a13cb825f43da5a0e4b189ea32d845ed4d73ff93772868a90532fc2572a28520f9bcbedc3a0c2233f4e939d372bf26b7f820b56fc12ed5a103c5e5184cf6606ba72cd3e3f15536b23228049188f3622610c671a78e7ce1c727b838aba09017beac280de8511e72e825f5d301331daa4f199546c42463f96da58c78e95040dc7b871507863e04eac5ac26e42f237c1bcc1742b58f56c3d70a4a346a04e5b0cc8f76a3c9813ab65e570bd91ac618649789f5f65de1b7db25fbb3c87cb58b5c5bb9b0919643217d032926b919b4261239a2898378c01ddaa54c549e65f348564111234d24e7741c50ab96323d5a238685004b64c599172e5e0df6948f15e8c515bff4acdf59909c4e3131f8fe1bb8d50ae5e53c53310d64a53f3202e6fc8afb863adacd1ac53edce1cb3bc058631511d862cde3911078f1d3fee2b0353cfc881755524fa6668c89693c523fcb89eed29954a44a2dae05f51e2cd52fc016e340840f4b5aac52f32530e918496a8750da7f07040e4ccbcce53fcda63710b92ecbcfb32c8bc7c05b852e899eb03cf8d2599a664602d5ddda9f7d267372e57e9bfd9d915c48aaf5931a6172cbcac6cac60517b6084395d517f8744f9b48c9d81d0769cbf751380bb86127a0e995a0dab182c445a98d7c1593732c116779d58b768cf0c305e4f5b794b52ab2be9da0625d8538b6ff373018cea5fd8156fc1a1f18c509ffa23ca9df37f6f14202f7019ac9bdff7c31f3b821ec9ca149cc02538f0112724210587ea9b926ed2099ccc933c2ae85080454d78b0b31d04441e2b5d02d04345aa1a28cacca7eaac4b90988222005d50335b2a4444bb841099473fb550d96aa98e0f3e39590de94b4477d7f6df93a379c3f4da318fa5d3fb158e54de157152ff234680a0563bdcaa1634e61bcaa76e148fd7a5ded5ccb0c58318ea0555acb90d92c9a55c7c6de2f83710aad1526a0ca113e74fbecd3a82b45913fdc49ae4e87308bd44ccc7b9be90003ff64d76ed3ef1265c73a26410c15bd476dd09a57b7f96ae5a6629b14684b3530f58257f1bd73a14a0aa54f977870849796bc0bc58232686ae1d61d7db14fdcf7e7b2d5934be1635bc68f77b1899231bce17306985d2e13223377cd4cb8c5131e095a9888db03d73301e12d2caa6882a9f90452a599a610b420ac274b78bfbf730b089e32575333edf5be453815c2ededf3d2c06c65acc5f4894b325c462fd9f789df954b64b793b8f8b6744e3188956afb3d9fc337b40ab1f8c03d5aea3981bf1e4d7edf105b7b667d841f7a897f1077f512a720efc37bd9468fd1fdf7d20218fb467b1ac5184565d60f46327c377669d6803b0805a5437abdd864c33617152bbad9b42b6711088ddef0894fc506ecd92d083bc5df0b57587f932c6bf25fa01789a2c23063f0af3bd9ad65333e91e7aec73052ae9424b4696736e313c97c202272411793692de2d971872bf168a598c61fa47edf4a04dc86e73d616ede2b6e6cf5dbcb8ba4a821d09d0f1d8d8843a992135a9b578bcf789949844b608f6f1e45c34312a4fe44280746aca263ac26ae3c2e8de1f471f9d37c990516723342a7a7f56e3f5f6dbd7ae3a0e86857c418a380caea0e5853a11af7c9ecbf7d526cb99f8c0b0f6f2fee632c296dcfb8583c27521728826bdf37d0265fda0c84489e8fec9788f39ec9de53d70666689d0dfbd55e1ddcedfc1cfc07890ce6a6c292ecda5258f645c1af5872a31fb86023f26cbbcf26057cc5c5a2976d82f5486d1e9e72c196400d7656ac837fe120a8a0c4f102f5ec48d3ccc817211df74cb07674a244d18faa3ff48e1e8632844f24e1d33deb608476bc2a16dead1378fc8b5edae201b0133d798e0d4ecb4466b5fe4f0fae54ef1436402ea88468449481c208fd2515baa8edde3742b73d48d504a1a6ce4cb10dfd52c53a835f06adc6e5c35e0fbfd8fd2f411b850a525b69979db0729b79b5bc5e019fdfe5abc41deb4705ae541e23e2cd8d2f07d5a905dc91ee05bdfeca0c14568b7c9c5a9f8789823f8a532650225ce404969b8319e15e3eb0cdaaebb78ea5fd75e082dcc9c40f5e81f63ebb5ab3b4df84111430b28e67eddc392112696a10f1f7a578a6a06c8748200ea92a67d3ac0aa9c6e92fd268d9cce0e747a46ea11c2faa00e8a3335529d93a730d575ef30366edb723814bedd24920b0cfb34e0a4d33a176ac77477161e69b37a781286dff730713d506d69a0b22c9d907d2d8f4c74d15cd9821b2b2b8687a53653cbb8e40139dc341bcdc582851ff50929be02232c022cf6ae1ea1c063ec534d7920f6ca5cfda94fcafbf61076fb4b25d416b6631f15a615fa5fac4bd39975183f8cf060cfdae6b86c0c2ec99c7dc36bcf41c3c4dd5ee2da27a7d19ac03a8b2e2fc2e9550e06b8aeab75305743683af6dadd9637bb29db7d2cfb220a9e128e339385087e879375ec15799e6d8c033ec126cc509db5e1ab0896812a398cc3cf5f51a05a748118e13de1bc10716602a598bb1f24b2b50c06df2520d1a1663b9f63b4bccc4f21528959158ef3a11163602569cd18aa166d28434627593b519de878dbf2bedec032a6678135c4fd3d5629e6b0746729daec5cfdd80115b75ca5a10790d4eac1984b42bed07546e899e098e1ec98fef506590b5c357f98e501439b51ab69d4c20e6d05b359edd5f8fce12c0ef268d3bc5cdb545b4ee07f527f011383d1fdc97284e5ecbb9a9996686db74c829aebe565f0cdfbf47dc59ed03c06f887601b2846ad9ffcb7af5fc55584d35c2eec839478e6ef8b272abc1e9975da4410551b5761f0b0e85dafaf2a5f809589de8795af648b2f6267a9213a5c909753c5559c532dd56cda2e70ec5d28578a38de30e6f92a3a7b93c929366b455380416def580d87fff3f5392afe39bb6e456d104dbbbe85f77e27ae8e5e3e78c71f2e9ed7a01938c26f677232bf02930f36ff1bd8bcbd45d4cada97f15a762ce62f0ef9b2d301634eb4e43811aacf527b12dedfc0df06ebff43a066e4b53e1677860d0ddf14c67d55ba8e3daea74ea2a4e017bdff280db5f41bbefc8d7e4f3615830653afde05b3b0e8604358dee85e7b78dea2e7e0157889681fec057385d0fd12520e7137e6d242c6a75cc3cfda0af7cc971dc012fdeecd193498167f4302eae11b9a8414916b42796ca24a1a7d31812181a84765647f5ec8e99e8c56569c4a8948e7fa4a94197bfe6a627d639c47c0706ea8c1d8c902dc6c1d501087d7195ce96c644b1ec7563561a04a5cecf42fe0e9a875f646dcba3f9590cba0f41976b639fd3689b3a36525e53cd34b068c7e9e331a9dc56dbde5f92df9e4ea0140c29ed0ce0ab18c8f653fc21dee02b485b2f0024218663d1851e7c4520a82c9205550989165cafdffad8ea5faaa5cdce0d2980c2853aabc62fe1cec7f7ebb4fbb32ca45ce23d56d85dae36b97747b2d50c88406a7d4bd28b67640470f249ff23ae3b68bb24b7d3cfdd4ef9ffb5b06bfa14668bff75cf19938715ff8430882b3b7805fd332482174cc77b73037faeea46a0e6f25ea5d7799303b2855128013e1cb54041253ea57d3b2b4c5072fd905801bf1f6691afd724edd08f798a757c7732800e6d4f84f5207dbcbba2b54d98ad019f864a6eb1984a55ed80833862815d7fd3892faa989a960a939c21d14174579f43b726f1dadfc3d7faf9d66947e24c446dd8d0aa4d965c3790bfe12d7e0cc39d917bbbef89c46799315d9b4140d33585da906e4ab4753b2cf653863d1edaeaae83ea3e4fbecf14f77c7101aa2671a2f0a3c5204cfbaf9cc0078586d9ca13f6aabd0ba099705f48622ecef6bae348d97d52eb0e9c77bba5bf3aa76d287459324f657ced1aa1091a863dc695715091f498dc4112692d8dd5ba45cd4a6a7e9f2a7ca12fda41765538cf830963bc8b6d073fbd6655c7baae5e6e0b0275a7127f10c4ac499501cccc0590fc86a0a362194a5fca409ee7eae3617fec7bafd2f2526924994e70dd2520f00f5be9c22e63dc9bc93cea4920a08274bb4b8e81a72443f7e4758a0bcc087cce47df8e1101deaae5190700cc3a86890e6da9140135c28629413273b4b177f4a58ce9911ef0783addbd66ffb0097fb17fed5793a139069084876ae05a0acc573fa8a96a4d0a6abaedd288b09ce7009ed7bc44de5f31343746f8575906fd66dcf8e3e5efdbc6d56f43ce94570def40bc7e732e2d947f5426d53e8c4bfe4337d96ff64fb4f0ce0dbb4a5d47bdb5d7a174fb0b72c616e76b6ad16b2ba8eaadd90c202cabefa09d3fcf2fab3cc6635ba9731a7f2f300bc5218a96026295457a29dfdb0a6744fb361c169191e1e638e23c35d07249b33e13442c307b501db618155408c82a81e2522669016b99aa76476dd900be01b94b49ae338e0e2ee4b7ec2295dac3cca69412de7e4cef83db31313ddfdc90b5900eb4cbe3d38c9dffd6e3532ba87eec55afe3e3e29a7a793688802bc584a88c58ad79276a330b87004d07214a13724142adefeabc793dd2c054fa0d15274f98cc31dfec5524c976e6268a55e02a6238cf2d858fdb4e4b11b74e758a973a27be5808e6bc86b758d1d9952024f90f641b965c86c5dbd7fa11737f85d616d66833bfaecb36102954170e856842a22ea4e29152b20c03b7168dc3c84fc396566ef7c10ba46a81cb204fef82c17a37289cfa342d0e0fd705b9adbf7accce2401e09247f15e3be3964ab12627c289cc901f0247ddbb2dbdb672967c599fd7ad20392e7e08a941ebe6f8d0780cc572d232982cb697d038eca1f0cf02c312778f089dbe7192fe66f7b6cf08ef7ea01a61b2678f2562fda37b6171685c782ce053fe0eef439f78cf1d5d2e9cd46764cccc6a2a1b0b94b71733574fb819992f033dabffec80098d6ccb1eb4ce64ed6b6f096713808369be67686838e3915543ed36f36a75d0f4e33bcc839f567fb7f6edec17cc83e272e4d8df493c6edd5a0c8a0c9b2f8c5d519ff4c228e7dee3735f3fd99fd6b5ee7b44487d3e8f8f2a91bb5127de8b49a3f3d86e712f63c912459c167a610d3115a9780cb42253f8fa32b35210a701bbf423b0c241ea4d27f11b9ae6a224537ca1fc291168b4653a76b2c4a6e8fb6bcc8ec36556d7fd9ae6efe4fc5dcefc2c55a70985a2d5fb661b4a4bd9570788bad6d8ca20cd3d35a89e2762ebd0b44baf117e5dfbd902dadee599c0b64b743c1365db03e5125e9ae1f10336fcd406610985c089a87a3e9299c6cf9fd91166b2b66e063f5714d2d05a05d6dcb70e3209d8d7da7b761e9ec4a4cf86407a6c226bf4e163cb7e5b7d900a4875cc4b6f73e31fe7c463761f4dcb4483441eadd2df674e1b4b95779455fd92012454a11d2798a4257525f90a290e2b025edb4a7793fdeefb20a799cd2bcfbeac7680185f5764e0f61f3abc9d8ce1497d4a80dcc352f6715189990236d8cdea79ed06700b64524016090ea97f29ba15b5a401c38729dc0f2dfcb0342c3cad6d155e1a59bf9c142c7b17cb5c3f78e029d69572efe009c8f8c437857d988731e2dce2ed3bb6033dfe708cf469865abae5d9271cf65300b33c7cded666f38a5870f43c9eab8b6bc05ee5295d75dd14606e4d007dce1d6f558c50125901e8cb18264afed43a24c2c4447ce3e02aaefc0c178399a35dd0d3e34351651955a2fdc03199357f6630699dbf230c40719d6c99a876cb05990636f0e3778638637df985f0af59a7f8e7a1587331d9b3ca6e802d34d0c3fcbc6bf930d4a8fc49b3854307d1a62c4bea3264ba9439bd43c87e961df8d21a404de3de1e40b4ed210a779130b7b11e145c70904001af0a22f567bb16acdf25808debfcb3830fed91fe1b4c2d33cb72529ee1b950c84e26ebe536bec7f2f52ebf028191c0efbe50ee1a0a2bf949d47c5c272eb3540aca27d4a561810be71eb1635f98cb2f861b7037221d02598f50f0b75a91f1573c9cdeb3c39f7c6bc3c788b33db20ec5a804a4b7414a72e1683b152f3e44000559098f66c8c2c5f406c6d81651e12b4dc35904369d8749bba80b74c824d1fe04e546498585fed95e427fa80095d715bd4bcbfed2454249a0fa9d6f48657977b8d192327e14466f5712ace0ec264eea2d0309373b8e26492202526e08c9446e7a1b255b4658841ffcb5e6e81af87a6c2fc6dc82a2eaa4baab3fc14548fc2e7a0946abede7197f8f085f83526264fa262815b62e1dfde66e9beb5b416b02e189ca1f93a8ef8d080320223b21180d69456fba150be7d48a4cddc439d5a8fd1d54917b5d0de041d09cd50080b3cad770fff6cadd418892946ec123de7a388172c0f5a18595421e18dba58bee7695dac4fc33e5e50257b5be3dd93c19b41d45182301d5c25a5993eeee8f8629aaf456e514bbf49276e30ca86eb872351a68815f0cdf4659957b265cc1391a7fd26c1744e6e35a8f987d6eb8642c3fb72048b8b83ebea3bacb7a4884ecb90be1c91b8d8c17d4a6cdda40cfd67d5f3eb6c11058ac8e9fbb60f1adc01ac720d1792e044e10f70a1d09f763a3e108d4477bc1660d0f7872e8881659ecd029539ac3cbd890efad1752a6df12bdd2b35683683e5c20ab1392989f57c993a53ea3719b5163d9deb1a8b71ee8531d22f06f519893dd27672ade97511f4c0042172fbdf2240193c026119aa84452d027a6fe3f1c216fd2176969eddb1156d28c04d8b4ede1bf1fbf983e6ba93442f4c92a2bd969b7c75254aa56891b12fae53ba491a842671a73a9f51a551f80283fe01b3604477fad507a828d7b0281a9023301e911018748ba05c0762868993b7b5ec9f2c9fc0ba7cd12e39a9642ac605de8c5a12412c5ca88625be3b1610cea19c477807001249033cec9c8a7830de465b602d653e7c247da29e56d943b5b8f2cbbf7412efe09e85197f08eb0b5b9cc9fbb53ecb61ab8aa8faf8e99d751800003a655209e2394d5a18bddc34f2c0554794128a42c19e3ed99e717aac14d8d0a1f0b747c8d2c1299d7b10b235bed955060175e8993a9a9ad58036713a535072a6460901e3937d86170a526021917abaf42f0f244bfd2c80af2acbbc044d6f31d75b9870b405d68bfbdae08ebba7bb2ef71851284b67d4ddfe115924c4e4ff2a11c85dd99fcfd5c23076be883b8e49d26aea73d0be481d58e83be7f45d5b4efbb6c8fd97013ef650ed4e6ce5fe7e99cbdbfb25d76f5e26cf8bd6580b6fdc14938af4a35e0d62852e3140acdc8567448e7295438964d08b5ec51245af9cccfc9625e81e10958a3883167b4f76291e924ac52177131b5e848ecb124444afa83c7a0a49ba9fd430a589c82ab8172ec50ac3b5c507dfaee0aa076b35cfd8172420e80d79b9c1d30e180d06d36b3e5d525618cc7898a4d763b8c9c302d42350ac8d00b5dac0fcc7964afd685ed5fa5ead540fbc92b0858709dc1e65e55098bb0c19e02434564f26e28dc3849df1f215bb8737b70bbb69e83dfb811aa7ff1eb9f38c7be47f1522d55728a7c9415182090c2e87322f4c03845a22a08d5ff25fe1c80dfd66462192a40dded379591afb4983e481c9249abc8c4b7600b9b6accccdbd991488b80ccbb9cd0a68873b2c033c946d7c0c4e141dbd175e944de9834d9841c2180882682c952285c11a1f825a5bce11af4bd0527129056daaa81c109303404d38b7839c2f00be5cecfedc823c3e351ca9a74ab77ca4c4af3919940d2bf668401fafca983e112a5e956a0dbf1df0eb085d94443ad0e0cb6239b2a52a8bef9be90133e78efa2dde60810fb5516e8e8713e6539d38630259152ad63f7f772b7dbe585e2d424c2254dbe9cab29c416ac0764b34cee4f78984cc8005aa28c44bc269f40f409faffbcf9c9d9ff11c8026a529d8eaab79725a07fedd159fbe3b8f3ef072f184748f61648704ee231ffa4b2e7aa21849c52920e0a42b3d922fd4d46b909c4f9410052704ba2739be63f6d4b739772479d3ed5385335f30152e708f41d8f8d025d0353ca6a84da01a782752a4f2b58dd26d0ba50475de721afb27ba74e92bf5e4efea98cff945a15bbf13c9ba624b5dbdd38a12bb405f5ed9767706d82c0a4eef6e5a6551c6ff94d2bc631d790406acde49dd453d82506cdbb2d8f711506c4843c01285a45c7068d70fe5dc55d58522f9820791d0678db90fdabc8442d7b6f8fdbe079b61ce37cb9ddb4bedf495573e752be51576d339593f5f2d60ca8c84d447ea9fb605b7335e1fad54056adf543795dec90044c846a73a65a9a502ce02be132031cfedfe401860de8037527bb54f1f66d764548f5cd2b0b2f2fdecd8b600e9a51982a42c63041498f3cc0645622b5400e6567710d9de2345e8c575a2440fbb11aa07ee7c3c21703ecf66eaddee269145a3ab967aa376502f6b6374706984dc92dddbaa610f5c4fc25bc88cf63f9a3f0e7cc689984f6963e1f217fdfe637063c387d0a17ff6151a0b6630e2fb161d027fbe27830ccf9aad2ccee8884d0b14556ec1b2d26970c28e9ad3aa615f5f93167a506e15bab069c924d5e2e3df68ff48b4672d57bbc1d4cb76e5cb21887201db7e796469afe480bf2fa3d72c0c094c4b7fda4c79cd7d226b35f13eb3a234ccfe25401bfae15f099ec09b278134550c6e864cc1ac957a206178c9aac3b61359813c019796fd1bc7aef234985c0b8bcef01fd45e715d880d6dd4de3bb283b3ec6a0a0d48b117fabb8242315ed4603150ef81a11b5a3e89eeb35cb8dbfe03dffc1ab89868d3eea53edd8b7736e536bf92ef4bc1027ef2440122d69ad07a000c340772c848b77fbea709097a54ebca473135818548a8c7dd16a237edcc5c567b77cf98a810a12b9c046519c93e6570eb7f173b44beed881722dc6ac3ab700e87cc80279d4d1d41e82265b024548572a61e3512a1e381089c9e0c971bf0263c0800b450136d3b4d7db7a095f56660e40451d72309c3d276663eee995b88cd7e01c9e97abe5c74c0c4dcc2acdce14bf93254d4e12fd2636cfe4eda924b0d04c7752425369d9f369a44b6fcd5eca5dcfb89b2e227e9439d25d08b2f2c3f2a5971e64b7eea91445405b21ef9fbc427a0ca1b3d52d7715026c93c8a0c78c92e668aac7c3ab4def215e22d33bb2a75f2a9aed6222f833895adfaa76bd7223d4372b904585689c34b9b8ebd41068e514953445b2b74343e520c7aa3662197b5ba136e438db4c88d9d5b3639d12d41f62c9b2aa7d85e3b80b2f10673280729fa7ef01b12c9cdb0ef5793e0aa05a85ad0dadb4f2ad559a4343529c8a58dcff175c89fd0da201bfad7a450b13f5e6e3d23b532af533b877e74a2a10ebac82c4f701eb03ece3fe82aa4c91d3126f5a650edc09ff13a1c4d1a317a17d0585b9aafbba9fd78dfa90b88bdc692a318b60c28e1014fab7a4760b2cce11139b2f2d61b3588cb60d4503eff8f258ab5186a8b11cdb0482c01fb129dc5b982a2f152c2a000da5ca7bf54d7ba20031a0cf70df625a7f7fc3a6e7813528fabc5ad1979be7ddea21a99fb1f52d40a0840aa1b429310358d4332a006df9e39f52779d268f1131ca00e85e99d808b25fe116f1094979bea1289a205d3bbee7e19381866ad473c665486c95d8ae3ce5f846157a73b34b3371c3de648d709f8876c2f2536b98efaa1dab27b5f4a316f005a2e169802f5f955a577502cddfa7937a6375d48ec911155a2ca81247541b18505b9895674c3ef1458987b9a59d18f52fe38d8b54cfbd085ab9e16d63df60423fb884b1bb764b5fb28ff6e1f26f58be6912306be0a3909664a98db006a5aa09b13ef2b4abbcbdaa1c27a0f5d1cdb7ccce7050c19cca94752a36aee45902e9f1c612b3add04d27914e9c78bc966fcc43bda912875b0302ce6afba343d1605365cb0ddc35efe2072939ffe28282d53ee092ee96fa5895ce9882eb66354bdd418127aa68e0f672376a12ca474037a7e1f8bb33d2e6c8e28c9559589d7f8854d13226f195fe3c23fffe25b1966fd006bccc24c2002e37fdefb8ce1599867b62b6a3c3063d5870de28e47885954459c32de3f1f6acd6afecf87bbb67a2173d6e5fa96992dba7a5e93afba661e2d20a73283131532ca815a9d0765464a2431ae55003e92186f0d083d686120447175ea131d66c72598a30de041a7ad443c93c86344a97d3a5ed09d7162a464d8df1bf6418a1ff7b6c78d93e2eb4b86de9ee2e2d000ee1e7e59c6c1e48f06751a4db5df598c14de790996ade74ebea3ebc973100da761a237cc227158828ed6191323cebc7297996915a6f86f3cbf441513188af633ff94295f10b6de8dcd2a04a1b5ee5d68368cbbeb13f071405aa42738f5812b02e59a481bb9f8dc85dc6c4ac18a7c3780485805f9b00ec5b8e69001cb33945db4467071cea1eda8db0907cbcd1317d691e7db3b3aab7d5ce312d82d69139ddfca9cd1c36fbd3de96b899def029a2d1b48f47ea8b0cbd13ed5dad92501e10295c3a31fd3f7cce6d6d1d47da8d5afdd62a4a778c91558e977835d143422f93653015312001221615e5d668731f1a7335bec279d92d4a96f9c54b5aa701797c2e1f4c8b876d19fbb06dac81872b6e2bf9d8d8000d03725edf071c285423d4a39329f2c33f007447c1f7133ed172a833b4ddcb54bdce5e8890475abd7fd9796f96114d7c4c1847135de0b9f2bdcdb86e73c3c9f566cc03bd3b39f16078329317a06a62197b5e66161506ea05c14ca5031bce28c1c4442a4101ca54cc5c52a169b124ae4b25464ac71124311676147936153ee2079e22598777930a824d9505bf3cfe8f094913331f4a0340d7f4b7a3c537aeb168babcb13a2b763a3bff1b49f627f0009a1663c8da59bb73bf972b66b64f1f91f7f5e8587f472bf078e5ccebd26008c42ef17eca14b2503472b3dd3399ec09f2a31db8b015e1aacb63b33f82fdd874a5a8ffe80efec597d93501f6e28043a3350ccf53b867cb0aa9196028184e40fe5ac0a621c6901f864a69c4f36ceced3ab605e041e8cbd870ed9fcdd4a46862e656c7bbdd77e422e217f18a6c0a68854c888c5acc7e5e1f3cb46e839942ecd7d7dae2db4aa60c38279c1bbbad821dc7bb90bb5b11342cb90a5006fdc19f5233439fb33683317519602d833499d6217014e854c1b158077e6599f8a50343090a490e20de84a539d6d29e5a341a57d4fbbe86ee59f493d0c004c0ee0bc8cd1d32728549817d9bea10e6688f235be0f1ffd96fd4e5e7012e6ffe64b62f83a88230848e07989d5a70201eea54332fc16fbb6737a393da427e037da52b6ecafddfe61311eafff394a852d5b8dcd00c16a5675be0c7201a52a9572b07d3d408e3138d0f612ca7b788a9e546f6be6efecff4aef2fd621c2e6234473c2cc6911ff70814f8240f6fc3c1d24664082c9268d669372a356c1ba1c9ed071d5461a81298c232043e64ba82ff57c024f124c6acb3d9230bcefae5845ec5b7c2feeb5b2b322c22b97ba11798297ed5a36ff0c0ec223b4c25f65754230f959f45e49d73cf18e64898eaae3bb76676b5ac170628d2b233abafb3fba84c3143e33e3dcaecfd92499dfdfbe895b4c94acf2b5a99f49df63f040c1abda38a644dee53f25097f44989161424fe00b249963bcc7bdfb3e2f4ddb0555c7dccc1c198b9c83a9f3621395281b63d411d8e002e3eed17b6ef1550082ee56da99c6fa5954a5c22e5d1387dbf8aeac85899d4c0c6dc3e96212ef82412f9c485c066308b0b0d7fcf5f3dcde3b4a2009ccf31ee71f082f7b7a2e8c6c9c16c8ca132845ec12afb1bcf2536e680cf1cc4f26051ab6da9c1f271a1e768678c89f58a21b1c34516ddb55823b603a3cd0868253d74599bb258eb2986022acce208c1dc07372ffce5e8b699f10fd1952b0d2d8a99de124461642171496c3ddccebda52f9fff1e5eb60350236bf7f244b7ee6b5cfeefef3249892ede102c227b361737484b3be018f55e58623c76f1b20e4ccdb3b2b5e193a6e2a83f1fadf0187947cc9896ad93469de9d11e8097deb8831346f9824c1beb1fe2efeeb88a2968d2f184eb866e47532f4a8c8963c8ba8690ef9687be13520f0f5474b9bdae3e280f6339a24a212fbfffa0abd601e59044713e49ad1b6929ea9dfc262df2f14c03eb3697fe0e16e885196e32edb0ae28bf11ea510a831e285744b60d2e7f182d6144155070f6f0c3a17ae86c1e37b2ad5cec988a93ba977a89aa7678858cb6f57491e3974e97386f24f819a0de699223316982611db9f3003fa73b7f8b4362311e57bdb038a211c66561cb1a18941427b18002c5a0fe0f735bef35884d02776de799ae1b88cd7b10fc20041a2ca34f3e2490be3f8200d5b3fac478510e1d11c43a97cca142a8c1b96837a2036a76a5ce7795ec3a2b5e3e603cce28621d8f98d426afb8d8c324a986bdc546b6cd7a5795b16fa47cd6f7ac8110518c2c7fb6d0b3ec06fdf02491b3f4e9c51eb4e8bd514cfef77f45d6bff49ceabb409e4e49daa7e5465e1e59d380b6f5dba58e47fa16089cabc81e7859fe77ed2b315b0774a35bbc7ef2c3856f74fe3bec39b0488bbfbff91c0be1295554d3548ed7eb06050655992566b689de7cd3c85170f45593929f7f0ef1bb550846e4297497f772ab7bd6d5329acbca2ea06e10f2165612d4894cd9a49c0df9677c077c624d44af3296b05fa8e9feca13c9332075b457cd5e70a49f76a13e1c7df46d285fc7885abb6e12d3ebc61fba62be93f3b43c7d4e8359e8e8dbe8812f297437a9d7d1e239fbc508a9437e1191ed893fa54cac2629638ff4f6d454c29411c50913cc8b27e6ebd185b7d076ff544f7bf73dab6544403f55eb7617f54793641b2b80c63fc05436ecf4293d5208e994abc85e9013fc0b4a700bc7411afa7081f5bccf5f27bcdd3c6d4986082955baaaf31662c39ea5048ad7fa4f7938afe41d90983d07f02f28d8247bb01f4645c36231b5307242fda750ada595b063d9d592b977834bc1f6b2526e20f8cf419bcbf81b1b6e4cd6a4d867e210655cbb03198edfc4127c7a36965246c85bb90ded4c6e719da755504480de043c429b006237c840bab3aa30cd3d007a2a9f8c53ed073bac19ecf118452671172f7557958b1fb3c02543e32fb6e2798ce4ffdfdf06086cd2a2b1a9656df8ef9b8c109a14c9cfa30990e36993254a94ad7404aa11d0e802ed7bd30459fee238f488da7e0ac5c7c5b7029fa4c010575fdcae18d35a1a42bf10f9a2165f81ada2a0edb570bb7086fe32828673e75f43e124ed6f195d148cf6d75da140e19739e75cd850274b729192ee7cf586ef398ac8cbde6ea4da560f9f1b1e554d7cf2e89ce9d1e549773b8c65b9a903ee3da3d95f100dad46c72e4e307d7eeb4a3d8874ee75d771e2642eaff60a788d7ef31e60b26ee3cff88d1ddd922be434015d5b387f6a8ebaf7590d19686c54249464990960a7de52217a72ec072fec25941a16687ffe0bdd373536010a7a5f20ef81c808919838960b8a6a9f9f499013dfdb07d</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> 漏洞 </tag>
            
            <tag> LLM </tag>
            
            <tag> 大模型 </tag>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>论文阅读：两篇关于LLM Agents利用漏洞的能力研究论文</title>
      <link href="/2025/03/22/post3/"/>
      <url>/2025/03/22/post3/</url>
      
        <content type="html"><![CDATA[<h1>一、LLM Agents can Autonomously Hack Websites</h1><blockquote><p>发表：arXiv:2402.06664v3 [<a href="http://cs.CR">cs.CR</a>] 16 Feb 2024</p></blockquote><h2 id="1-先看动机和结论">1. 先看动机和结论</h2><h3 id="①-动机">① 动机</h3><p>如title，研究模型构建的agent能不能自动攻击网站</p><h3 id="②-结论">② 结论</h3><ul><li>GPT-4 能够在事先不了解特定漏洞的情况下进行攻击（直接告诉模型给我攻击网站就完事了）</li><li>消融实验表明，对于agent来说，文档读取【document reading】、详细系统指令【,detailed system instructions】这两个Tool是至关重要的</li></ul><h2 id="2-数据集与评估指标-模型">2. 数据集与评估指标、模型</h2><h3 id="①-数据集-评估指标">① 数据集、评估指标</h3><p>共15个漏洞组成用于测试的数据集：<br><img src="/../images/15.png" alt><br><strong>评估指标：</strong> 为每个漏洞指定了目标，按agent在10分钟内是否实现来定义成功/失败<br><strong>测试次数：</strong> 每个漏洞5次实验，成功一次就ok</p><h3 id="②-构建agent的模型">② 构建Agent的模型</h3><p><img src="/../images/16.png" alt><br>这个表顺便显示了一下成功率，GPT-4失败的四个漏洞是：<br>权限绕过、Javascript 攻击、困难 SQL 注入 和 XSS + CSRF</p><h2 id="3-一些很有趣的论点">3. 一些很有趣的论点</h2><h3 id="①-探究智能体在网安领域的能力-gpt-4">① 探究智能体在网安领域的能力【GPT-4】</h3><p>例如对困难的SQL注入，智能体能够成功地做到：</p><ul><li>在页面之间导航，以确定攻击哪个页面。</li><li>尝试默认的用户名和密码（例如，admin）。</li><li>确定默认尝试失败，并尝试经典的 SQL 注入（例如，附加 OR 1 = 1）。</li><li>读取源代码，以确定 SQL 查询中有一个 GET 参数。</li><li>确定该网站易受 SQL 联合攻击。</li><li>执行 SQL 联合攻击。<br>例如对服务器端模板注入（SSTI）攻击，智能体能够成功地做到：</li><li>确定一个网站是否容易受到 SSTI 攻击。</li><li>使用一个小的测试脚本测试 SSTI 攻击。</li><li>确定要窃取的文件的位置。</li><li>执行完整的 SSTI 攻击。</li></ul><h3 id="②-评估指标有-成本">② 评估指标有"成本"</h3><p>如果要从公司应用开发角度来看，成本这个指标确实很重要，在学术论文里感觉大多评估指标还是经典四件套：accuracy/precision/recall/f1-score，或者构建其他科学性指标评估检测效果，而不是关注成本。但是做竞赛作品的话，注意这个点应该还挺好的。<br>论文的研究结果是：“每次成功利用漏洞的成本将是 8.80 美元”</p><h1>二、LLM Agents can Autonomously Exploit One-day Vulnerabilities</h1><blockquote><p>发表：arXiv:2404.08144v2 [<a href="http://cs.CR">cs.CR</a>] 17 Apr 2024</p></blockquote><h2 id="1-先看动机和结论">1. 先看动机和结论</h2><h3 id="①-动机">① 动机</h3><p>如title，研究模型构建的agent利用漏洞信息的能力</p><h3 id="②-结论">② 结论</h3><ul><li>GPT-3.5/其他大模型/开源漏洞扫描器 Agent —— 0%</li><li>GPT-4 Agent —— 7%</li><li>GPT-4 Agent <strong>+ CVE描述</strong> —— 86.7%</li></ul><p>所以CVE描述很重要，如果没有CVE描述，很可能在布局中找不到触发点或者超过工具相应大小限制，以及可能列出所有可能的攻击方式并只尝试其中一种就下班了</p><h2 id="2-数据集-模型-扫描器">2. 数据集、模型、扫描器</h2><h3 id="①-数据集">① 数据集</h3><p>共15个漏洞组成用于测试的数据集：<br>人工挑选了14个现实世界<strong>one-day漏洞</strong>（都是开源软件的可重现CVE） + "ACIDRain"漏洞<br><img src="/../images/12.png" alt></p><p><img src="/../images/13.png" alt></p><h3 id="②-构建agent的模型">② 构建Agent的模型</h3><p><img src="/../images/14.png" alt><br>都用的api而不是本地部署，所以要衡量成本<br>这个表顺便显示了一下成功率，GPT-4失败的两个漏洞是：</p><ul><li>Iris 跨站脚本漏洞（XSS）</li><li>Hertzbeat 远程代码执行漏洞（RCE）</li></ul><h3 id="③-开源漏洞扫描器">③ 开源漏洞扫描器</h3><p>ZAP和Metasploit<br>效果上就是啥也没检测出来</p><h2 id="3-一些很有趣的论点">3. 一些很有趣的论点</h2><h3 id="①-已经有构建agent来打ctf的尝试了">① 已经有构建Agent来打CTF的尝试了</h3><p>Llm agents can autonomously hack websites, 2024. —Richard Fang, Rohan Bindu, Akul Gupta, Qiusi Zhan, and Daniel Kang.</p><h3 id="②-评估指标有-成本">② 评估指标有"成本"</h3><p>如果要从公司应用开发角度来看，成本这个指标确实很重要，在学术论文里感觉大多评估指标还是经典四件套：accuracy/precision/recall/f1-score，或者构建其他科学性指标评估检测效果，而不是关注成本。但是做竞赛作品的话，注意这个点应该还挺好的。<br>论文的研究结果是：“每次成功利用漏洞的成本将是 8.80 美元”</p><h1>三、结语</h1><h2 id="1-关于开源模型">1. 关于开源模型</h2><p>这两篇论文所示的结果都是GPT-4和GPT-3.5这种闭源模型有效果，而Llama这种开源模型效果不佳，因为工具的调用失败。如果后续研究想要探究开源模型的对应效果，应该着重看一下对工具的调用上是否可以改进。<br>同时，DeepSeek热潮虽然让我们很想利用DeepSeek-R1或DeepSeek-V3进行研究，但是DeepSeek系列模型当前没有调用工具的能力，从而无法构建智能体。</p><h2 id="2-关于这两篇论文">2. 关于这两篇论文</h2><blockquote><p>The most related work to ours is a recent study that showed that LLM agents can hack websites (Fang et al., 2024). This work focused on simple vulnerabilities in capture-the-flag style environments that are not reflective of real-world systems.<br>与我们的研究最为相关的是最近的一项研究，该研究表明大语言模型智能体能够攻击网站（方等人，2024）。这项工作聚焦于 “夺旗” 式环境中的简单漏洞，而这些漏洞并不能反映现实世界中的系统情况。</p></blockquote><p>也就是说第二篇论文是第一篇在真实世界漏洞上的进一步研究<br>这两篇论文属于同一个团队</p>]]></content>
      
      
      <categories>
          
          <category> 论文阅读 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Agent </tag>
            
            <tag> 漏洞 </tag>
            
            <tag> LLM </tag>
            
            <tag> 大模型 </tag>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VideoCaptioner字幕生成与翻译相关配置与cookie问题解决</title>
      <link href="/2025/03/20/post1/"/>
      <url>/2025/03/20/post1/</url>
      
        <content type="html"><![CDATA[<h1>VideoCaptioner</h1><p>用处就是给无字幕、无翻译的视频生成带翻译的字幕。但是！！！<br>和b站、youtube上的字幕生成翻译不同，这个可以<font color="pink"><strong>调用大模型进行字幕翻译优化</strong></font><br>项目地址：<a href="https://github.com/WEIFENG2333/VideoCaptioner">https://github.com/WEIFENG2333/VideoCaptioner</a></p><h2 id="关于llm-api的配置">关于LLM api的配置</h2><p>在设置里面可以找到LLM配置，有条件的家人可以选择优质一点的大模型，但我是穷鬼，直接选择免费的GLM-4-Flash，智谱的这个模型是<strong>免费且token无限制</strong>的！！<br><img src="/../images/1.png" alt="LLM配置" title="LLM配置"><br>智谱api申请地址：<a href="https://www.bigmodel.cn/console/overview%E3%80%81">https://www.bigmodel.cn/console/overview、</a><br><img src="/../images/2.png" alt="智谱api概览首页" title="智谱api概览首页"><br><img src="/../images/3.png" alt="智谱api创建入口" title="智谱api创建入口"></p><h2 id="任务创建">任务创建</h2><p>我尝试了俩视频，分别在B站上和油管上的，B站的直接把url复制到框内就能下载，但youtube需要记录cookie（有人机验证），可以在配置文件设置一下就也可以绕过了<br><img src="/../images/5.png" alt="创建任务" title="创建任务"><br>后面就是正常按照流程去生成字幕、翻译了。看一下效果：<br><img src="/../images/6.png" alt="B站上的视频" title="B站上的视频"><br><img src="/../images/7.png" alt="油管上的视频" title="油管上的视频"><br>感觉还阔以</p><h2 id="youtube链接的cookie问题">youtube链接的cookie问题</h2><p>首先需要在edge的扩展里整一个插件：Export Cookies File<br><img src="/../images/8.png" alt="插件" title="Export Cookies File"><br>然后回到咱们的视频，运行扩展，导出cookie文件<br><img src="/../images/9.png" alt="运行扩展" title="导出cookie文件"><br>把文件重命名为cookies.txt并放到项目路径中的AppData目录下<br><img src="/../images/10.png" alt="移动到项目路径" title="放到该放的位置捏"><br>然后重启软件，提交url，就能download啦！！完美绕过youtube的付费download！<br>我打算以后下载YouTube的视频也这样搞了，还能顺便生成字幕，美哉美哉~~</p>]]></content>
      
      
      <categories>
          
          <category> 工具设置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
